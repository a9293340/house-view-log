function M(c,h){for(var g=0;g<h.length;g++){const o=h[g];if(typeof o!="string"&&!Array.isArray(o)){for(const f in o)if(f!=="default"&&!(f in c)){const d=Object.getOwnPropertyDescriptor(o,f);d&&Object.defineProperty(c,f,d.get?d:{enumerable:!0,get:()=>o[f]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}var T={};(function(){var c=tinymce.util.Tools.resolve("tinymce.PluginManager"),h=function(e,n,t){return n===""||e.length>=n.length&&e.substr(t,t+n.length)===n},g=function(e,n){return e.indexOf(n)!==-1},o=function(e,n){return h(e,n,0)},f=tinymce.util.Tools.resolve("tinymce.Env"),d=function(){return/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g},_=new RegExp("^"+d().source+"$","i"),x=function(e){return e.getParam("autolink_pattern",_)},E=function(e){return e.getParam("default_link_target",!1)},$=function(e){return e.getParam("link_default_protocol","http","string")},y=function(e){return/^[(\[{ \u00a0]$/.test(e)},k=function(e){return e.nodeType===3},w=function(e){return e.nodeType===1},z=function(e){return p(e,-1)},L=function(e){return p(e,0)},N=function(e){return p(e,-1)},P=function(e,n){if(n<0&&(n=0),k(e)){var t=e.data.length;n>t&&(n=t)}return n},s=function(e,n,t){!w(n)||n.hasChildNodes()?e.setStart(n,P(n,t)):e.setStartBefore(n)},l=function(e,n,t){!w(n)||n.hasChildNodes()?e.setEnd(n,P(n,t)):e.setEndAfter(n)},Z=function(e){return/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e)},B=function(e){return/[?!,.;:]/.test(e)},p=function(e,n){var t,a,S,v,u,C,b,j=x(e),A=E(e);if(e.dom.getParent(e.selection.getNode(),"a[href]")===null){var r=e.selection.getRng().cloneRange();if(r.startOffset<5){if(u=r.endContainer.previousSibling,!u){if(!r.endContainer.firstChild||!r.endContainer.firstChild.nextSibling)return;u=r.endContainer.firstChild.nextSibling}if(C=u.length,s(r,u,C),l(r,u,C),r.endOffset<5)return;t=r.endOffset,a=u}else{if(a=r.endContainer,!k(a)&&a.firstChild){for(;!k(a)&&a.firstChild;)a=a.firstChild;k(a)&&(s(r,a,0),l(r,a,a.nodeValue.length))}r.endOffset===1?t=2:t=r.endOffset-1-n}var m=t;do s(r,a,t>=2?t-2:0),l(r,a,t>=1?t-1:0),t-=1,b=r.toString();while(!y(b)&&t-2>=0);y(r.toString())?(s(r,a,t),l(r,a,m),t+=1):r.startOffset===0?(s(r,a,0),l(r,a,m)):(s(r,a,t),l(r,a,m)),v=r.toString(),B(v.charAt(v.length-1))&&l(r,a,m-1),v=r.toString().trim();var O=v.match(j),I=$(e);if(O){var i=O[0];o(i,"www.")?i=I+"://"+i:g(i,"@")&&!Z(i)&&(i="mailto:"+i),S=e.selection.getBookmark(),e.selection.setRng(r),e.execCommand("createlink",!1,i),A!==!1&&e.dom.setAttrib(e.selection.getNode(),"target",A),e.selection.moveToBookmark(S),e.nodeChanged()}}},D=function(e){var n;if(e.on("keydown",function(t){if(t.keyCode===13)return N(e)}),f.browser.isIE()){e.on("focus",function(){if(!n){n=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch{}}});return}e.on("keypress",function(t){if(t.keyCode===41||t.keyCode===93||t.keyCode===125)return z(e)}),e.on("keyup",function(t){if(t.keyCode===32)return L(e)})};function R(){c.add("autolink",function(e){D(e)})}R()})();const U=M({__proto__:null,default:T},[T]);export{U as i};
