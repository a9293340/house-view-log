function bS(qe,Re){for(var oe=0;oe<Re.length;oe++){const Xr=Re[oe];if(typeof Xr!="string"&&!Array.isArray(Xr)){for(const vr in Xr)if(vr!=="default"&&!(vr in qe)){const Te=Object.getOwnPropertyDescriptor(Xr,vr);Te&&Object.defineProperty(qe,vr,Te.get?Te:{enumerable:!0,get:()=>Xr[vr]})}}}return Object.freeze(Object.defineProperty(qe,Symbol.toStringTag,{value:"Module"}))}var xf={};(function(){var qe=function(r){var e=typeof r;return r===null?"null":e==="object"&&(Array.prototype.isPrototypeOf(r)||r.constructor&&r.constructor.name==="Array")?"array":e==="object"&&(String.prototype.isPrototypeOf(r)||r.constructor&&r.constructor.name==="String")?"string":e},Re=function(r){return function(e){return qe(e)===r}},oe=function(r){return function(e){return typeof e===r}},Xr=function(r){return function(e){return r===e}},vr=Re("string"),Te=Re("object"),$n=Re("array"),Of=Xr(null),kf=oe("boolean"),Df=Xr(void 0),Af=function(r){return r==null},Lt=function(r){return!Af(r)},ae=oe("function"),Wt=oe("number"),T=function(){},$f=function(r,e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return r(e.apply(null,n))}},Bf=function(r,e){return function(n){return r(e(n))}},w=function(r){return function(){return r}},F=function(r){return r},Pf=function(r,e){return r===e};function G(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var a=e.concat(t);return r.apply(null,a)}}var Ft=function(r){return function(e){return!r(e)}},Ef=function(r){return function(){throw new Error(r)}},ir=w(!1),I=w(!0),Bn=function(){return _t},_t=function(){var r=function(t){return t()},e=F,n={fold:function(t,o){return t()},isSome:ir,isNone:I,getOr:e,getOrThunk:r,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:w(null),getOrUndefined:w(void 0),or:e,orThunk:r,map:Bn,each:T,bind:Bn,exists:ir,forall:I,filter:function(){return Bn()},toArray:function(){return[]},toString:w("none()")};return n}(),Ht=function(r){var e=w(r),n=function(){return o},t=function(a){return a(r)},o={fold:function(a,u){return u(r)},isSome:I,isNone:ir,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(a){return Ht(a(r))},each:function(a){a(r)},bind:t,exists:t,forall:t,filter:function(a){return a(r)?o:_t},toArray:function(){return[r]},toString:function(){return"some("+r+")"}};return o},If=function(r){return r==null?_t:Ht(r)},s={some:Ht,none:Bn,from:If},qa=Array.prototype.slice,Mf=Array.prototype.indexOf,Nf=Array.prototype.push,Lf=function(r,e){return Mf.call(r,e)},K=function(r,e){return Lf(r,e)>-1},or=function(r,e){for(var n=0,t=r.length;n<t;n++){var o=r[n];if(e(o,n))return!0}return!1},gr=function(r,e){for(var n=[],t=0;t<r;t++)n.push(e(t));return n},S=function(r,e){for(var n=r.length,t=new Array(n),o=0;o<n;o++){var a=r[o];t[o]=e(a,o)}return t},O=function(r,e){for(var n=0,t=r.length;n<t;n++){var o=r[n];e(o,n)}},Wf=function(r,e){for(var n=r.length-1;n>=0;n--){var t=r[n];e(t,n)}},Ka=function(r,e){for(var n=[],t=[],o=0,a=r.length;o<a;o++){var u=r[o],i=e(u,o)?n:t;i.push(u)}return{pass:n,fail:t}},U=function(r,e){for(var n=[],t=0,o=r.length;t<o;t++){var a=r[t];e(a,t)&&n.push(a)}return n},Rr=function(r,e,n){return Wf(r,function(t,o){n=e(n,t,o)}),n},br=function(r,e,n){return O(r,function(t,o){n=e(n,t,o)}),n},Ff=function(r,e,n){for(var t=0,o=r.length;t<o;t++){var a=r[t];if(e(a,t))return s.some(a);if(n(a,t))break}return s.none()},pr=function(r,e){return Ff(r,e,ir)},Pn=function(r,e){for(var n=0,t=r.length;n<t;n++){var o=r[n];if(e(o,n))return s.some(n)}return s.none()},Xa=function(r){for(var e=[],n=0,t=r.length;n<t;++n){if(!$n(r[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+r);Nf.apply(e,r[n])}return e},J=function(r,e){return Xa(S(r,e))},hr=function(r,e){for(var n=0,t=r.length;n<t;++n){var o=r[n];if(e(o,n)!==!0)return!1}return!0},_f=function(r){var e=qa.call(r,0);return e.reverse(),e},zt=function(r,e){for(var n={},t=0,o=r.length;t<o;t++){var a=r[t];n[String(a)]=e(a,t)}return n},Hf=function(r){return[r]},zf=function(r,e){var n=qa.call(r,0);return n.sort(e),n},Ya=function(r,e){return e>=0&&e<r.length?s.some(r[e]):s.none()},En=function(r){return Ya(r,0)},Ja=function(r){return Ya(r,r.length-1)},Or=function(r,e){for(var n=0;n<r.length;n++){var t=e(r[n],n);if(t.isSome())return t}return s.none()},D=function(){return D=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++){n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},D.apply(this,arguments)};function Ke(r,e,n){if(n||arguments.length===2)for(var t=0,o=e.length,a;t<o;t++)(a||!(t in e))&&(a||(a=Array.prototype.slice.call(e,0,t)),a[t]=e[t]);return r.concat(a||Array.prototype.slice.call(e))}var xe=function(r){var e=!1,n;return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return e||(e=!0,n=r.apply(null,t)),n}},Gf=function(r,e,n,t){var o=r.isiOS()&&/ipad/i.test(n)===!0,a=r.isiOS()&&!o,u=r.isiOS()||r.isAndroid(),i=u||t("(pointer:coarse)"),c=o||!a&&u&&t("(min-device-width:768px)"),l=a||u&&!c,f=e.isSafari()&&r.isiOS()&&/safari/i.test(n)===!1,v=!l&&!c&&!f;return{isiPad:w(o),isiPhone:w(a),isTablet:w(c),isPhone:w(l),isTouch:w(i),isAndroid:r.isAndroid,isiOS:r.isiOS,isWebView:w(f),isDesktop:w(v)}},jf=function(r,e){for(var n=0;n<r.length;n++){var t=r[n];if(t.test(e))return t}},Uf=function(r,e){var n=jf(r,e);if(!n)return{major:0,minor:0};var t=function(o){return Number(e.replace(n,"$"+o))};return Gt(t(1),t(2))},Vf=function(r,e){var n=String(e).toLowerCase();return r.length===0?Qa():Uf(r,n)},Qa=function(){return Gt(0,0)},Gt=function(r,e){return{major:r,minor:e}},Xe={nu:Gt,detect:Vf,unknown:Qa},qf=function(r,e){return Or(e.brands,function(n){var t=n.brand.toLowerCase();return pr(r,function(o){var a;return t===((a=o.brand)===null||a===void 0?void 0:a.toLowerCase())}).map(function(o){return{current:o.name,version:Xe.nu(parseInt(n.version,10),0)}})})},Za=function(r,e){var n=String(e).toLowerCase();return pr(r,function(t){return t.search(n)})},Kf=function(r,e){return Za(r,e).map(function(n){var t=Xe.detect(n.versionRegexes,e);return{current:n.name,version:t}})},Xf=function(r,e){return Za(r,e).map(function(n){var t=Xe.detect(n.versionRegexes,e);return{current:n.name,version:t}})},Yf=function(r,e){return r.substring(e)},ru=function(r,e,n){return e===""||r.length>=e.length&&r.substr(n,n+e.length)===e},Jf=function(r,e){return In(r,e)?Yf(r,e.length):r},mr=function(r,e){return r.indexOf(e)!==-1},In=function(r,e){return ru(r,e,0)},Mn=function(r,e){return ru(r,e,r.length-e.length)},Qf=function(r){return function(e){return e.replace(r,"")}},Zf=Qf(/^\s+|\s+$/g),jt=function(r){return r.length>0},rs=function(r){return!jt(r)},es=function(r){var e=parseFloat(r);return isNaN(e)?s.none():s.some(e)},Ut=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Pr=function(r){return function(e){return mr(e,r)}},ns=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(r){return mr(r,"edge/")&&mr(r,"chrome")&&mr(r,"safari")&&mr(r,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ut],search:function(r){return mr(r,"chrome")&&!mr(r,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(r){return mr(r,"msie")||mr(r,"trident")}},{name:"Opera",versionRegexes:[Ut,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Pr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Pr("firefox")},{name:"Safari",versionRegexes:[Ut,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(r){return(mr(r,"safari")||mr(r,"mobile/"))&&mr(r,"applewebkit")}}],ts=[{name:"Windows",search:Pr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(r){return mr(r,"iphone")||mr(r,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Pr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Pr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Pr("linux"),versionRegexes:[]},{name:"Solaris",search:Pr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Pr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Pr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],eu={browsers:w(ns),oses:w(ts)},nu="Edge",tu="Chrome",ou="IE",au="Opera",uu="Firefox",iu="Safari",os=function(){return cu({current:void 0,version:Xe.unknown()})},cu=function(r){var e=r.current,n=r.version,t=function(o){return function(){return e===o}};return{current:e,version:n,isEdge:t(nu),isChrome:t(tu),isIE:t(ou),isOpera:t(au),isFirefox:t(uu),isSafari:t(iu)}},lu={unknown:os,nu:cu,edge:w(nu),chrome:w(tu),ie:w(ou),opera:w(au),firefox:w(uu),safari:w(iu)},fu="Windows",su="iOS",vu="Android",mu="Linux",du="OSX",gu="Solaris",pu="FreeBSD",hu="ChromeOS",as=function(){return bu({current:void 0,version:Xe.unknown()})},bu=function(r){var e=r.current,n=r.version,t=function(o){return function(){return e===o}};return{current:e,version:n,isWindows:t(fu),isiOS:t(su),isAndroid:t(vu),isOSX:t(du),isLinux:t(mu),isSolaris:t(gu),isFreeBSD:t(pu),isChromeOS:t(hu)}},wu={unknown:as,nu:bu,windows:w(fu),ios:w(su),android:w(vu),linux:w(mu),osx:w(du),solaris:w(gu),freebsd:w(pu),chromeos:w(hu)},us=function(r,e,n){var t=eu.browsers(),o=eu.oses(),a=e.bind(function(c){return qf(t,c)}).orThunk(function(){return Kf(t,r)}).fold(lu.unknown,lu.nu),u=Xf(o,r).fold(wu.unknown,wu.nu),i=Gf(u,a,r,n);return{browser:a,os:u,deviceType:i}},is={detect:us},cs=function(r){return window.matchMedia(r).matches},ls=xe(function(){return is.detect(navigator.userAgent,s.from(navigator.userAgentData),cs)}),Oe=function(){return ls()},fs=function(r,e,n){return(r.compareDocumentPosition(e)&n)!==0},ss=function(r,e){return fs(r,e,Node.DOCUMENT_POSITION_CONTAINED_BY)},vs=8,yu=9,Cu=11,Vt=1,ms=3,ds=function(r,e){var n=e||document,t=n.createElement("div");if(t.innerHTML=r,!t.hasChildNodes()||t.childNodes.length>1)throw console.error("HTML does not have a single root node",r),new Error("HTML must have a single root node");return Ye(t.childNodes[0])},gs=function(r,e){var n=e||document,t=n.createElement(r);return Ye(t)},ps=function(r,e){var n=e||document,t=n.createTextNode(r);return Ye(t)},Ye=function(r){if(r==null)throw new Error("Node cannot be null or undefined");return{dom:r}},hs=function(r,e,n){return s.from(r.dom.elementFromPoint(e,n)).map(Ye)},b={fromHtml:ds,fromTag:gs,fromText:ps,fromDom:Ye,fromPoint:hs},wr=function(r,e){var n=r.dom;if(n.nodeType!==Vt)return!1;var t=n;if(t.matches!==void 0)return t.matches(e);if(t.msMatchesSelector!==void 0)return t.msMatchesSelector(e);if(t.webkitMatchesSelector!==void 0)return t.webkitMatchesSelector(e);if(t.mozMatchesSelector!==void 0)return t.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Su=function(r){return r.nodeType!==Vt&&r.nodeType!==yu&&r.nodeType!==Cu||r.childElementCount===0},bs=function(r,e){var n=e===void 0?document:e.dom;return Su(n)?[]:S(n.querySelectorAll(r),b.fromDom)},Ru=function(r,e){var n=e===void 0?document:e.dom;return Su(n)?s.none():s.from(n.querySelector(r)).map(b.fromDom)},M=function(r,e){return r.dom===e.dom},ws=function(r,e){var n=r.dom,t=e.dom;return n===t?!1:n.contains(t)},ys=function(r,e){return ss(r.dom,e.dom)},qt=function(r,e){return Oe().browser.isIE()?ys(r,e):ws(r,e)},Cs=wr,Yr=Object.keys,Tu=Object.hasOwnProperty,cr=function(r,e){for(var n=Yr(r),t=0,o=n.length;t<o;t++){var a=n[t],u=r[a];e(u,a)}},xu=function(r,e){return Ss(r,function(n,t){return{k:t,v:e(n,t)}})},Ss=function(r,e){var n={};return cr(r,function(t,o){var a=e(t,o);n[a.k]=a.v}),n},Rs=function(r){return function(e,n){r[n]=e}},Ts=function(r,e,n,t){var o={};return cr(r,function(a,u){(e(a,u)?n:t)(a,u)}),o},ke=function(r,e){var n={};return Ts(r,e,Rs(n),T),n},Ou=function(r,e){var n=[];return cr(r,function(t,o){n.push(e(t,o))}),n},ku=function(r){return Ou(r,F)},ue=function(r){return Yr(r).length},Er=function(r,e){return ie(r,e)?s.from(r[e]):s.none()},ie=function(r,e){return Tu.call(r,e)},Du=function(r,e){return ie(r,e)&&r[e]!==void 0&&r[e]!==null},xs=function(r){for(var e in r)if(Tu.call(r,e))return!1;return!0},Os=["tfoot","thead","tbody","colgroup"],ks=function(r){return K(Os,r)},Ds=function(r,e){return{rows:r,columns:e}},As=function(r,e){return{row:r,column:e}},Au=function(r,e,n){return{element:r,rowspan:e,colspan:n}},$s=function(r,e,n,t){return{element:r,rowspan:e,colspan:n,isNew:t}},Bs=function(r,e,n,t,o,a){return{element:r,rowspan:e,colspan:n,row:t,column:o,isLocked:a}},Kt=function(r,e,n){return{element:r,cells:e,section:n}},Ps=function(r,e,n,t){return{element:r,cells:e,section:n,isNew:t}},lr=function(r,e,n){return{element:r,isNew:e,isLocked:n}},ce=function(r,e,n,t){return{element:r,cells:e,section:n,isNew:t}},Es=function(r,e,n,t){return{startRow:r,startCol:e,finishRow:n,finishCol:t}},Is=function(r,e,n){return{element:r,colspan:e,column:n}},Ms=function(r,e){return{element:r,columns:e}};typeof window<"u"||Function("return this;")();var N=function(r){var e=r.dom.nodeName;return e.toLowerCase()},$u=function(r){return r.dom.nodeType},Nn=function(r){return function(e){return $u(e)===r}},Ns=function(r){return $u(r)===vs||N(r)==="#comment"},Ir=Nn(Vt),Jr=Nn(ms),Ls=Nn(yu),Ws=Nn(Cu),Mr=function(r){return function(e){return Ir(e)&&N(e)===r}},Ln=function(r){return b.fromDom(r.dom.ownerDocument)},Xt=function(r){return Ls(r)?r:Ln(r)},Fs=function(r){return b.fromDom(Xt(r).dom.defaultView)},le=function(r){return s.from(r.dom.parentNode).map(b.fromDom)},_s=function(r){return s.from(r.dom.parentElement).map(b.fromDom)},Bu=function(r,e){for(var n=ae(e)?e:ir,t=r.dom,o=[];t.parentNode!==null&&t.parentNode!==void 0;){var a=t.parentNode,u=b.fromDom(a);if(o.push(u),n(u)===!0)break;t=a}return o},Pu=function(r){return s.from(r.dom.previousSibling).map(b.fromDom)},Wn=function(r){return s.from(r.dom.nextSibling).map(b.fromDom)},ar=function(r){return S(r.dom.childNodes,b.fromDom)},Fn=function(r,e){var n=r.dom.childNodes;return s.from(n[e]).map(b.fromDom)},Hs=function(r){return Fn(r,0)},zs=function(r){return Ws(r)&&Lt(r.dom.host)},Eu=ae(Element.prototype.attachShadow)&&ae(Node.prototype.getRootNode),Gs=w(Eu),js=Eu?function(r){return b.fromDom(r.dom.getRootNode())}:Xt,Us=function(r){var e=js(r);return zs(e)?s.some(e):s.none()},Vs=function(r){return b.fromDom(r.dom.host)},qs=function(r){if(Gs()&&Lt(r.target)){var e=b.fromDom(r.target);if(Ir(e)&&Ks(e)&&r.composed&&r.composedPath){var n=r.composedPath();if(n)return En(n)}}return s.from(r.target)},Ks=function(r){return Lt(r.dom.shadowRoot)},Nr=function(r){var e=Jr(r)?r.dom.parentNode:r.dom;if(e==null||e.ownerDocument===null)return!1;var n=e.ownerDocument;return Us(b.fromDom(e)).fold(function(){return n.body.contains(e)},Bf(Nr,Vs))},Xs=function(){return Iu(b.fromDom(document))},Iu=function(r){var e=r.dom.body;if(e==null)throw new Error("Body is not available yet");return b.fromDom(e)},Ys=function(r,e,n){return U(Bu(r,n),e)},Js=function(r,e){return U(ar(r),e)},Mu=function(r,e){var n=[];return O(ar(r),function(t){e(t)&&(n=n.concat([t])),n=n.concat(Mu(t,e))}),n},Je=function(r,e,n){return Ys(r,function(t){return wr(t,e)},n)},_n=function(r,e){return Js(r,function(n){return wr(n,e)})},kr=function(r,e){return bs(e,r)};function Nu(r,e,n,t,o){return r(n,t)?s.some(n):ae(o)&&o(n)?s.none():e(n,t,o)}var Qe=function(r,e,n){for(var t=r.dom,o=ae(n)?n:ir;t.parentNode;){t=t.parentNode;var a=b.fromDom(t);if(e(a))return s.some(a);if(o(a))break}return s.none()},Qs=function(r,e,n){var t=function(o,a){return a(o)};return Nu(t,Qe,r,e,n)},Zs=function(r,e){var n=function(o){return e(b.fromDom(o))},t=pr(r.dom.childNodes,n);return t.map(b.fromDom)},rv=function(r,e){var n=function(t){for(var o=0;o<t.childNodes.length;o++){var a=b.fromDom(t.childNodes[o]);if(e(a))return s.some(a);var u=n(t.childNodes[o]);if(u.isSome())return u}return s.none()};return n(r.dom)},fe=function(r,e,n){return Qe(r,function(t){return wr(t,e)},n)},Hn=function(r,e){return Zs(r,function(n){return wr(n,e)})},Ze=function(r,e){return Ru(e,r)},Q=function(r,e,n){var t=function(o,a){return wr(o,a)};return Nu(t,fe,r,e,n)},Yt=function(r,e,n){if(vr(n)||kf(n)||Wt(n))r.setAttribute(e,n+"");else throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",r),new Error("Attribute value was not simple")},X=function(r,e,n){Yt(r.dom,e,n)},rn=function(r,e){var n=r.dom;cr(e,function(t,o){Yt(n,o,t)})},ev=function(r,e){cr(e,function(n,t){n.fold(function(){_(r,t)},function(o){Yt(r.dom,t,o)})})},se=function(r,e){var n=r.dom.getAttribute(e);return n===null?void 0:n},Qr=function(r,e){return s.from(se(r,e))},_=function(r,e){r.dom.removeAttribute(e)},Lu=function(r){return br(r.dom.attributes,function(e,n){return e[n.name]=n.value,e},{})},Jt=function(r,e,n){return n===void 0&&(n=Pf),r.exists(function(t){return n(t,e)})},Wu=function(r){for(var e=[],n=function(o){e.push(o)},t=0;t<r.length;t++)r[t].each(n);return e},Fu=function(r,e,n){return r.isSome()&&e.isSome()?s.some(n(r.getOrDie(),e.getOrDie())):s.none()},nv=function(r,e){return r!=null?e(r):s.none()},tv=function(r){return r.bind(F)},Qt=function(r,e){return r?s.some(e):s.none()},De=function(r){return r.style!==void 0&&ae(r.style.getPropertyValue)},_u=function(r,e,n){if(!vr(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",r),new Error("CSS value must be a string: "+n);De(r)&&r.style.setProperty(e,n)},ov=function(r,e){De(r)&&r.style.removeProperty(e)},Z=function(r,e,n){var t=r.dom;_u(t,e,n)},en=function(r,e){var n=r.dom;cr(e,function(t,o){_u(n,o,t)})},Zr=function(r,e){var n=r.dom,t=window.getComputedStyle(n),o=t.getPropertyValue(e);return o===""&&!Nr(r)?Hu(n,e):o},Hu=function(r,e){return De(r)?r.style.getPropertyValue(e):""},re=function(r,e){var n=r.dom,t=Hu(n,e);return s.from(t).filter(function(o){return o.length>0})},ee=function(r,e){var n=r.dom;ov(n,e),Jt(Qr(r,"style").map(Zf),"")&&_(r,"style")},av=function(r,e){var n=r.dom,t=e.dom;De(n)&&De(t)&&(t.style.cssText=n.style.cssText)},Lr=function(r,e,n){return n===void 0&&(n=0),Qr(r,e).map(function(t){return parseInt(t,10)}).getOr(n)},zn=function(r,e){return Lr(r,e,1)},zu=function(r){return Mr("col")(r)?Lr(r,"span",1)>1:zn(r,"colspan")>1},Gu=function(r){return zn(r,"rowspan")>1},Gn=function(r,e){return parseInt(Zr(r,e),10)},nn=w(10),Zt=w(10),jn=function(r,e){return ro(r,e,I)},ro=function(r,e,n){return J(ar(r),function(t){return wr(t,e)?n(t)?[t]:[]:ro(t,e,n)})},uv=function(r,e,n){if(n===void 0&&(n=ir),n(e))return s.none();if(K(r,N(e)))return s.some(e);var t=function(o){return wr(o,"table")||n(o)};return fe(e,r.join(","),t)},eo=function(r,e){return uv(["td","th"],r,e)},ve=function(r){return jn(r,"th,td")},no=function(r){return wr(r,"colgroup")?_n(r,"col"):J(ju(r),function(e){return _n(e,"col")})},H=function(r,e){return Q(r,"table",e)},to=function(r){return jn(r,"tr")},ju=function(r){return H(r).fold(w([]),function(e){return _n(e,"colgroup")})},Uu=function(r,e){return S(r,function(n){if(N(n)==="colgroup"){var t=S(no(n),function(o){var a=Lr(o,"span",1);return Au(o,1,a)});return Kt(n,t,"colgroup")}else{var t=S(ve(n),function(a){var u=Lr(a,"rowspan",1),i=Lr(a,"colspan",1);return Au(a,u,i)});return Kt(n,t,e(n))}})},iv=function(r){return le(r).map(function(e){var n=N(e);return ks(n)?n:"tbody"}).getOr("tbody")},Vu=function(r){var e=to(r),n=ju(r),t=Ke(Ke([],n,!0),e,!0);return Uu(t,iv)},cv=function(r,e){return Uu(r,function(){return e})},oo=function(r,e,n){var t=r.cells,o=t.slice(0,e),a=t.slice(e),u=o.concat(n).concat(a);return Ku(r,u)},qu=function(r,e,n){return oo(r,e,[n])},tn=function(r,e,n){var t=r.cells;t[e]=n},Ku=function(r,e){return ce(r.element,e,r.section,r.isNew)},lv=function(r,e){var n=r.cells,t=S(n,e);return ce(r.element,t,r.section,r.isNew)},yr=function(r,e){return r.cells[e]},dr=function(r,e){return yr(r,e).element},Cr=function(r){return r.cells.length},rr=function(r){var e=Ka(r,function(n){return n.section==="colgroup"});return{rows:e.fail,cols:e.pass}},Xu=function(r,e,n){var t=S(r.cells,n);return ce(e(r.element),t,r.section,!0)},Un="data-snooker-locked-cols",fv=function(r){return Qr(r,Un).bind(function(e){return s.from(e.match(/\d+/g))}).map(function(e){return zt(e,I)})},me=function(r){var e=br(rr(r).rows,function(t,o){return O(o.cells,function(a,u){a.isLocked&&(t[u]=!0)}),t},{}),n=Ou(e,function(t,o){return parseInt(o,10)});return zf(n)},ao=function(r,e){return r+","+e},sv=function(r,e,n){return s.from(r.access[ao(e,n)])},vv=function(r,e,n){var t=Yu(r,function(o){return n(e,o.element)});return t.length>0?s.some(t[0]):s.none()},Yu=function(r,e){var n=J(r.all,function(t){return t.cells});return U(n,e)},mv=function(r){var e={},n=0;return O(r.cells,function(t){var o=t.colspan;gr(o,function(a){var u=n+a;e[u]=Is(t.element,o,u)}),n+=o}),e},Ju=function(r){var e={},n=[],t=En(r).map(function(p){return p.element}).bind(H),o=t.bind(fv).getOr({}),a=0,u=0,i=0,c=Ka(r,function(p){return p.section==="colgroup"}),l=c.pass,f=c.fail;O(f,function(p){var h=[];O(p.cells,function(C){for(var P=0;e[ao(i,P)]!==void 0;)P++;for(var y=Du(o,P.toString()),R=Bs(C.element,C.rowspan,C.colspan,i,P,y),$=0;$<C.colspan;$++)for(var A=0;A<C.rowspan;A++){var j=i+A,q=P+$,tr=ao(j,q);e[tr]=R,u=Math.max(u,q+1)}h.push(R)}),a++,n.push(Kt(p.element,h,p.section)),i++});var v=Ja(l).map(function(p){var h=mv(p),C=Ms(p.element,ku(h));return{colgroups:[C],columns:h}}).getOrThunk(function(){return{colgroups:[],columns:{}}}),g=v.columns,d=v.colgroups,m=Ds(a,u);return{grid:m,access:e,all:n,columns:g,colgroups:d}},dv=function(r){var e=Vu(r);return Ju(e)},gv=function(r){return J(r.all,function(e){return e.cells})},pv=function(r){return ku(r.columns)},hv=function(r){return Yr(r.columns).length>0},bv=function(r,e){return s.from(r.columns[e])},k={fromTable:dv,generate:Ju,getAt:sv,findItem:vv,filterItems:Yu,justCells:gv,justColumns:pv,hasColumns:hv,getColumnAt:bv},wv=function(r,e){var n=e.column,t=e.column+e.colspan-1,o=e.row,a=e.row+e.rowspan-1;return n<=r.finishCol&&t>=r.startCol&&o<=r.finishRow&&a>=r.startRow},yv=function(r,e){return e.column>=r.startCol&&e.column+e.colspan-1<=r.finishCol&&e.row>=r.startRow&&e.row+e.rowspan-1<=r.finishRow},Cv=function(r,e){for(var n=!0,t=G(yv,e),o=e.startRow;o<=e.finishRow;o++)for(var a=e.startCol;a<=e.finishCol;a++)n=n&&k.getAt(r,o,a).exists(t);return n?s.some(e):s.none()},Sv=function(r,e){return Es(Math.min(r.row,e.row),Math.min(r.column,e.column),Math.max(r.row+r.rowspan-1,e.row+e.rowspan-1),Math.max(r.column+r.colspan-1,e.column+e.colspan-1))},Qu=function(r,e,n){var t=k.findItem(r,e,M),o=k.findItem(r,n,M);return t.bind(function(a){return o.map(function(u){return Sv(a,u)})})},Rv=function(r,e,n){return Qu(r,e,n).bind(function(t){return Cv(r,t)})},Tv=function(r,e,n,t){return k.findItem(r,e,M).bind(function(o){var a=n>0?o.row+o.rowspan-1:o.row,u=t>0?o.column+o.colspan-1:o.column,i=k.getAt(r,a+n,u+t);return i.map(function(c){return c.element})})},Zu=function(r,e,n){return Qu(r,e,n).map(function(t){var o=k.filterItems(r,G(wv,t));return S(o,function(a){return a.element})})},ri=function(r,e){var n=function(t,o){return qt(o,t)};return k.findItem(r,e,n).map(function(t){return t.element})},xv=function(r,e,n){return H(r).bind(function(t){var o=Vn(t);return Tv(o,r,e,n)})},Ov=function(r,e,n){var t=Vn(r);return Zu(t,e,n)},uo=function(r,e,n,t,o){var a=Vn(r),u=M(r,n)?s.some(e):ri(a,e),i=M(r,o)?s.some(t):ri(a,t);return u.bind(function(c){return i.bind(function(l){return Zu(a,c,l)})})},kv=function(r,e,n){var t=Vn(r);return Rv(t,e,n)},Vn=k.fromTable,Ae=function(r,e){var n=le(r);n.each(function(t){t.dom.insertBefore(e.dom,r.dom)})},qn=function(r,e){var n=Wn(r);n.fold(function(){var t=le(r);t.each(function(o){z(o,e)})},function(t){Ae(t,e)})},io=function(r,e){var n=Hs(r);n.fold(function(){z(r,e)},function(t){r.dom.insertBefore(e.dom,t.dom)})},z=function(r,e){r.dom.appendChild(e.dom)},Dv=function(r,e,n){Fn(r,n).fold(function(){z(r,e)},function(t){Ae(t,e)})},Av=function(r,e){Ae(r,e),z(e,r)},$v=function(r,e){O(e,function(n){Ae(r,n)})},Bv=function(r,e){O(e,function(n,t){var o=t===0?r:e[t-1];qn(o,n)})},Wr=function(r,e){O(e,function(n){z(r,n)})},co=function(r){r.dom.textContent="",O(ar(r),function(e){fr(e)})},fr=function(r){var e=r.dom;e.parentNode!==null&&e.parentNode.removeChild(e)},Pv=function(r){var e=ar(r);e.length>0&&$v(r,e),fr(r)},Ev=function(r,e){var n=function(a){if(!r(a))throw new Error("Can only get "+e+" value of a "+e+" node");return t(a).getOr("")},t=function(a){return r(a)?s.from(a.dom.nodeValue):s.none()},o=function(a,u){if(!r(a))throw new Error("Can only set raw "+e+" value of a "+e+" node");a.dom.nodeValue=u};return{get:n,getOption:t,set:o}},lo=Ev(Jr,"text"),Kn=function(r){return lo.get(r)},ei=function(r){return lo.getOption(r)},Iv=function(r,e){return lo.set(r,e)},Mv=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Xn(){var r=function(l){return b.fromDom(l.dom.cloneNode(!1))},e=function(l){return Xt(l).dom},n=function(l){return Ir(l)?N(l)==="body"?!0:K(Mv,N(l)):!1},t=function(l){return Ir(l)?K(["br","img","hr","input"],N(l)):!1},o=function(l){return Ir(l)&&se(l,"contenteditable")==="false"},a=function(l,f){return l.dom.compareDocumentPosition(f.dom)},u=function(l,f){var v=Lu(l);rn(f,v)},i=function(l){var f=N(l);return K(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],f)},c=function(l){return Ir(l)?Qr(l,"lang"):s.none()};return{up:w({selector:fe,closest:Q,predicate:Qe,all:Bu}),down:w({selector:kr,predicate:Mu}),styles:w({get:Zr,getRaw:re,set:Z,remove:ee}),attrs:w({get:se,set:X,remove:_,copyTo:u}),insert:w({before:Ae,after:qn,afterAll:Bv,append:z,appendAll:Wr,prepend:io,wrap:Av}),remove:w({unwrap:Pv,remove:fr}),create:w({nu:b.fromTag,clone:r,text:b.fromText}),query:w({comparePosition:a,prevSibling:Pu,nextSibling:Wn}),property:w({children:ar,name:N,parent:le,document:e,isText:Jr,isComment:Ns,isElement:Ir,isSpecial:i,getLanguage:c,getText:Kn,setText:Iv,isBoundary:n,isEmptyTag:t,isNonEditable:o}),eq:M,is:Cs}}var Nv=function(r,e,n,t){var o=n[0],a=n.slice(1);return t(r,e,o,a)},Lv=function(r,e,n){return n.length>0?Nv(r,e,n,Wv):s.none()},Wv=function(r,e,n,t){var o=e(r,n);return Rr(t,function(a,u){var i=e(r,u);return Fv(r,a,i)},o)},Fv=function(r,e,n){return e.bind(function(t){return n.filter(G(r.eq,t))})},_v=function(r,e){return G(r.eq,e)},Hv=function(r,e,n,t){t===void 0&&(t=ir);var o=[e].concat(r.up().all(e)),a=[n].concat(r.up().all(n)),u=function(f){var v=Pn(f,t);return v.fold(function(){return f},function(g){return f.slice(0,g+1)})},i=u(o),c=u(a),l=pr(i,function(f){return or(c,_v(r,f))});return{firstpath:i,secondpath:c,shared:l}},zv=Lv,Gv=Hv,ni=Xn(),fo=function(r,e){return zv(ni,function(n,t){return r(t)},e)},jv=function(r,e,n){return Gv(ni,r,e,n)},so=function(r){return fe(r,"table")},Yn=function(r,e,n){var t=function(o){return function(a){return n!==void 0&&n(a)||M(a,o)}};return M(r,e)?s.some({boxes:s.some([r]),start:r,finish:e}):so(r).bind(function(o){return so(e).bind(function(a){if(M(o,a))return s.some({boxes:Ov(o,r,e),start:r,finish:e});if(qt(o,a)){var u=Je(e,"td,th",t(o)),i=u.length>0?u[u.length-1]:e;return s.some({boxes:uo(o,r,o,e,a),start:r,finish:i})}else if(qt(a,o)){var u=Je(r,"td,th",t(a)),c=u.length>0?u[u.length-1]:r;return s.some({boxes:uo(a,r,o,e,a),start:r,finish:c})}else return jv(r,e).shared.bind(function(l){return Q(l,"table",n).bind(function(f){var v=Je(e,"td,th",t(f)),g=v.length>0?v[v.length-1]:e,d=Je(r,"td,th",t(f)),m=d.length>0?d[d.length-1]:r;return s.some({boxes:uo(f,r,o,e,a),start:m,finish:g})})})})})},vo=function(r,e){var n=kr(r,e);return n.length>0?s.some(n):s.none()},Uv=function(r,e){return pr(r,function(n){return wr(n,e)})},ti=function(r,e,n){return Ze(r,e).bind(function(t){return Ze(r,n).bind(function(o){return fo(so,[t,o]).map(function(a){return{first:t,last:o,table:a}})})})},Vv=function(r,e){return fe(r,"table").bind(function(n){return Ze(n,e).bind(function(t){return Yn(t,r).bind(function(o){return o.boxes.map(function(a){return{boxes:a,start:o.start,finish:o.finish}})})})})},qv=function(r,e,n,t,o){return Uv(r,o).bind(function(a){return xv(a,e,n).bind(function(u){return Vv(u,t)})})},oi=function(r,e){return vo(r,e)},Kv=function(r,e,n){return ti(r,e,n).bind(function(t){var o=function(c){return M(r,c)},a="thead,tfoot,tbody,table",u=fe(t.first,a,o),i=fe(t.last,a,o);return u.bind(function(c){return i.bind(function(l){return M(c,l)?kv(t.table,t.first,t.last):s.none()})})})},Xv=function(r){if(!$n(r))throw new Error("cases must be an array");if(r.length===0)throw new Error("there must be at least one case");var e=[],n={};return O(r,function(t,o){var a=Yr(t);if(a.length!==1)throw new Error("one and only one name per case");var u=a[0],i=t[u];if(n[u]!==void 0)throw new Error("duplicate key detected:"+u);if(u==="cata")throw new Error("cannot have a case named cata (sorry)");if(!$n(i))throw new Error("case arguments must be an array");e.push(u),n[u]=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];var f=c.length;if(f!==i.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+i.length+" ("+i+"), got "+f);var v=function(g){var d=Yr(g);if(e.length!==d.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+`
Actual: `+d.join(","));var m=hr(e,function(p){return K(d,p)});if(!m)throw new Error("Not all branches were specified when using match. Specified: "+d.join(", ")+`
Required: `+e.join(", "));return g[u].apply(null,c)};return{fold:function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];if(g.length!==r.length)throw new Error("Wrong number of arguments to fold. Expected "+r.length+", got "+g.length);var m=g[o];return m.apply(null,c)},match:v,log:function(g){console.log(g,{constructors:e,constructor:u,params:c})}}}}),n},Fr={generate:Xv},mo=Fr.generate([{none:[]},{multiple:["elements"]},{single:["element"]}]),go=function(r,e,n,t){return r.fold(e,n,t)},Yv=mo.none,Jv=mo.multiple,Qv=mo.single,Zv=function(r,e,n){var t=function(){return oi(r(),n).fold(function(){return e().fold(Yv,Qv)},function(o){return Jv(o)})};return{get:t}},rm=tinymce.util.Tools.resolve("tinymce.PluginManager"),ai=function(r,e){return b.fromDom(r.dom.cloneNode(e))},ui=function(r){return ai(r,!1)},$e=function(r){return ai(r,!0)},ii=function(r,e){var n=b.fromTag(e),t=Lu(r);return rn(n,t),n},em=function(r,e){var n=ii(r,e),t=ar($e(r));return Wr(n,t),n},nm=function(r,e){var n=ii(r,e);Ae(r,n);var t=ar(r);return Wr(n,t),fr(r),n},ci=function(r,e){var n=function(i,c){if(!Wt(c)&&!c.match(/^[0-9]+$/))throw new Error(r+".set accepts only positive integer values. Value was "+c);var l=i.dom;De(l)&&(l.style[r]=c+"px")},t=function(i){var c=e(i);if(c<=0||c===null){var l=Zr(i,r);return parseFloat(l)||0}return c},o=t,a=function(i,c){return br(c,function(l,f){var v=Zr(i,f),g=v===void 0?0:parseInt(v,10);return isNaN(g)?l:l+g},0)},u=function(i,c,l){var f=a(i,l),v=c>f?c-f:0;return v};return{set:n,get:t,getOuter:o,aggregate:a,max:u}},li=function(){var r=Oe().browser;return r.isIE()||r.isEdge()},tm=function(r,e){return es(r).getOr(e)},Be=function(r,e,n){return tm(Zr(r,e),n)},fi=function(r){return Zr(r,"box-sizing")},si=function(r,e,n,t){var o=Be(r,"padding-"+n,0),a=Be(r,"padding-"+t,0),u=Be(r,"border-"+n+"-width",0),i=Be(r,"border-"+t+"-width",0);return e-o-a-u-i},om=function(r,e){var n=r.dom,t=n.getBoundingClientRect().height||n.offsetHeight;return e==="border-box"?t:si(r,t,"top","bottom")},vi=function(r,e){var n=r.dom,t=n.getBoundingClientRect().width||n.offsetWidth;return e==="border-box"?t:si(r,t,"left","right")},am=function(r){return li()?om(r,fi(r)):Be(r,"height",r.dom.offsetHeight)},um=function(r){return li()?vi(r,fi(r)):Be(r,"width",r.dom.offsetWidth)},im=function(r){return vi(r,"content-box")},mi=ci("width",function(r){return r.dom.offsetWidth}),_r=function(r){return mi.get(r)},po=function(r){return mi.getOuter(r)},ho=im,cm=um,bo=function(r,e){e===void 0&&(e=I);var n=r.grid,t=gr(n.columns,F),o=gr(n.rows,F);return S(t,function(a){var u=function(){return J(o,function(l){return k.getAt(r,l,a).filter(function(f){return f.column===a}).toArray()})},i=function(l){return l.colspan===1&&e(l.element)},c=function(){return k.getAt(r,0,a)};return di(u,i,c)})},di=function(r,e,n){var t=r(),o=pr(t,e),a=o.orThunk(function(){return s.from(t[0]).orThunk(n)});return a.map(function(u){return u.element})},gi=function(r){var e=r.grid,n=gr(e.rows,F),t=gr(e.columns,F);return S(n,function(o){var a=function(){return J(t,function(c){return k.getAt(r,o,c).filter(function(l){return l.row===o}).fold(w([]),function(l){return[l]})})},u=function(c){return c.rowspan===1},i=function(){return k.getAt(r,o,0)};return di(a,u,i)})},lm=function(r,e){if(e<0||e>=r.length-1)return s.none();var n=r[e].fold(function(){var o=_f(r.slice(0,e));return Or(o,function(a,u){return a.map(function(i){return{value:i,delta:u+1}})})},function(o){return s.some({value:o,delta:0})}),t=r[e+1].fold(function(){var o=r.slice(e+1);return Or(o,function(a,u){return a.map(function(i){return{value:i,delta:u+1}})})},function(o){return s.some({value:o,delta:1})});return n.bind(function(o){return t.map(function(a){var u=a.delta+o.delta;return Math.abs(a.value-o.value)/u})})},pi=function(r,e){return function(n){return fm(n)==="rtl"?e:r}},fm=function(r){return Zr(r,"direction")==="rtl"?"rtl":"ltr"},hi=ci("height",function(r){var e=r.dom;return Nr(r)?e.getBoundingClientRect().height:e.offsetHeight}),wo=function(r){return hi.get(r)},bi=function(r){return hi.getOuter(r)},sm=am,wi=function(r,e){var n=function(t,o){return wi(r+t,e+o)};return{left:r,top:e,translate:n}},Hr=wi,vm=function(r){var e=r.getBoundingClientRect();return Hr(e.left,e.top)},Jn=function(r,e){return r!==void 0?r:e!==void 0?e:0},on=function(r){var e=r.dom.ownerDocument,n=e.body,t=e.defaultView,o=e.documentElement;if(n===r.dom)return Hr(n.offsetLeft,n.offsetTop);var a=Jn(t==null?void 0:t.pageYOffset,o.scrollTop),u=Jn(t==null?void 0:t.pageXOffset,o.scrollLeft),i=Jn(o.clientTop,n.clientTop),c=Jn(o.clientLeft,n.clientLeft);return mm(r).translate(u-c,a-i)},mm=function(r){var e=r.dom,n=e.ownerDocument,t=n.body;return t===e?Hr(t.offsetLeft,t.offsetTop):Nr(r)?vm(e):Hr(0,0)},yi=function(r,e){return{row:r,y:e}},Ci=function(r,e){return{col:r,x:e}},Si=function(r){var e=on(r);return e.left+po(r)},Ri=function(r){return on(r).left},Ti=function(r,e){return Ci(r,Ri(e))},xi=function(r,e){return Ci(r,Si(e))},yo=function(r){return on(r).top},dm=function(r,e){return yi(r,yo(e))},gm=function(r,e){return yi(r,yo(e)+bi(e))},Co=function(r,e,n){if(n.length===0)return[];var t=S(n.slice(1),function(a,u){return a.map(function(i){return r(u,i)})}),o=n[n.length-1].map(function(a){return e(n.length-1,a)});return t.concat([o])},pm=function(r){return-r},So={delta:F,positions:function(r){return Co(dm,gm,r)},edge:yo},hm={delta:F,edge:Ri,positions:function(r){return Co(Ti,xi,r)}},bm={delta:pm,edge:Si,positions:function(r){return Co(xi,Ti,r)}},Ro=pi(hm,bm),Qn={delta:function(r,e){return Ro(e).delta(r,e)},positions:function(r,e){return Ro(e).positions(r,e)},edge:function(r){return Ro(r).edge(r)}},wm={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},ym=function(){var r="[0-9]+",e="[+-]?"+r,n="[eE]"+e,t="\\.",o=function(i){return"(?:"+i+")?"},a=["Infinity",r+t+o(r)+o(n),t+r+o(n),r+o(n)].join("|"),u="[+-]?(?:"+a+")";return new RegExp("^("+u+")(.*)$")}(),Cm=function(r,e){return or(e,function(n){return or(wm[n],function(t){return r===t})})},Sm=function(r,e){var n=s.from(ym.exec(r));return n.bind(function(t){var o=Number(t[1]),a=t[2];return Cm(a,e)?s.some({value:o,unit:a}):s.none()})},Oi=/(\d+(\.\d+)?)%/,Rm=/(\d+(\.\d+)?)px|em/,Tm=Mr("col"),ki=function(r,e,n){var t=_s(r).getOrThunk(function(){return Iu(Ln(r))});return e(r)/n(t)*100},Di=function(r,e){Z(r,"width",e+"px")},Ai=function(r,e){Z(r,"width",e+"%")},Zn=function(r,e){Z(r,"height",e+"px")},xm=function(r){return sm(r)+"px"},Om=function(r,e,n,t){var o=H(r).map(function(a){var u=n(a);return Math.floor(e/100*u)}).getOr(e);return t(r,o),o},km=function(r,e,n,t){var o=parseFloat(r);return Mn(r,"%")&&N(e)!=="table"?Om(e,o,n,t):o},Dm=function(r){var e=xm(r);return e?km(e,r,wo,Zn):wo(r)},Am=function(r,e,n){var t=n(r),o=zn(r,e);return t/o},$i=function(r,e){return re(r,e).orThunk(function(){return Qr(r,e).map(function(n){return n+"px"})})},Pe=function(r){return $i(r,"width")},$m=function(r){return $i(r,"height")},Bm=function(r){return ki(r,_r,ho)},Bi=function(r){return Tm(r)?_r(r):cm(r)},Pi=function(r){return Am(r,"rowspan",Dm)},Pm=function(r){var e=Pe(r);return e.bind(function(n){return Sm(n,["fixed","relative","empty"])})},Ei=function(r,e,n){Z(r,"width",e+n)},Em=function(r){return _r(r)+"px"},Ii=function(r){return ki(r,_r,ho)+"%"},Im=function(r){return Pe(r).exists(function(e){return Oi.test(e)})},Mm=function(r){return Pe(r).exists(function(e){return Rm.test(e)})},Nm=function(r){return Pe(r).isNone()},Lm=w(Oi),Wm=Mr("col"),Fm=function(r){return Pe(r).getOrThunk(function(){return Bi(r)+"px"})},_m=function(r){return $m(r).getOrThunk(function(){return Pi(r)+"px"})},Hm=function(r){return S(k.justColumns(r),function(e){return s.from(e.element)})},zm=function(r){var e=Oe().browser,n=e.isChrome()||e.isFirefox();return Wm(r)?n:!0},To=function(r,e,n,t,o,a){return r.filter(t).fold(function(){return a(lm(n,e))},function(u){return o(u)})},xo=function(r,e,n,t){var o=bo(r),a=k.hasColumns(r)?Hm(r):o,u=[s.some(Qn.edge(e))].concat(S(Qn.positions(o,e),function(c){return c.map(function(l){return l.x})})),i=Ft(zu);return S(a,function(c,l){return To(c,l,u,i,function(f){if(zm(f))return n(f);var v=nv(o[l],F);return To(v,l,u,i,function(g){return t(s.some(_r(g)))},t)},t)})},Mi=function(r){return r.map(function(e){return e+"px"}).getOr("")},Gm=function(r,e){return xo(r,e,Fm,Mi)},jm=function(r,e,n){return xo(r,e,Bm,function(t){return t.fold(function(){return n.minCellWidth()},function(o){return o/n.pixelWidth()*100})})},Oo=function(r,e,n){return xo(r,e,Bi,function(t){return t.getOrThunk(n.minCellWidth)})},Ni=function(r,e,n,t,o){var a=gi(r),u=[s.some(n.edge(e))].concat(S(n.positions(a,e),function(i){return i.map(function(c){return c.y})}));return S(a,function(i,c){return To(i,c,u,Ft(Gu),t,o)})},Um=function(r,e,n){return Ni(r,e,n,Pi,function(t){return t.getOrThunk(Zt)})},Vm=function(r,e,n){return Ni(r,e,n,_m,Mi)},rt=function(r,e){return function(){return Nr(r)?e(r):parseFloat(re(r,"width").getOr("0"))}},Li=function(r){var e=rt(r,_r),n=w(0),t=function(o,a){return Oo(o,r,a)};return{width:e,pixelWidth:e,getWidths:t,getCellDelta:n,singleColumnWidth:w([0]),minCellWidth:n,setElementWidth:T,adjustTableWidth:T,isRelative:!0,label:"none"}},Wi=function(r){var e=rt(r,function(c){return parseFloat(Ii(c))}),n=rt(r,_r),t=function(c){return c/n()*100},o=function(c,l){return[100-c]},a=function(){return nn()/n()*100},u=function(c){var l=e(),f=c/100*l,v=l+f;Ai(r,v)},i=function(c,l){return jm(c,r,l)};return{width:e,pixelWidth:n,getWidths:i,getCellDelta:t,singleColumnWidth:o,minCellWidth:a,setElementWidth:Ai,adjustTableWidth:u,isRelative:!0,label:"percent"}},Fi=function(r){var e=rt(r,_r),n=F,t=function(u,i){var c=Math.max(nn(),u+i);return[c-u]},o=function(u){var i=e()+u;Di(r,i)},a=function(u,i){return Oo(u,r,i)};return{width:e,pixelWidth:e,getWidths:a,getCellDelta:n,singleColumnWidth:t,minCellWidth:nn,setElementWidth:Di,adjustTableWidth:o,isRelative:!1,label:"pixel"}},qm=function(r,e){var n=Lm().exec(e);return n!==null?Wi(r):Fi(r)},Km=function(r){var e=Pe(r);return e.fold(function(){return Li(r)},function(n){return qm(r,n)})},Ee={getTableSize:Km,pixelSize:Fi,percentageSize:Wi,noneSize:Li},Xm=function(r,e,n,t,o,a){return{minRow:r,minCol:e,maxRow:n,maxCol:t,allCells:o,selectedCells:a}},Ym=function(r,e){var n=r.grid.columns,t=r.grid.rows,o=t,a=n,u=0,i=0,c=[],l=[];return cr(r.access,function(f){if(c.push(f),e(f)){l.push(f);var v=f.row,g=v+f.rowspan-1,d=f.column,m=d+f.colspan-1;v<o?o=v:g>u&&(u=g),d<a?a=d:m>i&&(i=m)}}),Xm(o,a,u,i,c,l)},Jm=function(r,e,n){var t=r[n].element,o=b.fromTag("td");z(o,b.fromTag("br"));var a=e?z:io;a(t,o)},Qm=function(r,e,n,t){for(var o=e.grid.columns,a=e.grid.rows,u=0;u<a;u++)for(var i=!1,c=0;c<o;c++)if(!(u<n.minRow||u>n.maxRow||c<n.minCol||c>n.maxCol)){var l=k.getAt(e,u,c).filter(t).isNone();l?Jm(r,i,u):i=!0}},Zm=function(r,e,n,t){cr(n.columns,function(u){(u.column<e.minCol||u.column>e.maxCol)&&fr(u.element)});var o=U(jn(r,"tr"),function(u){return u.dom.childElementCount===0});O(o,fr),(e.minCol===e.maxCol||e.minRow===e.maxRow)&&O(jn(r,"th,td"),function(u){_(u,"rowspan"),_(u,"colspan")}),_(r,Un),_(r,"data-snooker-col-series");var a=Ee.getTableSize(r);a.adjustTableWidth(t)},rd=function(r,e,n,t){if(t.minCol===0&&e.grid.columns===t.maxCol+1)return 0;var o=Oo(e,r,n),a=br(o,function(l,f){return l+f},0),u=br(o.slice(t.minCol,t.maxCol+1),function(l,f){return l+f},0),i=u/a*n.pixelWidth(),c=i-n.pixelWidth();return n.getCellDelta(c)},ed=function(r,e){var n=function(g){return wr(g.element,e)},t=$e(r),o=Vu(t),a=Ee.getTableSize(r),u=k.generate(o),i=Ym(u,n),c="th:not("+e+"),td:not("+e+")",l=ro(t,"th,td",function(g){return wr(g,c)});O(l,fr),Qm(o,u,i,n);var f=k.fromTable(r),v=rd(r,f,a,i);return Zm(t,i,u,v),t},nd=" ",ne=function(r){return N(r)==="img"?1:ei(r).fold(function(){return ar(r).length},function(e){return e.length})},td=function(r){return ei(r).filter(function(e){return e.trim().length!==0||e.indexOf(nd)>-1}).isSome()},od=["img","br"],_i=function(r){var e=td(r);return e||K(od,N(r))},et=function(r){return rv(r,_i)},ko=function(r){return ad(r,_i)},ad=function(r,e){var n=function(t){for(var o=ar(t),a=o.length-1;a>=0;a--){var u=o[a];if(e(u))return s.some(u);var i=n(u);if(i.isSome())return i}return s.none()};return n(r)},ud={scope:["row","col"]},Do=function(r){return function(){var e=b.fromTag("td",r.dom);return z(e,b.fromTag("br",r.dom)),e}},Ao=function(r){return function(){return b.fromTag("col",r.dom)}},Hi=function(r){return function(){return b.fromTag("colgroup",r.dom)}},zi=function(r){return function(){return b.fromTag("tr",r.dom)}},id=function(r,e,n){var t=em(r,e);return cr(n,function(o,a){o===null?_(t,a):X(t,a,o)}),t},cd=function(r){return r},ld=function(r,e,n){var t=et(r);return t.map(function(o){var a=n.join(","),u=Je(o,a,function(i){return M(i,r)});return Rr(u,function(i,c){var l=ui(c);return _(l,"contenteditable"),z(i,l),l},e)}).getOr(e)},fd=function(r,e){cr(ud,function(n,t){return Qr(r,t).filter(function(o){return K(n,o)}).each(function(o){return X(e,t,o)})})},$o=function(r,e,n){var t=function(u,i){av(u.element,i),ee(i,"height"),u.colspan!==1&&ee(i,"width")},o=function(u){var i=b.fromTag(N(u.element),e.dom),c=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),l=c.length>0?ld(u.element,i,c):i;return z(l,b.fromTag("br")),t(u,i),fd(u.element,i),r(u.element,i),i},a=function(u){var i=b.fromTag(N(u.element),e.dom);return t(u,i),r(u.element,i),i};return{col:a,colgroup:Hi(e),row:zi(e),cell:o,replace:id,colGap:Ao(e),gap:Do(e)}},Gi=function(r){return{col:Ao(r),colgroup:Hi(r),row:zi(r),cell:Do(r),replace:cd,colGap:Ao(r),gap:Do(r)}},sd=function(r,e){var n=e||document,t=n.createElement("div");return t.innerHTML=r,ar(b.fromDom(t))},Bo=function(r){return S(r,b.fromDom)},vd=function(r){return r.nodeName.toLowerCase()},de=function(r){return b.fromDom(r.getBody())},ji=function(r){return r.getBoundingClientRect().width},Ui=function(r){return r.getBoundingClientRect().height},zr=function(r){return function(e){return M(e,de(r))}},md=function(r){return r?r.replace(/px$/,""):""},Dr=function(r){return/^\d+(\.\d+)?$/.test(r)?r+"px":r},ge=function(r){_(r,"data-mce-style");var e=function(n){return _(n,"data-mce-style")};O(ve(r),e),O(no(r),e),O(to(r),e)},dd=function(r,e){var n=r.dom.getStyle(e,"width")||r.dom.getAttrib(e,"width");return s.from(n).filter(jt)},gd=function(r){return/^(\d+(\.\d+)?)%$/.test(r)},pd=function(r){return/^(\d+(\.\d+)?)px$/.test(r)},Ie=function(r){return b.fromDom(r.selection.getStart())},hd=function(r){return b.fromDom(r.selection.getEnd())},nt=function(r){return go(r.get(),w([]),F,Hf)},bd=function(r){var e=function(o,a){return Qr(o,a).exists(function(u){return parseInt(u,10)>1})},n=function(o){return e(o,"rowspan")||e(o,"colspan")},t=nt(r);return t.length>0&&hr(t,n)?s.some(t):s.none()},wd=function(r,e,n){return go(e.get(),s.none,function(t){return t.length<=1?s.none():Kv(r,n.firstSelectedSelector,n.lastSelectedSelector).map(function(o){return{bounds:o,cells:t}})},s.none)},tt="data-mce-selected",yd="td["+tt+"],th["+tt+"]",Cd="["+tt+"]",Po="data-mce-first-selected",Sd="td["+Po+"],th["+Po+"]",Eo="data-mce-last-selected",Rd="td["+Eo+"],th["+Eo+"]",Td=Cd,pe={selected:tt,selectedSelector:yd,firstSelected:Po,firstSelectedSelector:Sd,lastSelected:Eo,lastSelectedSelector:Rd},xd=function(r){return{element:r,mergable:s.none(),unmergable:s.none(),selection:[r]}},an=function(r,e,n){return{element:n,mergable:wd(e,r,pe),unmergable:bd(r),selection:nt(r)}},Od=function(r,e,n){return{element:r,clipboard:e,generators:n}},kd=function(r,e,n,t){return{selection:nt(r),clipboard:n,generators:t}},Dd=function(r){return H(r).bind(function(e){return oi(e,pe.firstSelectedSelector)}).fold(w(r),function(e){return e[0]})},Vi=function(r){return function(e,n){var t=N(e),o=t==="col"||t==="colgroup"?Dd(e):e;return Q(o,r,n)}},Io=Vi("th,td,caption"),ot=Vi("th,td"),un=function(r){return nt(r)},Ad=function(r,e){var n=ot(r),t=n.bind(function(o){return H(o)}).map(function(o){return to(o)});return Fu(n,t,function(o,a){return U(a,function(u){return or(Bo(u.dom.cells),function(i){return se(i,e)==="1"||M(i,o)})})}).getOr([])},$d=function(r){return H(r[0]).map(function(e){var n=ed(e,Td);return ge(n),[n]})},Bd=function(r,e){return S(e,function(n){return r.selection.serializer.serialize(n.dom,{})}).join("")},Pd=function(r){return S(r,function(e){return e.dom.innerText}).join("")},Ed=function(r,e,n){r.on("BeforeGetContent",function(t){var o=function(a){t.preventDefault(),$d(a).each(function(u){t.content=t.format==="text"?Pd(u):Bd(r,u)})};t.selection===!0&&go(e.get(),T,o,T)}),r.on("BeforeSetContent",function(t){if(t.selection===!0&&t.paste===!0){var o=un(e);En(o).each(function(a){H(a).each(function(u){var i=U(sd(t.content),function(g){return N(g)!=="meta"}),c=Mr("table");if(i.length===1&&c(i[0])){t.preventDefault();var l=b.fromDom(r.getDoc()),f=Gi(l),v=Od(a,i[0],f);n.pasteCells(u,v).each(function(){r.focus()})}})})}})},Id=Fr.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Me=D({},Id),Md=function(r,e){return r.length===0?Me.none():r.length===1?Me.only(0):e===0?Me.left(0,1):e===r.length-1?Me.right(e-1,e):e>0&&e<r.length-1?Me.middle(e-1,e,e+1):Me.none()},Nd=function(r,e,n,t,o){var a=r.slice(0),u=Md(r,e),i=w(S(a,w(0))),c=function(g){return t.singleColumnWidth(a[g],n)},l=function(g,d){return o.calcLeftEdgeDeltas(a,g,d,n,t.minCellWidth(),t.isRelative)},f=function(g,d,m){return o.calcMiddleDeltas(a,g,d,m,n,t.minCellWidth(),t.isRelative)},v=function(g,d){return o.calcRightEdgeDeltas(a,g,d,n,t.minCellWidth(),t.isRelative)};return u.fold(i,c,l,f,v)},qi=function(r,e,n){for(var t=0,o=r;o<e;o++)t+=n[o]!==void 0?n[o]:0;return t},Ld=function(r,e){var n=k.justCells(r);return S(n,function(t){var o=qi(t.column,t.column+t.colspan,e);return{element:t.element,width:o,colspan:t.colspan}})},Wd=function(r,e){var n=k.justColumns(r);return S(n,function(t,o){return{element:t.element,width:e[o],colspan:t.colspan}})},Fd=function(r,e){var n=k.justCells(r);return S(n,function(t){var o=qi(t.row,t.row+t.rowspan,e);return{element:t.element,height:o,rowspan:t.rowspan}})},_d=function(r,e){return S(r.all,function(n,t){return{element:n.element,height:e[t]}})},Hd=function(r){return Rr(r,function(e,n){return e+n},0)},zd=function(r,e){return k.hasColumns(r)?Wd(r,e):Ld(r,e)},Mo=function(r,e,n){var t=zd(r,e);O(t,function(o){n.setElementWidth(o.element,o.width)})},Ki=function(r,e,n,t,o){var a=k.fromTable(r),u=o.getCellDelta(e),i=o.getWidths(a,o),c=n===a.grid.columns-1,l=t.clampTableDelta(i,n,u,o.minCellWidth(),c),f=Nd(i,n,l,o,t),v=S(f,function(g,d){return g+i[d]});Mo(a,v,o),t.resizeTable(o.adjustTableWidth,l,c)},Gd=function(r,e,n,t){var o=k.fromTable(r),a=Um(o,r,t),u=S(a,function(f,v){return n===v?Math.max(e+f,Zt()):f}),i=Fd(o,u),c=_d(o,u);O(c,function(f){Zn(f.element,f.height)}),O(i,function(f){Zn(f.element,f.height)});var l=Hd(u);Zn(r,l)},jd=function(r,e,n,t,o){var a=k.generate(e),u=t.getWidths(a,t),i=t.pixelWidth(),c=o.calcRedestributedWidths(u,i,n.pixelDelta,t.isRelative),l=c.newSizes,f=c.delta;Mo(a,l,t),t.adjustTableWidth(f)},Ud=function(r,e,n,t){var o=k.generate(e),a=t.getWidths(o,t);Mo(o,a,t)},at=function(r){return S(r,w(0))},Xi=function(r,e,n,t,o){return o(r.slice(0,e)).concat(t).concat(o(r.slice(n)))},Yi=function(r){return function(e,n,t,o){if(r(t)){var a=Math.max(o,e[n]-Math.abs(t)),u=Math.abs(a-e[n]);return t>=0?u:-u}else return t}},ut=Yi(function(r){return r<0}),Vd=Yi(I),Ji=function(){var r=function(i,c,l,f,v){var g=ut(i,c,f,v);return Xi(i,c,l+1,[g,0],at)},e=function(i,c,l,f){var v=(100+l)/100,g=Math.max(f,(i[c]+l)/v);return S(i,function(d,m){var p=m===c?g:d/v;return p-d})},n=function(i,c,l,f,v,g){return g?e(i,c,f,v):r(i,c,l,f,v)},t=function(i,c,l,f,v,g,d){return n(i,l,f,v,g,d)},o=function(i,c){return i(c)},a=function(i,c,l,f,v,g){if(g)return e(i,l,f,v);var d=ut(i,l,f,v);return at(i.slice(0,l)).concat([d])},u=function(i,c,l,f){if(f){var v=c+l,g=v/c,d=S(i,function(m){return m/g});return{delta:g*100-100,newSizes:d}}else return{delta:l,newSizes:i}};return{resizeTable:o,clampTableDelta:ut,calcLeftEdgeDeltas:n,calcMiddleDeltas:t,calcRightEdgeDeltas:a,calcRedestributedWidths:u}},No=function(){var r=function(u,i,c,l,f){var v=l>=0?c:i,g=Vd(u,v,l,f);return Xi(u,i,c+1,[g,-g],at)},e=function(u,i,c,l,f,v){return r(u,c,l,f,v)},n=function(u,i,c){c&&u(i)},t=function(u,i,c,l,f,v){if(v)return at(u);var g=l/u.length;return S(u,w(g))},o=function(u,i,c,l,f){if(f){if(c>=0)return c;var v=br(u,function(g,d){return g+d-l},0);return Math.max(-v,c)}else return ut(u,i,c,l)},a=function(u,i,c,l){return{delta:0,newSizes:u}};return{resizeTable:n,clampTableDelta:o,calcLeftEdgeDeltas:r,calcMiddleDeltas:e,calcRightEdgeDeltas:t,calcRedestributedWidths:a}},qd=function(r,e){var n=s.from(r.dom.documentElement).map(b.fromDom).getOr(r);return{parent:w(n),view:w(r),origin:w(Hr(0,0)),isResizable:e}},Kd=function(r,e,n){var t=function(){return on(e)};return{parent:w(e),view:w(r),origin:t,isResizable:n}},Xd=function(r,e,n){return{parent:w(e),view:w(r),origin:w(Hr(0,0)),isResizable:n}},Lo={only:qd,detached:Kd,body:Xd},cn=Fr.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Qi=function(r,e,n){var t=n.substring(0,n.length-r.length),o=parseFloat(t);return t===o.toString()?e(o):cn.invalid(n)},Yd=function(r){return Mn(r,"%")?Qi("%",cn.percent,r):Mn(r,"px")?Qi("px",cn.pixels,r):cn.invalid(r)},he=D(D({},cn),{from:Yd}),Jd=function(r,e){return S(r,function(n){var t=he.from(n);return t.fold(function(){return n},function(o){var a=o/e*100;return a+"%"},function(o){return o+"%"})})},Qd=function(r,e,n){var t=n/e;return S(r,function(o){var a=he.from(o);return a.fold(function(){return o},function(u){return u*t+"px"},function(u){return u/100*n+"px"})})},Zd=function(r,e){var n=r.fold(function(){return w("")},function(t){var o=t/e;return w(o+"px")},function(){var t=100/e;return w(t+"%")});return gr(e,n)},rg=function(r,e,n){return r.fold(function(){return e},function(t){return Qd(e,n,t)},function(t){return Jd(e,n)})},Zi=function(r,e,n){var t=he.from(n),o=hr(r,function(a){return a==="0px"})?Zd(t,r.length):rg(t,r,e);return tg(o)},Wo=function(r,e){return r.length===0?e:Rr(r,function(n,t){return he.from(t).fold(w(0),F,F)+n},0)},eg=function(r,e){var n=Math.floor(r);return{value:n+e,remainder:r-n}},ng=function(r,e){return he.from(r).fold(w(r),function(n){return n+e+"px"},function(n){return n+e+"%"})},tg=function(r){if(r.length===0)return r;var e=Rr(r,function(t,o){var a=he.from(o).fold(function(){return{value:o,remainder:0}},function(u){return eg(u,"px")},function(u){return{value:u+"%",remainder:0}});return{output:[a.value].concat(t.output),remainder:t.remainder+a.remainder}},{output:[],remainder:0}),n=e.output;return n.slice(0,n.length-1).concat([ng(n[n.length-1],Math.round(e.remainder))])},og=he.from,ag=function(r,e,n){O(e,function(t){var o=r.slice(t.column,t.colspan+t.column),a=Wo(o,nn());Z(t.element,"width",a+n)})},ug=function(r,e,n){O(e,function(t,o){var a=Wo([r[o]],nn());Z(t.element,"width",a+n)})},ig=function(r,e,n,t){O(n,function(o){var a=r.slice(o.row,o.rowspan+o.row),u=Wo(a,Zt());Z(o.element,"height",u+t)}),O(e,function(o,a){Z(o.element,"height",r[a])})},rc=function(r){return og(r).fold(w("px"),w("px"),w("%"))},ec=function(r,e,n){var t=k.fromTable(r),o=t.all,a=k.justCells(t),u=k.justColumns(t);e.each(function(i){var c=rc(i),l=_r(r),f=Gm(t,r),v=Zi(f,l,i);k.hasColumns(t)?ug(v,u,c):ag(v,a,c),Z(r,"width",i)}),n.each(function(i){var c=rc(i),l=wo(r),f=Vm(t,r,So),v=Zi(f,l,i);ig(v,o,a,c),Z(r,"height",i)})},nc=Im,tc=Mm,oc=Nm,Fo=function(r){var e=k.fromTable(r);return e.grid},Sr=function(r){var e=[],n=function(a){if(a===void 0)throw new Error("Event bind error: undefined handler");e.push(a)},t=function(a){e=U(e,function(u){return u!==a})},o=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];var i={};O(r,function(c,l){i[c]=a[l]}),O(e,function(c){c(i)})};return{bind:n,unbind:t,trigger:o}},be=function(r){var e=xu(r,function(t){return{bind:t.bind,unbind:t.unbind}}),n=xu(r,function(t){return t.trigger});return{registry:e,trigger:n}},cg=function(r,e){var n=null,t=function(){Of(n)||(clearTimeout(n),n=null)},o=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];t(),n=setTimeout(function(){n=null,r.apply(null,a)},e)};return{cancel:t,throttle:o}},ln=function(r){return r.slice(0).sort()},lg=function(r,e){throw new Error("All required keys ("+ln(r).join(", ")+") were not specified. Specified keys were: "+ln(e).join(", ")+".")},fg=function(r){throw new Error("Unsupported keys for object: "+ln(r).join(", "))},sg=function(r,e){if(!$n(e))throw new Error("The "+r+" fields must be an array. Was: "+e+".");O(e,function(n){if(!vr(n))throw new Error("The value "+n+" in the "+r+" fields was not a string.")})},vg=function(r,e){throw new Error("All values need to be of type: "+e+". Keys ("+ln(r).join(", ")+") were not.")},mg=function(r){var e=ln(r),n=pr(e,function(t,o){return o<e.length-1&&t===e[o+1]});n.each(function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+e.join(", ")+"].")})},dg=function(r,e){return gg(r,e,{validate:ae,label:"function"})},gg=function(r,e,n){if(e.length===0)throw new Error("You must specify at least one required field.");return sg("required",e),mg(e),function(t){var o=Yr(t),a=hr(e,function(i){return K(o,i)});a||lg(e,o),r(e,o);var u=U(e,function(i){return!n.validate(t[i],i)});return u.length>0&&vg(u,n.label),t}},pg=function(r,e){var n=U(e,function(t){return!K(r,t)});n.length>0&&fg(n)},_o=function(r){return dg(pg,r)},hg=_o(["compare","extract","mutate","sink"]),bg=_o(["element","start","stop","destroy"]),wg=_o(["forceDrop","drop","move","delayDrop"]),yg=function(){var r=s.none(),e=function(){r=s.none()},n=function(a,u){var i=r.map(function(c){return a.compare(c,u)});return r=s.some(u),i},t=function(a,u){var i=u.extract(a);i.each(function(c){var l=n(u,c);l.each(function(f){o.trigger.move(f)})})},o=be({move:Sr(["info"])});return{onEvent:t,reset:e,events:o.registry}},Cg=function(){var r=be({move:Sr(["info"])});return{onEvent:T,reset:T,events:r.registry}},Sg=function(){var r=Cg(),e=yg(),n=r,t=function(){n.reset(),n=e},o=function(){n.reset(),n=r},a=function(i,c){n.onEvent(i,c)},u=function(){return n===e};return{on:t,off:o,isOn:u,onEvent:a,events:e.events}},Rg=function(r,e,n){var t=!1,o=be({start:Sr([]),stop:Sr([])}),a=Sg(),u=function(){d.stop(),a.isOn()&&(a.off(),o.trigger.stop())},i=cg(u,200),c=function(p){d.start(p),a.on(),o.trigger.start()},l=function(p){i.cancel(),a.onEvent(p,e)};a.events.move.bind(function(p){e.mutate(r,p.info)});var f=function(){t=!0},v=function(){t=!1},g=function(p){return function(){for(var h=[],C=0;C<arguments.length;C++)h[C]=arguments[C];t&&p.apply(null,h)}},d=e.sink(wg({forceDrop:u,drop:g(u),move:g(l),delayDrop:g(i.throttle)}),n),m=function(){d.destroy()};return{element:d.element,go:c,on:f,off:v,destroy:m,events:o.registry}},Tg=function(r,e,n,t,o,a,u){return{target:r,x:e,y:n,stop:t,prevent:o,kill:a,raw:u}},ac=function(r){var e=b.fromDom(qs(r).getOr(r.target)),n=function(){return r.stopPropagation()},t=function(){return r.preventDefault()},o=$f(t,n);return Tg(e,r.clientX,r.clientY,n,t,o,r)},xg=function(r,e){return function(n){r(n)&&e(ac(n))}},Og=function(r,e,n,t,o){var a=xg(n,t);return r.dom.addEventListener(e,a,o),{unbind:G(Dg,r,e,a,o)}},kg=function(r,e,n,t){return Og(r,e,n,t,!1)},Dg=function(r,e,n,t){r.dom.removeEventListener(e,n,t)},Ag=I,Ne=function(r,e,n){return kg(r,e,Ag,n)},fn=ac,Ho=function(r,e){var n=se(r,e);return n===void 0||n===""?[]:n.split(" ")},$g=function(r,e,n){var t=Ho(r,e),o=t.concat([n]);return X(r,e,o.join(" ")),!0},Bg=function(r,e,n){var t=U(Ho(r,e),function(o){return o!==n});return t.length>0?X(r,e,t.join(" ")):_(r,e),!1},it=function(r){return r.dom.classList!==void 0},Pg=function(r){return Ho(r,"class")},Eg=function(r,e){return $g(r,"class",e)},Ig=function(r,e){return Bg(r,"class",e)},Gr=function(r,e){it(r)?r.dom.classList.add(e):Eg(r,e)},Mg=function(r){var e=it(r)?r.dom.classList:Pg(r);e.length===0&&_(r,"class")},Ng=function(r,e){if(it(r)){var n=r.dom.classList;n.remove(e)}else Ig(r,e);Mg(r)},zo=function(r,e){return it(r)&&r.dom.classList.contains(e)},uc=function(r){var e=r.replace(/\./g,"-"),n=function(t){return e+"-"+t};return{resolve:n}},Lg=uc("ephox-dragster"),ic=Lg.resolve,Wg=function(r){var e=D({layerClass:ic("blocker")},r),n=b.fromTag("div");X(n,"role","presentation"),en(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Gr(n,ic("blocker")),Gr(n,e.layerClass);var t=w(n),o=function(){fr(n)};return{element:t,destroy:o}},Fg=function(r,e){return Hr(e.left-r.left,e.top-r.top)},_g=function(r){return s.some(Hr(r.x,r.y))},Hg=function(r,e){r.mutate(e.left,e.top)},zg=function(r,e){var n=Wg(e),t=Ne(n.element(),"mousedown",r.forceDrop),o=Ne(n.element(),"mouseup",r.drop),a=Ne(n.element(),"mousemove",r.move),u=Ne(n.element(),"mouseout",r.delayDrop),i=function(){n.destroy(),o.unbind(),a.unbind(),u.unbind(),t.unbind()},c=function(f){z(f,n.element())},l=function(){fr(n.element())};return bg({element:n.element,start:c,stop:l,destroy:i})},Gg=hg({compare:Fg,extract:_g,sink:zg,mutate:Hg}),jg=function(r,e){e===void 0&&(e={});var n=e.mode!==void 0?e.mode:Gg;return Rg(r,n,e)},cc=function(r){return Q(r,"[contenteditable]")},ct=function(r,e){return e===void 0&&(e=!1),!Oe().browser.isIE()&&Nr(r)?r.dom.isContentEditable:cc(r).fold(w(e),function(n){return lc(n)==="true"})},lc=function(r){return r.dom.contentEditable},Ug=uc("ephox-snooker"),lt=Ug.resolve,Vg=function(){var r=be({drag:Sr(["xDelta","yDelta"])}),e=function(n,t){r.trigger.drag(n,t)};return{mutate:e,events:r.registry}},qg=function(){var r=be({drag:Sr(["xDelta","yDelta","target"])}),e=s.none(),n=Vg();n.events.drag.bind(function(a){e.each(function(u){r.trigger.drag(a.xDelta,a.yDelta,u)})});var t=function(a){e=s.some(a)},o=function(){return e};return{assign:t,get:o,mutate:n.mutate,events:r.registry}},Kg=function(r,e,n,t,o){var a=b.fromTag("div");return en(a,{position:"absolute",left:e-t/2+"px",top:n+"px",height:o+"px",width:t+"px"}),rn(a,{"data-column":r,role:"presentation"}),a},Xg=function(r,e,n,t,o){var a=b.fromTag("div");return en(a,{position:"absolute",left:e+"px",top:n-o/2+"px",height:o+"px",width:t+"px"}),rn(a,{"data-row":r,role:"presentation"}),a},Go=lt("resizer-bar"),fc=lt("resizer-rows"),sc=lt("resizer-cols"),vc=7,Yg=function(r,e){return J(r.all,function(n,t){return e(n.element)?[t]:[]})},Jg=function(r,e){var n=[];return gr(r.grid.columns,function(t){var o=k.getColumnAt(r,t).map(function(a){return a.element});o.forall(e)&&n.push(t)}),U(n,function(t){var o=k.filterItems(r,function(a){return a.column===t});return hr(o,function(a){return e(a.element)})})},jo=function(r){var e=kr(r.parent(),"."+Go);O(e,fr)},mc=function(r,e,n){var t=r.origin();O(e,function(o){o.each(function(a){var u=n(t,a);Gr(u,Go),z(r.parent(),u)})})},Qg=function(r,e,n,t){mc(r,e,function(o,a){var u=Kg(a.col,a.x-o.left,n.top-o.top,vc,t);return Gr(u,sc),u})},Zg=function(r,e,n,t){mc(r,e,function(o,a){var u=Xg(a.row,n.left-o.left,a.y-o.top,t,vc);return Gr(u,fc),u})},rp=function(r,e,n,t,o){var a=on(n),u=e.isResizable,i=t.length>0?So.positions(t,n):[],c=i.length>0?Yg(r,u):[],l=U(i,function(d,m){return or(c,function(p){return m===p})});Zg(e,l,a,po(n));var f=o.length>0?Qn.positions(o,n):[],v=f.length>0?Jg(r,u):[],g=U(f,function(d,m){return or(v,function(p){return m===p})});Qg(e,g,a,bi(n))},ft=function(r,e){if(jo(r),r.isResizable(e)){var n=k.fromTable(e),t=gi(n),o=bo(n);rp(n,r,e,t,o)}},dc=function(r,e){var n=kr(r.parent(),"."+Go);O(n,e)},ep=function(r){dc(r,function(e){Z(e,"display","none")})},np=function(r){dc(r,function(e){Z(e,"display","block")})},tp=function(r){return zo(r,fc)},op=function(r){return zo(r,sc)},ap=lt("resizer-bar-dragging"),up=function(r){var e=qg(),n=jg(e,{}),t=s.none(),o=function(m,p){return s.from(se(m,p))};e.events.drag.bind(function(m){o(m.target,"data-row").each(function(p){var h=Gn(m.target,"top");Z(m.target,"top",h+m.yDelta+"px")}),o(m.target,"data-column").each(function(p){var h=Gn(m.target,"left");Z(m.target,"left",h+m.xDelta+"px")})});var a=function(m,p){var h=Gn(m,p),C=Lr(m,"data-initial-"+p,0);return h-C};n.events.stop.bind(function(){e.get().each(function(m){t.each(function(p){o(m,"data-row").each(function(h){var C=a(m,"top");_(m,"data-initial-top"),d.trigger.adjustHeight(p,C,parseInt(h,10))}),o(m,"data-column").each(function(h){var C=a(m,"left");_(m,"data-initial-left"),d.trigger.adjustWidth(p,C,parseInt(h,10))}),ft(r,p)})})});var u=function(m,p){d.trigger.startAdjust(),e.assign(m),X(m,"data-initial-"+p,Gn(m,p)),Gr(m,ap),Z(m,"opacity","0.2"),n.go(r.parent())},i=Ne(r.parent(),"mousedown",function(m){tp(m.target)&&u(m.target,"top"),op(m.target)&&u(m.target,"left")}),c=function(m){return M(m,r.view())},l=function(m){return Q(m,"table",c).filter(ct)},f=Ne(r.view(),"mouseover",function(m){l(m.target).fold(function(){Nr(m.target)&&jo(r)},function(p){t=s.some(p),ft(r,p)})}),v=function(){i.unbind(),f.unbind(),n.destroy(),jo(r)},g=function(m){ft(r,m)},d=be({adjustHeight:Sr(["table","delta","row"]),adjustWidth:Sr(["table","delta","column"]),startAdjust:Sr([])});return{destroy:v,refresh:g,on:n.on,off:n.off,hideBars:G(ep,r),showBars:G(np,r),events:d.registry}},ip=function(r,e,n){var t=So,o=Qn,a=up(r),u=be({beforeResize:Sr(["table","type"]),afterResize:Sr(["table","type"]),startDrag:Sr([])});return a.events.adjustHeight.bind(function(i){var c=i.table;u.trigger.beforeResize(c,"row");var l=t.delta(i.delta,c);Gd(c,l,i.row,t),u.trigger.afterResize(c,"row")}),a.events.startAdjust.bind(function(i){u.trigger.startDrag()}),a.events.adjustWidth.bind(function(i){var c=i.table;u.trigger.beforeResize(c,"col");var l=o.delta(i.delta,c),f=n(c);Ki(c,l,i.column,e,f),u.trigger.afterResize(c,"col")}),{on:a.on,off:a.off,hideBars:a.hideBars,showBars:a.showBars,destroy:a.destroy,events:u.registry}},cp={create:ip},gc=function(r,e){return r.fire("newrow",{node:e})},pc=function(r,e){return r.fire("newcell",{node:e})},lp=function(r,e,n,t,o){r.fire("ObjectResizeStart",{target:e,width:n,height:t,origin:o})},fp=function(r,e,n,t,o){r.fire("ObjectResized",{target:e,width:n,height:t,origin:o})},sp=function(r,e,n,t,o){r.fire("TableSelectionChange",{cells:e,start:n,finish:t,otherCells:o})},vp=function(r){r.fire("TableSelectionClear")},Ar=function(r,e,n){r.fire("TableModified",D(D({},n),{table:e}))},st={structure:!1,style:!0},V={structure:!0,style:!1},mp={structure:!0,style:!0},dp="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Uo={"border-collapse":"collapse",width:"100%"},gp=gr(5,function(r){var e=r+1+"px";return{title:e,value:e}}),pp=S(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(r){return{title:r,value:r.toLowerCase()}}),hp=function(r){var e;if(sn(r)){var n=r.dom,t=(e=n.getParent(r.selection.getStart(),n.isBlock))!==null&&e!==void 0?e:r.getBody(),o=ho(b.fromDom(t));return D(D({},Uo),{width:o+"px"})}else return mt(r)?ke(Uo,function(a,u){return u!=="width"}):Uo},bp={border:"1"},hc="preservetable",Vo=function(r){return r.getParam("table_sizing_mode","auto")},bc=function(r){return r.getParam("table_responsive_width")},wc=function(r){return r.getParam("table_border_widths",gp,"array")},qo=function(r){return r.getParam("table_border_styles",pp,"array")},Ko=function(r){return r.getParam("table_default_attributes",bp,"object")},Xo=function(r){return r.getParam("table_default_styles",hp(r),"object")},wp=function(r){return r.getParam("table_resize_bars",!0,"boolean")},yp=function(r){return r.getParam("table_tab_navigation",!0,"boolean")},Yo=function(r){return r.getParam("table_cell_advtab",!0,"boolean")},Jo=function(r){return r.getParam("table_row_advtab",!0,"boolean")},we=function(r){return r.getParam("table_advtab",!0,"boolean")},Cp=function(r){return r.getParam("table_appearance_options",!0,"boolean")},Sp=function(r){return r.getParam("table_grid",!0,"boolean")},ye=function(r){return r.getParam("table_style_by_css",!1,"boolean")},Qo=function(r){return r.getParam("table_cell_class_list",[],"array")},Rp=function(r){return r.getParam("table_row_class_list",[],"array")},Zo=function(r){return r.getParam("table_class_list",[],"array")},vt=function(r){return Vo(r)==="relative"||bc(r)===!0},sn=function(r){return Vo(r)==="fixed"||bc(r)===!1},mt=function(r){return Vo(r)==="responsive"},Tp=function(r){return r.getParam("table_toolbar",dp)},xp=function(r){return r.getParam("table_use_colgroups",!1,"boolean")},yc=function(r){var e="section",n=r.getParam("table_header_type",e,"string"),t=["section","cells","sectionCells","auto"];return K(t,n)?n:e},ra=function(r){var e=["preservetable","resizetable"],n=r.getParam("table_column_resizing",hc,"string");return pr(e,function(t){return t===n}).getOr(hc)},Cc=function(r){return ra(r)==="preservetable"},Sc=function(r){return ra(r)==="resizetable"},Rc=function(r){var e=r.getParam("table_clone_elements");return vr(e)?s.some(e.split(/[ ,]/)):Array.isArray(e)?s.some(e):s.none()},Op=function(r){var e=r.getParam("object_resizing",!0);return vr(e)?e==="table":e},Tc=function(r){return r.getParam("table_background_color_map",[],"array")},xc=function(r){return r.getParam("table_border_color_map",[],"array")},Oc=function(r,e){return vt(r)?Ee.percentageSize(e):sn(r)?Ee.pixelSize(e):Ee.getTableSize(e)},dt=function(r){_(r,"width")},kp=function(r){var e=Ii(r);ec(r,s.some(e),s.none()),dt(r)},Dp=function(r){var e=Em(r);ec(r,s.some(e),s.none()),dt(r)},Ap=function(r){ee(r,"width");var e=no(r),n=e.length>0?e:ve(r);O(n,function(t){ee(t,"width"),dt(t)}),dt(r)},vn=kp,ea=Dp,kc=Ap,$p=function(r){var e=k.fromTable(r);k.hasColumns(e)||O(ve(r),function(n){var t=Zr(n,"width");Z(n,"width",t),_(n,"width")})},Bp=function(){var r=b.fromTag("div");return en(r,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),z(Xs(),r),r},Pp=function(r,e){return r.inline?Lo.body(de(r),Bp(),e):Lo.only(b.fromDom(r.getDoc()),e)},Ep=function(r,e){r.inline&&fr(e.parent())},na="bar-",Dc=function(r){return se(r,"data-mce-resize")!=="false"},Ip=function(r){var e=s.none(),n=s.none(),t=s.none(),o,a,u=function(m){return m.nodeName==="TABLE"},i=function(){return n},c=function(){return t.getOr(Lo.only(b.fromDom(r.getBody()),Dc))},l=function(m){return Oc(r,m)},f=function(){return Cc(r)?No():Ji()},v=function(m){return Fo(m).columns},g=function(m,p,h){var C=Mn(p,"e");if(a===""&&vn(m),h!==o&&a!==""){Z(m,"width",a);var P=f(),y=l(m),R=Cc(r)||C?v(m)-1:0;Ki(m,h-o,R,P,y)}else if(gd(a)){var $=parseFloat(a.replace("%","")),A=h*$/o;Z(m,"width",A+"%")}pd(a)&&$p(m)},d=function(){n.each(function(m){m.destroy()}),t.each(function(m){Ep(r,m)})};return r.on("init",function(){var m=Pp(r,Dc);if(t=s.some(m),Op(r)&&wp(r)){var p=f(),h=cp.create(m,p,l);h.on(),h.events.startDrag.bind(function(C){e=s.some(r.selection.getRng())}),h.events.beforeResize.bind(function(C){var P=C.table.dom;lp(r,P,ji(P),Ui(P),na+C.type)}),h.events.afterResize.bind(function(C){var P=C.table,y=P.dom;ge(P),e.each(function(R){r.selection.setRng(R),r.focus()}),fp(r,y,ji(y),Ui(y),na+C.type),r.undoManager.add()}),n=s.some(h)}}),r.on("ObjectResizeStart",function(m){var p=m.target;if(u(p)){var h=b.fromDom(p);O(r.dom.select(".mce-clonedresizable"),function(C){r.dom.addClass(C,"mce-"+ra(r)+"-columns")}),!tc(h)&&sn(r)?ea(h):!nc(h)&&vt(r)&&vn(h),oc(h)&&In(m.origin,na)&&vn(h),o=m.width,a=mt(r)?"":dd(r,p).getOr("")}}),r.on("ObjectResized",function(m){var p=m.target;if(u(p)){var h=b.fromDom(p),C=m.origin;In(C,"corner-")&&g(h,C,m.width),ge(h),Ar(r,h.dom,st)}}),r.on("SwitchMode",function(){i().each(function(m){r.mode.isReadOnly()?m.hideBars():m.showBars()})}),{lazyResize:i,lazyWire:c,destroy:d}},mn=function(r,e){return{element:r,offset:e}},Ac=function(r,e,n){return r.property().isText(e)&&r.property().getText(e).trim().length===0||r.property().isComment(e)?n(e).bind(function(t){return Ac(r,t,n).orThunk(function(){return s.some(t)})}):s.none()},$c=function(r,e){if(r.property().isText(e))return r.property().getText(e).length;var n=r.property().children(e);return n.length},Bc=function(r,e){var n=Ac(r,e,r.query().prevSibling).getOr(e);if(r.property().isText(n))return mn(n,$c(r,n));var t=r.property().children(n);return t.length>0?Bc(r,t[t.length-1]):mn(n,$c(r,n))},Mp=Bc,Np=Xn(),Lp=function(r){return Mp(Np,r)},Wp=function(r,e){var n=zn(r,"colspan");if(n===1){var t=Pm(r);t.each(function(o){var a=o.value/2;Ei(r,a,o.unit),Ei(e,a,o.unit)})}},gt=Mr("th"),pt=function(r){return hr(r,function(e){return gt(e.element)})},Fp=function(r,e){return r&&e?"sectionCells":r?"section":"cells"},Pc=function(r){var e=r.section==="thead",n=Jt(ta(r.cells),"th");return e||n?{type:"header",subType:Fp(e,n)}:r.section==="tfoot"?{type:"footer"}:{type:"body"}},ta=function(r){var e=U(r,function(n){return gt(n.element)});return e.length===0?s.some("td"):e.length===r.length?s.some("th"):s.none()},_p=function(r){var e=S(r,function(a){return Pc(a).type}),n=K(e,"header"),t=K(e,"footer");if(!n&&!t)return s.some("body");var o=K(e,"body");return n&&!o&&!t?s.some("header"):!n&&!o&&t?s.some("footer"):s.none()},Hp=function(r){return Or(r.all,function(e){var n=Pc(e);return n.type==="header"?s.from(n.subType):s.none()})},oa=function(r,e,n){return lr(n(r.element,e),!0,r.isLocked)},aa=function(r,e){return r.section!==e?ce(r.element,r.cells,e,r.isNew):r},Ec=function(){return{transformRow:aa,transformCell:function(r,e,n){var t=n(r.element,e),o=N(t)!=="td"?nm(t,"td"):t;return lr(o,r.isNew,r.isLocked)}}},Ic=function(){return{transformRow:aa,transformCell:oa}},Mc=function(){return{transformRow:function(r,e){var n=e==="thead"?"tbody":e;return aa(r,n)},transformCell:oa}},zp=function(){return{transformRow:F,transformCell:oa}},Gp=function(r,e){var n=k.fromTable(r),t=Hp(n).getOr(e);switch(t){case"section":return Ec();case"sectionCells":return Ic();case"cells":return Mc()}},dn={getTableSectionType:Gp,section:Ec,sectionCells:Ic,cells:Mc,fallback:zp},gn=function(r,e,n,t){n===t?_(r,e):X(r,e,n)},Nc=function(r,e,n){Ja(_n(r,e)).fold(function(){return io(r,n)},function(t){return qn(t,n)})},jp=function(r,e){var n=Hn(r,e).getOrThunk(function(){var t=b.fromTag(e,Ln(r).dom);return e==="thead"?Nc(r,"caption,colgroup",t):e==="colgroup"?Nc(r,"caption",t):z(r,t),t});return co(n),n},Up=function(r,e){var n=[],t=[],o=function(d){return S(d,function(m){m.isNew&&n.push(m.element);var p=m.element;return co(p),O(m.cells,function(h){h.isNew&&t.push(h.element),gn(h.element,"colspan",h.colspan,1),gn(h.element,"rowspan",h.rowspan,1),z(p,h.element)}),p})},a=function(d){return J(d,function(m){return S(m.cells,function(p){return gn(p.element,"span",p.colspan,1),p.element})})},u=function(d,m){var p=jp(r,m),h=m==="colgroup"?a:o,C=h(d);Wr(p,C)},i=function(d){Hn(r,d).each(fr)},c=function(d,m){d.length>0?u(d,m):i(m)},l=[],f=[],v=[],g=[];return O(e,function(d){switch(d.section){case"thead":l.push(d);break;case"tbody":f.push(d);break;case"tfoot":v.push(d);break;case"colgroup":g.push(d);break}}),c(g,"colgroup"),c(l,"thead"),c(f,"tbody"),c(v,"tfoot"),{newRows:n,newCells:t}},Vp=function(r){return S(r,function(e){var n=ui(e.element);return O(e.cells,function(t){var o=$e(t.element);gn(o,"colspan",t.colspan,1),gn(o,"rowspan",t.rowspan,1),z(n,o)}),n})},qp=function(r,e){return S(r,function(n){return yr(n,e)})},Kp=function(r,e){return r[e]},Lc=function(r,e){if(r.length===0)return 0;var n=r[0],t=Pn(r,function(o){return!e(n.element,o.element)});return t.getOr(r.length)},Xp=function(r,e,n,t){var o=Kp(r,e),a=o.section==="colgroup",u=Lc(o.cells.slice(n),t),i=a?1:Lc(qp(r.slice(e),n),t);return{colspan:u,rowspan:i}},Yp=function(r,e){var n=S(r,function(o){return S(o.cells,ir)}),t=function(o,a,u,i){for(var c=o;c<o+u;c++)for(var l=a;l<a+i;l++)n[c][l]=!0};return S(r,function(o,a){var u=J(o.cells,function(i,c){if(n[a][c]===!1){var l=Xp(r,a,c,e);return t(a,c,l.rowspan,l.colspan),[$s(i.element,l.rowspan,l.colspan,i.isNew)]}else return[]});return Ps(o.element,u,o.section,o.isNew)})},pn=function(r,e,n){var t=[];O(r.colgroups,function(f){for(var v=[],g=0;g<r.grid.columns;g++){var d=k.getColumnAt(r,g).map(function(m){return lr(m.element,n,!1)}).getOrThunk(function(){return lr(e.colGap(),!0,!1)});v.push(d)}t.push(ce(f.element,v,"colgroup",n))});for(var o=0;o<r.grid.rows;o++){for(var a=[],u=0;u<r.grid.columns;u++){var i=k.getAt(r,o,u).map(function(f){return lr(f.element,n,f.isLocked)}).getOrThunk(function(){return lr(e.gap(),!0,!1)});a.push(i)}var c=r.all[o],l=ce(c.element,a,c.section,n);t.push(l)}return t},Jp=function(r,e){return pn(r,e,!1)},ht=function(r){return Yp(r,M)},ua=function(r,e){return Or(r.all,function(n){return pr(n.cells,function(t){return M(e,t.element)})})},ia=function(r,e,n){var t=S(e.selection,function(a){return eo(a).bind(function(u){return ua(r,u)}).filter(n)}),o=Wu(t);return Qt(o.length>0,o)},Y=function(r,e,n,t,o){return function(a,u,i,c,l){var f=k.fromTable(u),v=s.from(l==null?void 0:l.section).getOrThunk(dn.fallback),g=e(f,i).map(function(d){var m=Jp(f,c),p=r(m,d,M,o(c),v),h=me(p.grid),C=ht(p.grid);return{info:d,grid:C,cursor:p.cursor,lockedColumns:h}});return g.bind(function(d){var m=Up(u,d.grid),p=s.from(l==null?void 0:l.sizing).getOrThunk(function(){return Ee.getTableSize(u)}),h=s.from(l==null?void 0:l.resize).getOrThunk(No);return n(u,d.grid,d.info,{sizing:p,resize:h,section:v}),t(u),ft(a,u),_(u,Un),d.lockedColumns.length>0&&X(u,Un,d.lockedColumns.join(",")),s.some({cursor:d.cursor,newRows:m.newRows,newCells:m.newCells})})}},Qp=function(r,e){return eo(e.element).bind(function(n){return ua(r,n).map(function(t){var o=D(D({},t),{generators:e.generators,clipboard:e.clipboard});return o})})},ca=function(r,e){return ia(r,e,I).map(function(n){return{cells:n,generators:e.generators,clipboard:e.clipboard}})},Zp=function(r,e){return e.mergable},rh=function(r,e){return e.unmergable},$r=function(r,e){return ia(r,e,I)},jr=function(r,e){return ia(r,e,function(n){return!n.isLocked})},eh=function(r,e){return ua(r,e).exists(function(n){return!n.isLocked})},Wc=function(r,e){return hr(e,function(n){return eh(r,n)})},Fc=function(r,e){return Zp(r,e).filter(function(n){return Wc(r,n.cells)})},_c=function(r,e){return rh(r,e).filter(function(n){return Wc(r,n)})},nh=function(r,e,n,t){var o=rr(r).rows;if(o.length===0)return r;for(var a=e.startRow;a<=e.finishRow;a++)for(var u=e.startCol;u<=e.finishCol;u++){var i=o[a],c=yr(i,u).isLocked;tn(i,u,lr(t(),!1,c))}return r},Hc=function(r,e,n,t){for(var o=rr(r).rows,a=!0,u=0;u<o.length;u++)for(var i=0;i<Cr(o[0]);i++){var c=o[u],l=yr(c,i),f=l.element,v=n(f,e);v===!0&&a===!1?tn(c,i,lr(t(),!0,l.isLocked)):v===!0&&(a=!1)}return r},th=function(r,e){return br(r,function(n,t){return or(n,function(o){return e(o.element,t.element)})?n:n.concat([t])},[])},oh=function(r,e,n,t){return e>0&&e<r[0].cells.length&&O(r,function(o){var a=o.cells[e-1],u=o.cells[e],i=n(u.element,a.element);i&&tn(o,e,lr(t(),!0,u.isLocked))}),r},ah=function(r,e,n,t){var o=rr(r).rows;if(e>0&&e<o.length){var a=o[e-1].cells,u=th(a,n);O(u,function(i){for(var c=s.none(),l=e;l<o.length;l++)for(var f=function(g){var d=o[l],m=yr(d,g),p=n(m.element,i.element);p&&(c.isNone()&&(c=s.some(t())),c.each(function(h){tn(d,g,lr(h,!0,m.isLocked))}))},v=0;v<Cr(o[0]);v++)f(v)})}return r},Le=function(r){var e=function(v){return Le(r)},n=function(v){return Le(r)},t=function(v){return Le(v(r))},o=function(v){return Le(r)},a=function(v){v(r)},u=function(v){return v(r)},i=function(v,g){return g(r)},c=function(v){return v(r)},l=function(v){return v(r)},f=function(){return s.some(r)};return{isValue:I,isError:ir,getOr:w(r),getOrThunk:w(r),getOrDie:w(r),or:e,orThunk:n,fold:i,map:t,mapError:o,each:a,bind:u,exists:c,forall:l,toOptional:f}},hn=function(r){var e=function(l){return l()},n=function(){return Ef(String(r))()},t=F,o=function(l){return l()},a=function(l){return hn(r)},u=function(l){return hn(l(r))},i=function(l){return hn(r)},c=function(l,f){return l(r)};return{isValue:ir,isError:I,getOr:F,getOrThunk:e,getOrDie:n,or:t,orThunk:o,fold:c,map:a,mapError:u,each:T,bind:i,exists:ir,forall:I,toOptional:s.none}},uh=function(r,e){return r.fold(function(){return hn(e)},Le)},zc={value:Le,error:hn,fromOption:uh},ih=function(r,e,n){if(r.row>=e.length||r.column>Cr(e[0]))return zc.error("invalid start address out of table bounds, row: "+r.row+", column: "+r.column);var t=e.slice(r.row),o=t[0].cells.slice(r.column),a=Cr(n[0]),u=n.length;return zc.value({rowDelta:t.length-u,colDelta:o.length-a})},Gc=function(r,e){var n=Cr(r[0]),t=Cr(e[0]);return{rowDelta:0,colDelta:n-t}},jc=function(r,e){var n=r.length,t=e.length;return{rowDelta:n-t,colDelta:0}},la=function(r,e,n,t){var o=e.section==="colgroup"?n.col:n.cell;return gr(r,function(a){return lr(o(),!0,t(a))})},ch=function(r,e,n,t){var o=r[r.length-1];return r.concat(gr(e,function(){var a=o.section==="colgroup"?n.colgroup:n.row,u=Xu(o,a,F),i=la(u.cells.length,u,n,function(c){return ie(t,c.toString())});return Ku(u,i)}))},lh=function(r,e,n,t){return S(r,function(o){var a=la(e,o,n,ir);return oo(o,t,a)})},fh=function(r,e,n){return S(r,function(t){return br(n,function(o,a){var u=la(1,t,e,I)[0];return qu(o,a,u)},t)})},bn=function(r,e,n){var t=e.colDelta<0?lh:F,o=e.rowDelta<0?ch:F,a=me(r),u=Cr(r[0]),i=or(a,function(f){return f===u-1}),c=t(r,Math.abs(e.colDelta),n,i?u-1:u),l=me(c);return o(c,Math.abs(e.rowDelta),n,zt(l,I))},sh=function(r,e,n,t){var o=yr(r[e],n),a=G(t,o.element),u=r[e];return r.length>1&&Cr(u)>1&&(n>0&&a(dr(u,n-1))||n<u.cells.length-1&&a(dr(u,n+1))||e>0&&a(dr(r[e-1],n))||e<r.length-1&&a(dr(r[e+1],n)))},vh=function(r,e,n,t,o,a){for(var u=r.row,i=r.column,c=n.length,l=Cr(n[0]),f=u+c,v=i+l+a.length,g=zt(a,I),d=u;d<f;d++)for(var m=0,p=i;p<v;p++){if(g[p]){m++;continue}sh(e,d,p,o)&&Hc(e,dr(e[d],p),o,t.cell);var h=p-i-m,C=yr(n[d-u],h),P=C.element,y=t.replace(P);tn(e[d],p,lr(y,!0,C.isLocked))}return e},mh=function(r,e,n){var t=Cr(e[0]),o=rr(e).cols.length+r.row,a=gr(t-r.column,function(i){return i+r.column}),u=pr(a,function(i){return hr(n,function(c){return c!==i})}).getOr(t-1);return{row:o,column:u}},Uc=function(r,e,n){return U(n,function(t){return t>=r.column&&t<=Cr(e[0])+r.column})},dh=function(r,e,n,t,o){var a=me(e),u=mh(r,e,a),i=rr(n).rows,c=Uc(u,i,a),l=ih(u,e,i);return l.map(function(f){var v=D(D({},f),{colDelta:f.colDelta-c.length}),g=bn(e,v,t),d=me(g),m=Uc(u,i,d);return vh(u,g,i,t,o,m)})},Vc=function(r,e,n,t,o){oh(e,r,o,t.cell);var a=jc(n,e),u=bn(n,a,t),i=jc(e,u),c=bn(e,i,t);return S(c,function(l,f){return oo(l,r,u[f].cells)})},qc=function(r,e,n,t,o){ah(e,r,o,t.cell);var a=me(e),u=Gc(e,n),i=D(D({},u),{colDelta:u.colDelta-a.length}),c=bn(e,i,t),l=rr(c),f=l.cols,v=l.rows,g=me(c),d=Gc(n,e),m=D(D({},d),{colDelta:d.colDelta+g.length}),p=fh(n,t,g),h=bn(p,m,t);return f.concat(v.slice(0,r)).concat(h).concat(v.slice(r,v.length))},gh=function(r,e,n,t){return Xu(r,function(o){return t(o,n)},e)},Kc=function(r,e,n,t,o){var a=rr(r),u=a.rows,i=a.cols,c=u.slice(0,e),l=u.slice(e),f=gh(u[n],function(v,g){var d=e>0&&e<u.length&&t(dr(u[e-1],g),dr(u[e],g)),m=d?yr(u[e],g):lr(o(v.element,t),!0,v.isLocked);return m},t,o);return i.concat(c).concat([f]).concat(l)},ph=function(r,e,n,t,o,a,u){if(n==="colgroup"||!t){var i=yr(r,o);return lr(u(i.element,a),!0,!1)}else return yr(r,e)},Xc=function(r,e,n,t,o){return S(r,function(a){var u=e>0&&e<Cr(a)&&t(dr(a,e-1),dr(a,e)),i=ph(a,e,a.section,u,n,t,o);return qu(a,e,i)})},hh=function(r,e){return J(r,function(n){var t=n.cells,o=Rr(e,function(a,u){return u>=0&&u<a.length?a.slice(0,u).concat(a.slice(u+1)):a},t);return o.length>0?[ce(n.element,o,n.section,n.isNew)]:[]})},bh=function(r,e,n){var t=rr(r),o=t.rows,a=t.cols;return a.concat(o.slice(0,e)).concat(o.slice(n+1))},wh=function(r,e,n,t){return dr(r[e],n)!==void 0&&e>0&&t(dr(r[e-1],n),dr(r[e],n))},yh=function(r,e,n){return e>0&&n(dr(r,e-1),dr(r,e))},Yc=function(r,e,n,t){return wh(r,e,n,t)||yh(r[e],n,t)},Ch=function(r,e){var n=hr(e,F)&&pt(r.cells);return n?I:function(t,o,a){var u=N(t.element);return!(u==="th"&&e[a])}},Sh=function(r,e){var n=hr(e,F)&&pt(r);return n?I:function(t,o,a){var u=N(t.element);return!(u==="th"&&e[o])}},Jc=function(r,e,n,t){var o=function(i){return i==="row"?Gu(e):zu(e)},a=function(i){return o(i)?i+"group":i};if(r)return gt(e)?a(n):null;if(t&&gt(e)){var u=n==="row"?"col":"row";return a(u)}else return null},Rh=function(r,e){return function(n,t,o){return s.some(Jc(r,n.element,"col",e[o]))}},Th=function(r,e){return function(n,t){return s.some(Jc(r,n.element,"row",e[t]))}},Qc=function(r,e,n){return lr(n(r.element,e),!0,r.isLocked)},fa=function(r,e,n,t,o,a,u){var i=function(c){return or(e,function(l){return n(c.element,l.element)})};return S(r,function(c,l){return lv(c,function(f,v){if(i(f)){var g=u(f,l,v)?o(f,n,t):f;return a(g,l,v).each(function(d){ev(g.element,{scope:s.from(d)})}),g}else return f})})},Zc=function(r,e,n){return J(r,function(t,o){return Yc(r,o,e,n)?[]:[yr(t,e)]})},xh=function(r,e,n){var t=r[e];return J(t.cells,function(o,a){return Yc(r,e,a,n)?[]:[o]})},rl=function(r,e,n,t,o){var a=rr(r).rows,u=J(e,function(f){return Zc(a,f,t)}),i=S(r,function(f){return pt(f.cells)}),c=Sh(u,i),l=Th(n,i);return fa(r,u,t,o,Qc,l,c)},Oh=function(r,e,n,t,o,a,u){var i=rr(r),c=i.cols,l=i.rows,f=l[e[0]],v=J(e,function(C){return xh(l,C,o)}),g=S(f.cells,function(C,P){return pt(Zc(l,P,o))}),d=Ke([],l,!0);O(e,function(C){d[C]=u.transformRow(l[C],n)});var m=c.concat(d),p=Ch(f,g),h=Rh(t,g);return fa(m,v,o,a,u.transformCell,h,p)},el=function(r,e,n,t){var o=rr(r).rows,a=S(e,function(u){return yr(o[u.row],u.column)});return fa(r,a,n,t,Qc,s.none,I)},We=function(r){var e=function(n,t){var o=or(n,function(a){return a.column===t.column});return o?n:n.concat([t])};return br(r,e,[]).sort(function(n,t){return n.column-t.column})},nl=Mr("col"),tl=Mr("colgroup"),ol=function(r){return N(r)==="tr"||tl(r)},kh=function(r){var e=Lr(r,"colspan",1),n=Lr(r,"rowspan",1);return{element:r,colspan:e,rowspan:n}},Dh=function(r,e){e===void 0&&(e=kh);var n=function(i){return nl(i.element)?r.col(i):r.cell(i)},t=function(i){return tl(i.element)?r.colgroup(i):r.row(i)},o=function(i){if(ol(i))return t({element:i});var c=n(e(i));return a=s.some({item:i,replacement:c}),c},a=s.none(),u=function(i,c){return a.fold(function(){return o(i)},function(l){return c(i,l.item)?l.replacement:o(i)})};return{getOrInit:u}},Ah=function(r){return function(e){var n=[],t=function(u,i){return pr(n,function(c){return i(c.item,u)})},o=function(u){var i=r==="td"?{scope:null}:{},c=e.replace(u,r,i);return n.push({item:u,sub:c}),c},a=function(u,i){return ol(u)||nl(u)?u:t(u,i).fold(function(){return o(u)},function(c){return i(u,c.item)?c.sub:o(u)})};return{replaceOrInit:a}}},al=function(r){return Qr(r,"scope").map(function(e){return e.substr(0,3)})},$h=function(r){var e=function(t){var o=al(t);return o.each(function(a){return X(t,"scope",a)}),function(){var a=r.cell({element:t,colspan:1,rowspan:1});return ee(a,"width"),ee(t,"width"),o.each(function(u){return X(a,"scope",u)}),a}},n=function(t){var o=function(){var a=Wu(S(t,al));if(a.length===0)return s.none();var u=a[0],i=["row","col"],c=or(a,function(l){return l!==u&&K(i,l)});return c?s.none():s.from(u)};return ee(t[0],"width"),o().fold(function(){return _(t[0],"scope")},function(a){return X(t[0],"scope",a+"group")}),w(t[0])};return{unmerge:e,merge:n}},sr={modification:Dh,transform:Ah,merging:$h},Bh=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ph=function(r,e){var n=r.property().name(e);return K(["ol","ul"],n)},Eh=function(r,e){var n=r.property().name(e);return K(Bh,n)},Ih=function(r,e){return K(["br","img","hr","input"],r.property().name(e))},sa=Xn(),va=function(r){return Eh(sa,r)},Mh=function(r){return Ph(sa,r)},Nh=function(r){return Ih(sa,r)},Lh=function(r){var e=function(c){return N(c)==="br"},n=function(c){return hr(c,function(l){return e(l)||Jr(l)&&Kn(l).trim().length===0})},t=function(c){return N(c)==="li"||Qe(c,Mh).isSome()},o=function(c){return Wn(c).map(function(l){return va(l)?!0:Nh(l)?N(l)!=="img":!1}).getOr(!1)},a=function(c){return ko(c).bind(function(l){var f=o(l);return le(l).map(function(v){return f===!0||t(v)||e(l)||va(v)&&!M(c,v)?[]:[b.fromTag("br")]})}).getOr([])},u=function(){var c=J(r,function(l){var f=ar(l);return n(f)?[]:f.concat(a(l))});return c.length===0?[b.fromTag("br")]:c},i=u();co(r[0]),Wr(r[0],i)},ul=function(r){return ct(r,!0)},il=function(r){var e=ve(r);e.length===0&&fr(r)},bt=function(r,e){return{grid:r,cursor:e}},Wh=function(r){return Or(r,function(e){return Or(e.cells,function(n){var t=n.element;return Qt(ul(t),t)})})},Fh=function(r,e,n){var t,o,a=rr(r).rows;return s.from((o=(t=a[e])===null||t===void 0?void 0:t.cells[n])===null||o===void 0?void 0:o.element).filter(ul).orThunk(function(){return Wh(a)})},ur=function(r,e,n){var t=Fh(r,e,n);return bt(r,t)},wt=function(r){var e=function(n,t){var o=or(n,function(a){return a.row===t.row});return o?n:n.concat([t])};return br(r,e,[]).sort(function(n,t){return n.row-t.row})},_h=function(r,e,n,t){var o=e[0].row,a=wt(e),u=Rr(a,function(i,c){var l=Kc(i.grid,o,c.row+i.delta,n,t.getOrInit);return{grid:l,delta:i.delta+1}},{grid:r,delta:0}).grid;return ur(u,o,e[0].column)},Hh=function(r,e,n,t){var o=wt(e),a=o[o.length-1],u=a.row+a.rowspan,i=Rr(o,function(c,l){return Kc(c,u,l.row,n,t.getOrInit)},r);return ur(i,u,e[0].column)},zh=function(r,e,n,t){var o=e.details,a=We(o),u=a[0].column,i=Rr(a,function(c,l){var f=Xc(c.grid,u,l.column+c.delta,n,t.getOrInit);return{grid:f,delta:c.delta+1}},{grid:r,delta:0}).grid;return ur(i,o[0].row,u)},Gh=function(r,e,n,t){var o=e.details,a=o[o.length-1],u=a.column+a.colspan,i=We(o),c=Rr(i,function(l,f){return Xc(l,u,f.column,n,t.getOrInit)},r);return ur(c,o[0].row,u)},jh=function(r,e,n,t){var o=We(e),a=S(o,function(i){return i.column}),u=rl(r,a,!0,n,t.replaceOrInit);return ur(u,e[0].row,e[0].column)},Uh=function(r,e,n,t){var o=el(r,e,n,t.replaceOrInit);return ur(o,e[0].row,e[0].column)},Vh=function(r,e,n,t){var o=We(e),a=S(o,function(i){return i.column}),u=rl(r,a,!1,n,t.replaceOrInit);return ur(u,e[0].row,e[0].column)},qh=function(r,e,n,t){var o=el(r,e,n,t.replaceOrInit);return ur(o,e[0].row,e[0].column)},ma=function(r,e){return function(n,t,o,a,u){var i=wt(t),c=S(i,function(f){return f.row}),l=Oh(n,c,r,e,o,a.replaceOrInit,u);return ur(l,t[0].row,t[0].column)}},Kh=ma("thead",!0),Xh=ma("tbody",!1),Yh=ma("tfoot",!1),Jh=function(r,e,n,t){var o=We(e.details),a=hh(r,S(o,function(i){return i.column})),u=a.length>0?a[0].cells.length-1:0;return ur(a,o[0].row,Math.min(o[0].column,u))},Qh=function(r,e,n,t){var o=wt(e),a=bh(r,o[0].row,o[o.length-1].row),u=a.length>0?a.length-1:0;return ur(a,Math.min(e[0].row,u),e[0].column)},Zh=function(r,e,n,t){var o=e.cells;Lh(o);var a=nh(r,e.bounds,n,t.merge(o));return bt(a,s.from(o[0]))},rb=function(r,e,n,t){var o=function(u,i){return Hc(u,i,n,t.unmerge(i))},a=Rr(e,o,r);return bt(a,s.from(e[0]))},eb=function(r,e,n,t){var o=function(c,l){var f=k.fromTable(c);return pn(f,l,!0)},a=o(e.clipboard,e.generators),u=As(e.row,e.column),i=dh(u,r,a,e.generators,n);return i.fold(function(){return bt(r,s.some(e.element))},function(c){return ur(c,e.row,e.column)})},yt=function(r,e,n){var t=cv(r,n.section),o=k.generate(t);return pn(o,e,!0)},nb=function(r,e,n,t){var o=rr(r).rows,a=e.cells[0].column,u=o[e.cells[0].row],i=yt(e.clipboard,e.generators,u),c=Vc(a,r,i,e.generators,n);return ur(c,e.cells[0].row,e.cells[0].column)},tb=function(r,e,n,t){var o=rr(r).rows,a=e.cells[e.cells.length-1].column+e.cells[e.cells.length-1].colspan,u=o[e.cells[0].row],i=yt(e.clipboard,e.generators,u),c=Vc(a,r,i,e.generators,n);return ur(c,e.cells[0].row,e.cells[0].column)},ob=function(r,e,n,t){var o=rr(r).rows,a=e.cells[0].row,u=o[a],i=yt(e.clipboard,e.generators,u),c=qc(a,r,i,e.generators,n);return ur(c,e.cells[0].row,e.cells[0].column)},ab=function(r,e,n,t){var o=rr(r).rows,a=e.cells[e.cells.length-1].row+e.cells[e.cells.length-1].rowspan,u=o[e.cells[0].row],i=yt(e.clipboard,e.generators,u),c=qc(a,r,i,e.generators,n);return ur(c,e.cells[0].row,e.cells[0].column)},ub=function(r,e){var n=k.fromTable(r),t=$r(n,e);return t.bind(function(o){var a=o[o.length-1],u=o[0].column,i=a.column+a.colspan,c=Xa(S(n.all,function(l){return U(l.cells,function(f){return f.column>=u&&f.column<i})}));return ta(c)}).getOr("")},ib=function(r,e){var n=k.fromTable(r),t=$r(n,e);return t.bind(ta).getOr("")},cb=function(r,e){var n=k.fromTable(r),t=$r(n,e);return t.bind(function(o){var a=o[o.length-1],u=o[0].row,i=a.row+a.rowspan,c=n.all.slice(u,i);return _p(c)}).getOr("")},da=function(r,e,n,t){return Ud(r,e,n,t.sizing)},ga=function(r,e,n,t){return jd(r,e,n,t.sizing,t.resize)},cl=function(r,e){return or(e,function(n){return n.column===0&&n.isLocked})},ll=function(r,e){return or(e,function(n){return n.column+n.colspan>=r.grid.columns&&n.isLocked})},fl=function(r,e){var n=bo(r),t=We(e);return br(t,function(o,a){var u=n[a.column],i=u.map(po).getOr(0);return o+i},0)},sl=function(r){return function(e,n){return $r(e,n).filter(function(t){var o=r?cl:ll;return!o(e,t)}).map(function(t){return{details:t,pixelDelta:fl(e,t)}})}},lb=function(r,e){return jr(r,e).map(function(n){return{details:n,pixelDelta:-fl(r,n)}})},vl=function(r){return function(e,n){return ca(e,n).filter(function(t){var o=r?cl:ll;return!o(e,t.cells)})}},pa=sr.transform("th"),Ct=sr.transform("td"),fb=Y(_h,$r,T,T,sr.modification),sb=Y(Hh,$r,T,T,sr.modification),vb=Y(zh,sl(!0),ga,T,sr.modification),mb=Y(Gh,sl(!1),ga,T,sr.modification),db=Y(Jh,lb,ga,il,sr.modification),gb=Y(Qh,$r,T,il,sr.modification),pb=Y(jh,jr,T,T,pa),hb=Y(Vh,jr,T,T,Ct),bb=Y(Kh,jr,T,T,pa),wb=Y(Xh,jr,T,T,Ct),yb=Y(Yh,jr,T,T,Ct),Cb=Y(Uh,jr,T,T,pa),Sb=Y(qh,jr,T,T,Ct),Rb=Y(Zh,Fc,da,T,sr.merging),Tb=Y(rb,_c,da,T,sr.merging),xb=Y(eb,Qp,da,T,sr.modification),Ob=Y(nb,vl(!0),T,T,sr.modification),kb=Y(tb,vl(!1),T,T,sr.modification),Db=Y(ob,ca,T,T,sr.modification),Ab=Y(ab,ca,T,T,sr.modification),$b=ub,Bb=ib,ml=cb,Pb=function(r,e,n){var t=function(er){return N(de(er))==="table"},o=function(er){return t(r)===!1||Fo(er).rows>1},a=function(er){return t(r)===!1||Fo(er).columns>1},u=Rc(r),i=Sc(r)?T:Wp,c=function(er){switch(yc(r)){case"section":return dn.section();case"sectionCells":return dn.sectionCells();case"cells":return dn.cells();default:return dn.getTableSectionType(er,"section")}},l=function(er,ja){return ja.cursor.fold(function(){var Dn=ve(er);return En(Dn).filter(Nr).map(function(qr){e.clear(er);var xr=r.dom.createRng();return xr.selectNode(qr.dom),r.selection.setRng(xr),X(qr,"data-mce-selected","1"),xr})},function(Dn){var qr=Lp(Dn),xr=r.dom.createRng();return xr.setStart(qr.element.dom,qr.offset),xr.setEnd(qr.element.dom,qr.offset),r.selection.setRng(xr),e.clear(er),s.some(xr)})},f=function(er,ja,Dn,qr,xr){return function(Kr,vS,Ua){Ua===void 0&&(Ua=!1),ge(Kr);var mS=qr(),dS=b.fromDom(r.getDoc()),gS=$o(Dn,dS,u),pS={sizing:Oc(r,Kr),resize:Sc(r)?Ji():No(),section:c(Kr)};return ja(Kr)?er(mS,Kr,vS,gS,pS).bind(function(Va){O(Va.newRows,function(An){gc(r,An.dom)}),O(Va.newCells,function(An){pc(r,An.dom)});var hS=l(Kr,Va);return Nr(Kr)&&(ge(Kr),Ua||Ar(r,Kr.dom,xr)),hS.map(function(An){return{rng:An,effect:xr}})}):s.none()}},v=f(gb,o,T,n,V),g=f(db,a,T,n,V),d=f(fb,I,T,n,V),m=f(sb,I,T,n,V),p=f(vb,I,i,n,V),h=f(mb,I,i,n,V),C=f(Rb,I,T,n,V),P=f(Tb,I,T,n,V),y=f(Ob,I,T,n,V),R=f(kb,I,T,n,V),$=f(Db,I,T,n,V),A=f(Ab,I,T,n,V),j=f(xb,I,T,n,mp),q=f(Cb,I,T,n,V),tr=f(Sb,I,T,n,V),E=f(pb,I,T,n,V),x=f(hb,I,T,n,V),B=f(bb,I,T,n,V),L=f(wb,I,T,n,V),W=f(yb,I,T,n,V),Vr=Bb,Tr=$b,Ve=ml;return{deleteRow:v,deleteColumn:g,insertRowsBefore:d,insertRowsAfter:m,insertColumnsBefore:p,insertColumnsAfter:h,mergeCells:C,unmergeCells:P,pasteColsBefore:y,pasteColsAfter:R,pasteRowsBefore:$,pasteRowsAfter:A,pasteCells:j,makeCellsHeader:q,unmakeCellsHeader:tr,makeColumnsHeader:E,unmakeColumnsHeader:x,makeRowsHeader:B,makeRowsBody:L,makeRowsFooter:W,getTableRowType:Ve,getTableCellType:Vr,getTableColType:Tr}},Eb={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Ib=function(){return b.fromTag("th")},Mb=function(){return b.fromTag("td")},Nb=function(){return b.fromTag("col")},Lb=function(r,e,n,t){for(var o=b.fromTag("tr"),a=0;a<r;a++){var u=t<e||a<n?Ib():Mb();a<n&&X(u,"scope","row"),t<e&&X(u,"scope","col"),z(u,b.fromTag("br")),z(o,u)}return o},Wb=function(r){var e=b.fromTag("colgroup");return gr(r,function(){return z(e,Nb())}),e},dl=function(r,e,n,t){return gr(r,function(o){return Lb(e,n,t,o)})},Fb=function(r,e,n,t,o,a){a===void 0&&(a=Eb);var u=b.fromTag("table"),i=o!=="cells";en(u,a.styles),rn(u,a.attributes),a.colGroups&&z(u,Wb(e));var c=Math.min(r,n);if(i&&n>0){var l=b.fromTag("thead");z(u,l);var f=o==="sectionCells"?c:0,v=dl(n,e,f,t);Wr(l,v)}var g=b.fromTag("tbody");z(u,g);var d=i?r-c:r,m=i?0:n,p=dl(d,e,m,t);return Wr(g,p),u},_b=function(r){return r.dom.innerHTML},Hb=function(r){var e=b.fromTag("div"),n=b.fromDom(r.dom.cloneNode(!0));return z(e,n),_b(e)},zb=function(r,e){r.selection.select(e.dom,!0),r.selection.collapse(!0)},Gb=function(r,e){Ze(e,"td,th").each(G(zb,r))},jb=function(r,e){O(kr(e,"tr"),function(n){gc(r,n.dom),O(kr(n,"th,td"),function(t){pc(r,t.dom)})})},Ub=function(r){return vr(r)&&r.indexOf("%")!==-1},gl=function(r,e,n,t,o){var a=Xo(r),u={styles:a,attributes:Ko(r),colGroups:xp(r)};return r.undoManager.ignore(function(){var i=Fb(n,e,o,t,yc(r),u);X(i,"data-mce-id","__mce");var c=Hb(i);r.insertContent(c),r.addVisual()}),Ze(de(r),'table[data-mce-id="__mce"]').map(function(i){return sn(r)?ea(i):mt(r)?kc(i):(vt(r)||Ub(a.width))&&vn(i),ge(i),_(i,"data-mce-id"),jb(r,i),Gb(r,i),i.dom}).getOr(null)},pl=function(r,e,n,t,o){t===void 0&&(t={});var a=function(c){return Wt(c)&&c>0};if(a(e)&&a(n)){var u=t.headerRows||0,i=t.headerColumns||0;return gl(r,n,e,i,u)}else return console.error(o),null},hl=function(r){return function(){return r().fold(function(){return[]},function(e){return S(e,function(n){return n.dom})})}},bl=function(r){return function(e){var n=e.length>0?s.some(Bo(e)):s.none();r(n)}},Vb=function(r){return function(e,n,t){t===void 0&&(t={});var o=pl(r,n,e,t,"Invalid values for insertTable - rows and columns values are required to insert a table.");return r.undoManager.add(),o}},qb=function(r,e,n,t){return{insertTable:Vb(r),setClipboardRows:bl(e.setRows),getClipboardRows:hl(e.getRows),setClipboardCols:bl(e.setColumns),getClipboardCols:hl(e.getColumns),resizeHandler:n,selectionTargets:t}},wl=function(r,e,n){var t=Lr(r,e,1);n===1||t<=1?_(r,e):X(r,e,Math.min(n,t))},Kb=function(r,e,n){if(k.hasColumns(r)){var t=U(k.justColumns(r),function(u){return u.column>=e&&u.column<n}),o=S(t,function(u){var i=$e(u.element);return wl(i,"span",n-e),i}),a=b.fromTag("colgroup");return Wr(a,o),[a]}else return[]},Xb=function(r,e,n){return S(r.all,function(t){var o=U(t.cells,function(i){return i.column>=e&&i.column<n}),a=S(o,function(i){var c=$e(i.element);return wl(c,"colspan",n-e),c}),u=b.fromTag("tr");return Wr(u,a),u})},Yb=function(r,e){var n=k.fromTable(r),t=jr(n,e);return t.map(function(o){var a=o[o.length-1],u=o[0].column,i=a.column+a.colspan,c=Kb(n,u,i),l=Xb(n,u,i);return Ke(Ke([],c,!0),l,!0)})},Jb=function(r,e,n){var t=k.fromTable(r),o=$r(t,e);return o.bind(function(a){var u=pn(t,n,!1),i=rr(u).rows,c=i.slice(a[0].row,a[a.length-1].row+a[a.length-1].rowspan),l=J(c,function(v){var g=U(v.cells,function(d){return!d.isLocked});return g.length>0?[D(D({},v),{cells:g})]:[]}),f=ht(l);return Qt(f.length>0,f)}).map(function(a){return Vp(a)})},yl=tinymce.util.Tools.resolve("tinymce.util.Tools"),St=function(r,e,n){var t=r.select("td,th",e),o,a=function(u,i){for(var c=0;c<i.length;c++){var l=r.getStyle(i[c],n);if(typeof u>"u"&&(u=l),u!==l)return""}return u};return a(o,t)},ha=function(r,e,n){n&&r.formatter.apply("align"+n,{},e)},Qb=function(r,e,n){n&&r.formatter.apply("valign"+n,{},e)},ba=function(r,e){yl.each("left center right".split(" "),function(n){r.formatter.remove("align"+n,{},e)})},Zb=function(r,e){yl.each("top middle bottom".split(" "),function(n){r.formatter.remove("valign"+n,{},e)})},wa=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],rw=function(r){return{value:r}},ew=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,nw=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,tw=function(r){return ew.test(r)||nw.test(r)},ow=function(r){return Jf(r,"#").toUpperCase()},aw=function(r){return tw(r)?s.some({value:ow(r)}):s.none()},ya=function(r){var e=r.toString(16);return(e.length===1?"0"+e:e).toUpperCase()},Cl=function(r){var e=ya(r.red)+ya(r.green)+ya(r.blue);return rw(e)},uw=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,iw=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Ca=function(r,e,n,t){return{red:r,green:e,blue:n,alpha:t}},Sl=function(r,e,n,t){var o=parseInt(r,10),a=parseInt(e,10),u=parseInt(n,10),i=parseFloat(t);return Ca(o,a,u,i)},cw=function(r){if(r==="transparent")return s.some(Ca(0,0,0,0));var e=uw.exec(r);if(e!==null)return s.some(Sl(e[1],e[2],e[3],"1"));var n=iw.exec(r);return n!==null?s.some(Sl(n[1],n[2],n[3],n[4])):s.none()},lw=function(r){return aw(r).orThunk(function(){return cw(r).map(Cl)}).getOrThunk(function(){var e=document.createElement("canvas");e.height=1,e.width=1;var n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.fillStyle="#FFFFFF",n.fillStyle=r,n.fillRect(0,0,1,1);var t=n.getImageData(0,0,1,1).data,o=t[0],a=t[1],u=t[2],i=t[3];return Cl(Ca(o,a,u,i))})},wn=function(r){var e=r,n=function(){return e},t=function(o){e=o};return{get:n,set:t}},Rl=function(r){var e=wn(s.none()),n=function(){return e.get().each(r)},t=function(){n(),e.set(s.none())},o=function(){return e.get().isSome()},a=function(){return e.get()},u=function(i){n(),e.set(s.some(i))};return{clear:t,isSet:o,get:a,set:u}},fw=function(){return Rl(function(r){return r.unbind()})},Sa=function(){var r=Rl(T),e=function(n){return r.get().each(n)};return D(D({},r),{on:e})},sw=function(r,e,n,t){return function(o){var a=fw(),u=rs(t),i=function(){var c=un(e),l=function(f){return r.formatter.match(n,{value:t},f.dom,u)};u?(o.setActive(!or(c,l)),a.set(r.formatter.formatChanged(n,function(f){return o.setActive(!f)},!0))):(o.setActive(hr(c,l)),a.set(r.formatter.formatChanged(n,o.setActive,!1,{value:t})))};return r.initialized?i():r.on("init",i),a.clear}},Ra=function(r){return Du(r,"menu")},yn=function(r){return S(r,function(e){var n=e.text||e.title;return Ra(e)?{text:n,items:yn(e.menu)}:{text:n,value:e.value}})},Ce=function(r,e,n,t,o){return S(n,function(a){var u=a.text||a.title;return Ra(a)?{type:"nestedmenuitem",text:u,getSubmenuItems:function(){return Ce(r,e,a.menu,t,o)}}:{text:u,type:"togglemenuitem",onAction:function(){return o(a.value)},onSetup:sw(r,e,t,a.value)}})},Fe=function(r,e){return function(n){var t;r.execCommand("mceTableApplyCellStyle",!1,(t={},t[e]=n,t))}},Cn=function(r){return J(r,function(e){return Ra(e)?[D(D({},e),{menu:Cn(e.menu)})]:jt(e.value)?[e]:[]})},Sn=function(r,e,n,t,o){return function(a){return a(Ce(r,e,n,t,o))}},Rt=function(r,e,n){var t=S(e,function(o){return{text:o.title,value:"#"+lw(o.value).value,type:"choiceitem"}});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:t.length>0?t:void 0,allowCustomColors:!1},onAction:function(o){var a,u=o.value==="remove"?"":o.value;r.execCommand("mceTableApplyCellStyle",!1,(a={},a[n]=u,a))}}]},Tl=function(r){return function(){var e=r.queryCommandValue("mceTableRowType"),n=e==="header"?"body":"header";r.execCommand("mceTableRowType",!1,{type:n})}},xl=function(r){return function(){var e=r.queryCommandValue("mceTableColType"),n=e==="th"?"td":"th";r.execCommand("mceTableColType",!1,{type:n})}},vw=function(r){var e=yn(Qo(r));return e.length>0?s.some({name:"class",type:"listbox",label:"Class",items:e}):s.none()},mw=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:wa}],Ol=function(r){return mw.concat(vw(r).toArray())},Ta=function(r,e){var n=[{text:"Select...",value:""}],t=[{name:"borderstyle",type:"listbox",label:"Border style",items:n.concat(yn(qo(r)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}],o={name:"borderwidth",type:"input",label:"Border width"},a=e==="cell"?[o].concat(t):t;return{title:"Advanced",name:"advanced",items:a}},kl=function(r){return function(e,n){var t=e.dom,o=function(i,c){(!r||c)&&t.setAttrib(n,i,c)},a=function(i,c){(!r||c)&&t.setStyle(n,i,c)},u=function(i,c){(!r||c)&&(c===""?e.formatter.remove(i,{value:null},n,!0):e.formatter.apply(i,{value:c},n))};return{setAttrib:o,setStyle:a,setFormat:u}}},Se={normal:kl(!1),ifTruthy:kl(!0)},Tt=function(r){return function(e){return In(e,"rgb")?r.toHex(e):e}},xa=function(r,e){var n=b.fromDom(e);return{borderwidth:re(n,"border-width").getOr(""),borderstyle:re(n,"border-style").getOr(""),bordercolor:re(n,"border-color").map(Tt(r)).getOr(""),backgroundcolor:re(n,"background-color").map(Tt(r)).getOr("")}},Dl=function(r){var e=r[0],n=r.slice(1);return O(n,function(t){O(Yr(e),function(o){cr(t,function(a,u){var i=e[o];i!==""&&o===u&&i!==a&&(e[o]="")})})}),e},Al=function(r,e,n,t){return pr(r,function(o){return!Df(n.formatter.matchNode(t,e+o))}).getOr("")},Oa=G(Al,["left","center","right"],"align"),dw=G(Al,["top","middle","bottom"],"valign"),gw=function(r,e){var n=Xo(r),t=Ko(r),o=function(f){return{borderstyle:Er(n,"border-style").getOr(""),bordercolor:Tt(f)(Er(n,"border-color").getOr("")),backgroundcolor:Tt(f)(Er(n,"background-color").getOr(""))}},a={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},u=function(){var f=n["border-width"];return ye(r)&&f?{border:f}:Er(t,"border").fold(function(){return{}},function(v){return{border:v}})},i=e?o(r.dom):{},c=function(){var f=Er(n,"border-spacing").or(Er(t,"cellspacing")).fold(function(){return{}},function(g){return{cellspacing:g}}),v=Er(n,"border-padding").or(Er(t,"cellpadding")).fold(function(){return{}},function(g){return{cellpadding:g}});return D(D({},f),v)},l=D(D(D(D(D(D({},a),n),t),i),u()),c());return l},pw=function(r){return H(b.fromDom(r)).map(function(e){var n={selection:Bo(r.cells)};return ml(e,n)}).getOr("")},hw=function(r,e,n){var t=function(i,c){var l=re(b.fromDom(c),"border-width");return ye(r)&&l.isSome()?l.getOr(""):i.getAttrib(c,"border")||St(r.dom,c,"border-width")||St(r.dom,c,"border")},o=r.dom,a=ye(r)?o.getStyle(e,"border-spacing")||o.getAttrib(e,"cellspacing"):o.getAttrib(e,"cellspacing")||o.getStyle(e,"border-spacing"),u=ye(r)?St(o,e,"padding")||o.getAttrib(e,"cellpadding"):o.getAttrib(e,"cellpadding")||St(o,e,"padding");return D({width:o.getStyle(e,"width")||o.getAttrib(e,"width"),height:o.getStyle(e,"height")||o.getAttrib(e,"height"),cellspacing:a,cellpadding:u,border:t(o,e),caption:!!o.select("caption",e)[0],class:o.getAttrib(e,"class",""),align:Oa(r,e)},n?xa(o,e):{})},bw=function(r,e,n){var t=r.dom;return D({height:t.getStyle(e,"height")||t.getAttrib(e,"height"),class:t.getAttrib(e,"class",""),type:pw(e),align:Oa(r,e)},n?xa(t,e):{})},ww=function(r,e,n,t){var o=r.dom,a=t.getOr(e),u=function(i,c){return o.getStyle(i,c)||o.getAttrib(i,c)};return D({width:u(a,"width"),height:u(e,"height"),scope:o.getAttrib(e,"scope"),celltype:vd(e),class:o.getAttrib(e,"class",""),halign:Oa(r,e),valign:dw(r,e)},n?xa(o,e):{})},$l=function(r,e){var n=k.fromTable(r),t=k.justCells(n),o=U(t,function(a){return or(e,function(u){return M(a.element,u)})});return S(o,function(a){return{element:a.element.dom,column:k.getColumnAt(n,a.column).map(function(u){return u.element.dom})}})},yw=function(r,e,n){r.setAttrib("scope",n.scope),r.setAttrib("class",n.class),r.setStyle("height",Dr(n.height)),e.setStyle("width",Dr(n.width))},Cw=function(r,e){r.setFormat("tablecellbackgroundcolor",e.backgroundcolor),r.setFormat("tablecellbordercolor",e.bordercolor),r.setFormat("tablecellborderstyle",e.borderstyle),r.setFormat("tablecellborderwidth",Dr(e.borderwidth))},Sw=function(r,e,n){var t=e.length===1;O(e,function(o){var a=o.element,u=t?Se.normal(r,a):Se.ifTruthy(r,a),i=o.column.map(function(c){return t?Se.normal(r,c):Se.ifTruthy(r,c)}).getOr(u);yw(u,i,n),Yo(r)&&Cw(u,n),t&&(ba(r,a),Zb(r,a)),n.halign&&ha(r,a,n.halign),n.valign&&Qb(r,a,n.valign)})},Rw=function(r,e){r.execCommand("mceTableCellType",!1,{type:e.celltype,no_events:!0})},Tw=function(r,e,n,t){var o=ke(t,function(a,u){return n[u]!==a});ue(o)>0&&e.length>=1&&H(e[0]).each(function(a){var u=$l(a,e),i=ue(ke(o,function(l,f){return f!=="scope"&&f!=="celltype"}))>0,c=ie(o,"celltype");(i||ie(o,"scope"))&&Sw(r,u,t),c&&Rw(r,t),Ar(r,a.dom,{structure:c,style:i})})},xw=function(r,e,n,t){var o=t.getData();t.close(),r.undoManager.transact(function(){Tw(r,e,n,o),r.focus()})},Ow=function(r,e){var n=H(e[0]).map(function(t){return S($l(t,e),function(o){return ww(r,o.element,Yo(r),o.column)})});return Dl(n.getOrDie())},kw=function(r,e){var n=un(e);if(n.length!==0){var t=Ow(r,n),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ol(r)},Ta(r,"cell")]},a={type:"panel",items:[{type:"grid",columns:2,items:Ol(r)}]};r.windowManager.open({title:"Cell Properties",size:"normal",body:Yo(r)?o:a,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:t,onSubmit:G(xw,r,n,t)})}},Dw=function(r){var e=yn(Rp(r));return e.length>0?s.some({name:"class",type:"listbox",label:"Class",items:e}):s.none()},Aw=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Bl=function(r){return Aw.concat(Dw(r).toArray())},$w=function(r,e){r.setAttrib("class",e.class),r.setStyle("height",Dr(e.height))},Bw=function(r,e){r.setStyle("background-color",e.backgroundcolor),r.setStyle("border-color",e.bordercolor),r.setStyle("border-style",e.borderstyle)},Pw=function(r,e,n,t){var o=e.length===1;O(e,function(a){var u=o?Se.normal(r,a):Se.ifTruthy(r,a);$w(u,n),Jo(r)&&Bw(u,n),n.align!==t.align&&(ba(r,a),ha(r,a,n.align))})},Ew=function(r,e){r.execCommand("mceTableRowType",!1,{type:e.type,no_events:!0})},Iw=function(r,e,n,t){var o=ke(t,function(i,c){return n[c]!==i});if(ue(o)>0){var a=ie(o,"type"),u=a?ue(o)>1:!0;u&&Pw(r,e,t,n),a&&Ew(r,t),H(b.fromDom(e[0])).each(function(i){return Ar(r,i.dom,{structure:a,style:u})})}},Mw=function(r,e,n,t){var o=t.getData();t.close(),r.undoManager.transact(function(){Iw(r,e,n,o),r.focus()})},Nw=function(r){var e=Ad(Ie(r),pe.selected);if(e.length!==0){var n=S(e,function(u){return bw(r,u.dom,Jo(r))}),t=Dl(n),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:Bl(r)},Ta(r,"row")]},a={type:"panel",items:[{type:"grid",columns:2,items:Bl(r)}]};r.windowManager.open({title:"Row Properties",size:"normal",body:Jo(r)?o:a,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:t,onSubmit:G(Mw,r,S(e,function(u){return u.dom}),t)})}},Lw=function(r,e,n){var t=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],a=Cp(r)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],u=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],i=e.length>0?[{type:"listbox",name:"class",label:"Class",items:e}]:[];return t.concat(o).concat(a).concat(u).concat(i)},ka=function(r,e,n,t){if(e.tagName==="TD"||e.tagName==="TH")vr(n)?r.setStyle(e,n,t):r.setStyle(e,n);else if(e.children)for(var o=0;o<e.children.length;o++)ka(r,e.children[o],n,t)},Ww=function(r,e,n){var t=r.dom,o={},a={};if(o.class=n.class,a.height=Dr(n.height),t.getAttrib(e,"width")&&!ye(r)?o.width=md(n.width):a.width=Dr(n.width),ye(r)?(a["border-width"]=Dr(n.border),a["border-spacing"]=Dr(n.cellspacing)):(o.border=n.border,o.cellpadding=n.cellpadding,o.cellspacing=n.cellspacing),ye(r)&&e.children)for(var u=0;u<e.children.length;u++)ka(t,e.children[u],{"border-width":Dr(n.border),padding:Dr(n.cellpadding)}),we(r)&&ka(t,e.children[u],{"border-color":n.bordercolor});we(r)&&(a["background-color"]=n.backgroundcolor,a["border-color"]=n.bordercolor,a["border-style"]=n.borderstyle),o.style=t.serializeStyle(D(D({},Xo(r)),a)),t.setAttribs(e,D(D({},Ko(r)),o))},Fw=function(r,e,n,t){var o=r.dom,a=t.getData(),u=ke(a,function(i,c){return n[c]!==i});t.close(),a.class===""&&delete a.class,r.undoManager.transact(function(){if(!e){var i=parseInt(a.cols,10)||1,c=parseInt(a.rows,10)||1;e=gl(r,i,c,0,0)}if(ue(u)>0){Ww(r,e,a);var l=o.select("caption",e)[0];(l&&!a.caption||!l&&a.caption)&&r.execCommand("mceTableToggleCaption"),a.align===""?ba(r,e):ha(r,e,a.align)}if(r.focus(),r.addVisual(),ue(u)>0){var f=ie(u,"caption"),v=f?ue(u)>1:!0;Ar(r,e,{structure:f,style:v})}})},Pl=function(r,e){var n=r.dom,t,o=gw(r,we(r));e===!1?(t=n.getParent(r.selection.getStart(),"table",r.getBody()),t?o=hw(r,t,we(r)):we(r)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor="")):(o.cols="1",o.rows="1",we(r)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""));var a=yn(Zo(r));a.length>0&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));var u={type:"grid",columns:2,items:Lw(r,a,e)},i=function(){return{type:"panel",items:[u]}},c=function(){return{type:"tabpanel",tabs:[{title:"General",name:"general",items:[u]},Ta(r,"table")]}},l=we(r)?c():i();r.windowManager.open({title:"Table Properties",size:"normal",body:l,onSubmit:G(Fw,r,t,o),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},Da=function(r){return Io(Ie(r),zr(r))},_w=function(r){return ot(Ie(r),zr(r))},Hw=function(r,e,n,t,o){var a=zr(r),u=function(){return Da(r).each(function(y){H(y,a).filter(Ft(a)).each(function(R){var $=b.fromText("");if(qn(R,$),fr(R),r.dom.isEmpty(r.getBody()))r.setContent(""),r.selection.setCursorLocation();else{var A=r.dom.createRng();A.setStart($.dom,0),A.setEnd($.dom,0),r.selection.setRng(A),r.nodeChanged()}})})},i=function(y){return Da(r).each(function(R){var $=mt(r)||sn(r)||vt(r);$||H(R,a).each(function(A){y==="relative"&&!nc(A)?vn(A):y==="fixed"&&!tc(A)?ea(A):y==="responsive"&&!oc(A)&&kc(A),ge(A),Ar(r,A.dom,V)})})},c=function(y){return H(y,a)},l=function(y){return _w(r).bind(function(R){return c(R).map(function($){return y($,R)})})},f=function(y,R){l(function($){r.formatter.toggle("tableclass",{value:R},$.dom),Ar(r,$.dom,st)})},v=function(y,R){l(function($){var A=un(t),j=hr(A,function(tr){return r.formatter.match("tablecellclass",{value:R},tr.dom)}),q=j?r.formatter.remove:r.formatter.apply;O(A,function(tr){return q("tablecellclass",{value:R},tr.dom)}),Ar(r,$.dom,st)})},g=function(){Da(r).each(function(y){H(y,a).each(function(R){Hn(R,"caption").fold(function(){var $=b.fromTag("caption");z($,b.fromText("Caption")),Dv(R,$,0),r.selection.setCursorLocation($.dom,0)},function($){Mr("caption")(y)&&Ru("td",R).each(function(A){return r.selection.setCursorLocation(A.dom,0)}),fr($)}),Ar(r,R.dom,V)})})},d=function(y){r.focus()},m=function(y,R){return R===void 0&&(R=!1),l(function($,A){var j=an(t,$,A);y($,j,R).each(d)})},p=function(){return l(function(y,R){var $=an(t,y,R),A=$o(T,b.fromDom(r.getDoc()),s.none());return Jb(y,$,A)})},h=function(){return l(function(y,R){var $=an(t,y,R);return Yb(y,$)})},C=function(y,R){return R().each(function($){var A=S($,function(j){return $e(j)});l(function(j,q){var tr=Gi(b.fromDom(r.getDoc())),E=kd(t,q,A,tr);y(j,E).each(d)})})},P=function(y){return function(R,$){return Er($,"type").each(function(A){m(y(A),$.no_events)})}};cr({mceTableSplitCells:function(){return m(e.unmergeCells)},mceTableMergeCells:function(){return m(e.mergeCells)},mceTableInsertRowBefore:function(){return m(e.insertRowsBefore)},mceTableInsertRowAfter:function(){return m(e.insertRowsAfter)},mceTableInsertColBefore:function(){return m(e.insertColumnsBefore)},mceTableInsertColAfter:function(){return m(e.insertColumnsAfter)},mceTableDeleteCol:function(){return m(e.deleteColumn)},mceTableDeleteRow:function(){return m(e.deleteRow)},mceTableCutCol:function(){return h().each(function(y){o.setColumns(y),m(e.deleteColumn)})},mceTableCutRow:function(){return p().each(function(y){o.setRows(y),m(e.deleteRow)})},mceTableCopyCol:function(){return h().each(function(y){return o.setColumns(y)})},mceTableCopyRow:function(){return p().each(function(y){return o.setRows(y)})},mceTablePasteColBefore:function(){return C(e.pasteColsBefore,o.getColumns)},mceTablePasteColAfter:function(){return C(e.pasteColsAfter,o.getColumns)},mceTablePasteRowBefore:function(){return C(e.pasteRowsBefore,o.getRows)},mceTablePasteRowAfter:function(){return C(e.pasteRowsAfter,o.getRows)},mceTableDelete:u,mceTableCellToggleClass:v,mceTableToggleClass:f,mceTableToggleCaption:g,mceTableSizingMode:function(y,R){return i(R)},mceTableCellType:P(function(y){return y==="th"?e.makeCellsHeader:e.unmakeCellsHeader}),mceTableColType:P(function(y){return y==="th"?e.makeColumnsHeader:e.unmakeColumnsHeader}),mceTableRowType:P(function(y){switch(y){case"header":return e.makeRowsHeader;case"footer":return e.makeRowsFooter;default:return e.makeRowsBody}})},function(y,R){return r.addCommand(R,y)}),cr({mceTableProps:G(Pl,r,!1),mceTableRowProps:G(Nw,r),mceTableCellProps:G(kw,r,t)},function(y,R){return r.addCommand(R,function(){return y()})}),r.addCommand("mceInsertTable",function(y,R){Te(R)&&Yr(R).length>0?pl(r,R.rows,R.columns,R.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):Pl(r,!0)}),r.addCommand("mceTableApplyCellStyle",function(y,R){var $=function(q){return"tablecell"+q.toLowerCase().replace("-","")};if(Te(R)){var A=un(t);if(A.length!==0){var j=ke(R,function(q,tr){return r.formatter.has($(tr))&&vr(q)});xs(j)||(cr(j,function(q,tr){O(A,function(E){Se.normal(r,E.dom).setFormat($(tr),q)})}),c(A[0]).each(function(q){return Ar(r,q.dom,st)}))}}})},zw=function(r,e,n){var t=zr(r),o=function(a){return ot(Ie(r)).bind(function(u){return H(u,t).map(function(i){var c=an(n,i,u);return a(i,c)})}).getOr("")};cr({mceTableRowType:function(){return o(e.getTableRowType)},mceTableCellType:function(){return o(e.getTableCellType)},mceTableColType:function(){return o(e.getTableColType)}},function(a,u){return r.addQueryValueHandler(u,a)})},Gw=function(){var r=Sa(),e=Sa();return{getRows:r.get,setRows:function(n){n.fold(r.clear,r.set),e.clear()},clearRows:r.clear,getColumns:e.get,setColumns:function(n){n.fold(e.clear,e.set),r.clear()},clearColumns:e.clear}},El={remove_similar:!0,inherit:!1},_e=D({selector:"td,th"},El),jw={tablecellbackgroundcolor:D({styles:{backgroundColor:"%value"}},_e),tablecellverticalalign:D({styles:{"vertical-align":"%value"}},_e),tablecellbordercolor:D({styles:{borderColor:"%value"}},_e),tablecellclass:D({classes:["%value"]},_e),tableclass:D({selector:"table",classes:["%value"]},El),tablecellborderstyle:D({styles:{borderStyle:"%value"}},_e),tablecellborderwidth:D({styles:{borderWidth:"%value"}},_e)},Uw=function(r){r.formatter.register(jw)},Il=Fr.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Vw=function(r){return r===void 0&&(r=void 0),Il.none(r)},Rn=D(D({},Il),{none:Vw}),Aa=function(r,e,n,t,o){o===void 0&&(o=I);var a=t===1;if(!a&&n<=0)return Rn.first(r[0]);if(a&&n>=r.length-1)return Rn.last(r[r.length-1]);var u=n+t,i=r[u];return o(i)?Rn.middle(e,i):Aa(r,e,u,t,o)},Ml=function(r,e){return H(r,e).bind(function(n){var t=ve(n),o=Pn(t,function(a){return M(r,a)});return o.map(function(a){return{index:a,all:t}})})},qw=function(r,e,n){var t=Ml(r,n);return t.fold(function(){return Rn.none(r)},function(o){return Aa(o.all,r,o.index,1,e)})},Kw=function(r,e,n){var t=Ml(r,n);return t.fold(function(){return Rn.none()},function(o){return Aa(o.all,r,o.index,-1,e)})},Xw=function(r,e,n,t){return{start:r,soffset:e,finish:n,foffset:t}},Tn={create:Xw},$a=Fr.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Yw=function(r,e,n,t){return r.fold(e,n,t)},Jw=function(r){return r.fold(F,F,F)},Qw=$a.before,Zw=$a.on,ry=$a.after,nr={before:Qw,on:Zw,after:ry,cata:Yw,getStart:Jw},xt=Fr.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ey=function(r){return xt.exact(r.start,r.soffset,r.finish,r.foffset)},ny=function(r){return r.match({domRange:function(e){return b.fromDom(e.startContainer)},relative:function(e,n){return nr.getStart(e)},exact:function(e,n,t,o){return e}})},ty=xt.domRange,oy=xt.relative,ay=xt.exact,uy=function(r){var e=ny(r);return Fs(e)},iy=Tn.create,te={domRange:ty,relative:oy,exact:ay,exactFromRange:ey,getWin:uy,range:iy},cy=function(r,e){var n=r.document.createRange();return n.selectNode(e.dom),n},ly=function(r,e){var n=r.document.createRange();return fy(n,e),n},fy=function(r,e){return r.selectNodeContents(e.dom)},sy=function(r,e){e.fold(function(n){r.setStartBefore(n.dom)},function(n,t){r.setStart(n.dom,t)},function(n){r.setStartAfter(n.dom)})},vy=function(r,e){e.fold(function(n){r.setEndBefore(n.dom)},function(n,t){r.setEnd(n.dom,t)},function(n){r.setEndAfter(n.dom)})},Nl=function(r,e,n){var t=r.document.createRange();return sy(t,e),vy(t,n),t},Ot=function(r,e,n,t,o){var a=r.document.createRange();return a.setStart(e.dom,n),a.setEnd(t.dom,o),a},my=function(r){return{left:r.left,top:r.top,right:r.right,bottom:r.bottom,width:r.width,height:r.height}},dy=function(r){var e=r.getClientRects(),n=e.length>0?e[0]:r.getBoundingClientRect();return n.width>0||n.height>0?s.some(n).map(my):s.none()},xn=Fr.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ll=function(r,e,n){return e(b.fromDom(n.startContainer),n.startOffset,b.fromDom(n.endContainer),n.endOffset)},gy=function(r,e){return e.match({domRange:function(n){return{ltr:w(n),rtl:s.none}},relative:function(n,t){return{ltr:xe(function(){return Nl(r,n,t)}),rtl:xe(function(){return s.some(Nl(r,t,n))})}},exact:function(n,t,o,a){return{ltr:xe(function(){return Ot(r,n,t,o,a)}),rtl:xe(function(){return s.some(Ot(r,o,a,n,t))})}}})},py=function(r,e){var n=e.ltr();if(n.collapsed){var t=e.rtl().filter(function(o){return o.collapsed===!1});return t.map(function(o){return xn.rtl(b.fromDom(o.endContainer),o.endOffset,b.fromDom(o.startContainer),o.startOffset)}).getOrThunk(function(){return Ll(r,xn.ltr,n)})}else return Ll(r,xn.ltr,n)},Ba=function(r,e){var n=gy(r,e);return py(r,n)},Pa=function(r,e){var n=Ba(r,e);return n.match({ltr:function(t,o,a,u){var i=r.document.createRange();return i.setStart(t.dom,o),i.setEnd(a.dom,u),i},rtl:function(t,o,a,u){var i=r.document.createRange();return i.setStart(a.dom,u),i.setEnd(t.dom,o),i}})};xn.ltr,xn.rtl;var hy=function(r,e,n,t,o){if(o===0)return 0;if(e===t)return o-1;for(var a=t,u=1;u<o;u++){var i=r(u),c=Math.abs(e-i.left);if(n<=i.bottom){if(n<i.top||c>a)return u-1;a=c}}return 0},Wl=function(r,e,n){return e>=r.left&&e<=r.right&&n>=r.top&&n<=r.bottom},by=function(r,e,n,t,o){var a=function(l){var f=r.dom.createRange();return f.setStart(e.dom,l),f.collapse(!0),f},u=function(l){var f=a(l);return f.getBoundingClientRect()},i=Kn(e).length,c=hy(u,n,t,o.right,i);return a(c)},wy=function(r,e,n,t){var o=r.dom.createRange();o.selectNode(e.dom);var a=o.getClientRects(),u=Or(a,function(i){return Wl(i,n,t)?s.some(i):s.none()});return u.map(function(i){return by(r,e,n,t,i)})},yy=function(r,e,n,t){var o=r.dom.createRange(),a=ar(e);return Or(a,function(u){return o.selectNode(u.dom),Wl(o.getBoundingClientRect(),n,t)?Fl(r,u,n,t):s.none()})},Fl=function(r,e,n,t){return Jr(e)?wy(r,e,n,t):yy(r,e,n,t)},Cy=function(r,e,n,t){var o=r.dom.createRange();o.selectNode(e.dom);var a=o.getBoundingClientRect(),u=Math.max(a.left,Math.min(a.right,n)),i=Math.max(a.top,Math.min(a.bottom,t));return Fl(r,e,u,i)},_l=!0,Sy=!1,Hl=function(r,e){return e-r.left<r.right-e?_l:Sy},zl=function(r,e,n){var t=r.dom.createRange();return t.selectNode(e.dom),t.collapse(n),t},Ry=function(r,e,n){var t=r.dom.createRange();t.selectNode(e.dom);var o=t.getBoundingClientRect(),a=Hl(o,n),u=a===_l?et:ko;return u(e).map(function(i){return zl(r,i,a)})},Ty=function(r,e,n){var t=e.dom.getBoundingClientRect(),o=Hl(t,n);return s.some(zl(r,e,o))},xy=function(r,e,n){var t=ar(e).length===0?Ty:Ry;return t(r,e,n)},Oy=function(r,e,n){var t,o;return s.from((o=(t=r.dom).caretPositionFromPoint)===null||o===void 0?void 0:o.call(t,e,n)).bind(function(a){if(a.offsetNode===null)return s.none();var u=r.dom.createRange();return u.setStart(a.offsetNode,a.offset),u.collapse(),s.some(u)})},ky=function(r,e,n){var t,o;return s.from((o=(t=r.dom).caretRangeFromPoint)===null||o===void 0?void 0:o.call(t,e,n))},Dy=function(r,e,n,t){var o=r.dom.createRange();o.selectNode(e.dom);var a=o.getBoundingClientRect(),u=Math.max(a.left,Math.min(a.right,n)),i=Math.max(a.top,Math.min(a.bottom,t));return Cy(r,e,u,i)},Ay=function(r,e,n){return b.fromPoint(r,e,n).bind(function(t){var o=function(){return xy(r,t,e)};return ar(t).length===0?o():Dy(r,t,e,n).orThunk(o)})},$y=function(){return document.caretPositionFromPoint?Oy:document.caretRangeFromPoint?ky:Ay}(),By=function(r,e,n){var t=b.fromDom(r.document);return $y(t,e,n).map(function(o){return Tn.create(b.fromDom(o.startContainer),o.startOffset,b.fromDom(o.endContainer),o.endOffset)})},kt=function(r,e){var n=N(r);return n==="input"?nr.after(r):K(["br","img"],n)?e===0?nr.before(r):nr.after(r):nr.on(r,e)},Gl=function(r,e){var n=r.fold(nr.before,kt,nr.after),t=e.fold(nr.before,kt,nr.after);return te.relative(n,t)},Ea=function(r,e,n,t){var o=kt(r,e),a=kt(n,t);return te.relative(o,a)},Py=function(r){return r.match({domRange:function(e){var n=b.fromDom(e.startContainer),t=b.fromDom(e.endContainer);return Ea(n,e.startOffset,t,e.endOffset)},relative:Gl,exact:Ea})},Ey=function(r,e,n,t){var o=Ln(r),a=o.dom.createRange();return a.setStart(r.dom,e),a.setEnd(n.dom,t),a},Iy=function(r,e,n,t){var o=Ey(r,e,n,t),a=M(r,n)&&e===t;return o.collapsed&&!a},Dt=function(r){return s.from(r.getSelection())},jl=function(r,e){Dt(r).each(function(n){n.removeAllRanges(),n.addRange(e)})},Ia=function(r,e,n,t,o){var a=Ot(r,e,n,t,o);jl(r,a)},My=function(r,e,n,t,o,a){e.collapse(n.dom,t),e.extend(o.dom,a)},Ul=function(r,e){return Ba(r,e).match({ltr:function(n,t,o,a){Ia(r,n,t,o,a)},rtl:function(n,t,o,a){Dt(r).each(function(u){if(u.setBaseAndExtent)u.setBaseAndExtent(n.dom,t,o.dom,a);else if(u.extend)try{My(r,u,n,t,o,a)}catch{Ia(r,o,a,n,t)}else Ia(r,o,a,n,t)})}})},Vl=function(r,e,n,t,o){var a=Ea(e,n,t,o);Ul(r,a)},ql=function(r,e,n){var t=Gl(e,n);Ul(r,t)},Ny=function(r){var e=te.getWin(r).dom,n=function(o,a,u,i){return Ot(e,o,a,u,i)},t=Py(r);return Ba(e,t).match({ltr:n,rtl:n})},Kl=function(r){if(r.rangeCount>0){var e=r.getRangeAt(0),n=r.getRangeAt(r.rangeCount-1);return s.some(Tn.create(b.fromDom(e.startContainer),e.startOffset,b.fromDom(n.endContainer),n.endOffset))}else return s.none()},Ly=function(r){if(r.anchorNode===null||r.focusNode===null)return Kl(r);var e=b.fromDom(r.anchorNode),n=b.fromDom(r.focusNode);return Iy(e,r.anchorOffset,n,r.focusOffset)?s.some(Tn.create(e,r.anchorOffset,n,r.focusOffset)):Kl(r)},Xl=function(r,e,n){n===void 0&&(n=!0);var t=n?ly:cy,o=t(r,e);jl(r,o)},Wy=function(r){return Dt(r).filter(function(e){return e.rangeCount>0}).bind(Ly)},Yl=function(r){return Wy(r).map(function(e){return te.exact(e.start,e.soffset,e.finish,e.foffset)})},Fy=function(r,e){var n=Pa(r,e);return dy(n)},_y=function(r,e,n){return By(r,e,n)},Hy=function(r){Dt(r).each(function(e){return e.removeAllRanges()})},zy=tinymce.util.Tools.resolve("tinymce.util.VK"),Jl=function(r,e,n){return Ql(r,e,qw(n,ct))},Gy=function(r,e,n){return Ql(r,e,Kw(n,ct))},jy=function(r,e){var n=te.exact(e,0,e,0);return Ny(n)},Ql=function(r,e,n){return n.fold(s.none,s.none,function(t,o){return et(o).map(function(a){return jy(r,a)})},function(t){return r.execCommand("mceTableInsertRowAfter"),Jl(r,e,t)})},Uy=["table","li","dl"],Vy=function(r,e,n){if(r.keyCode===zy.TAB){var t=de(e),o=function(i){var c=N(i);return M(i,t)||K(Uy,c)},a=e.selection.getRng(),u=b.fromDom(r.shiftKey?a.startContainer:a.endContainer);eo(u,o).each(function(i){r.preventDefault(),H(i,o).each(n.clear),e.selection.collapse(r.shiftKey);var c=r.shiftKey?Gy:Jl,l=c(e,o,i);l.each(function(f){e.selection.setRng(f)})})}},qy=function(r,e){return{selection:r,kill:e}},He={create:qy},Ky=function(r,e,n,t){return{start:nr.on(r,e),finish:nr.on(n,t)}},Zl={create:Ky},rf=function(r,e){var n=Pa(r,e);return Tn.create(b.fromDom(n.startContainer),n.startOffset,b.fromDom(n.endContainer),n.endOffset)},At=Zl.create,Xy=function(r,e,n,t,o,a,u){return M(n,o)&&t===a?s.none():Q(n,"td,th",e).bind(function(i){return Q(o,"td,th",e).bind(function(c){return ef(r,e,i,c,u)})})},ef=function(r,e,n,t,o){return M(n,t)?s.none():Yn(n,t,e).bind(function(a){var u=a.boxes.getOr([]);return u.length>1?(o(r,u,a.start,a.finish),s.some(He.create(s.some(At(n,0,n,ne(n))),!0))):s.none()})},Yy=function(r,e,n,t,o){var a=function(u){return o.clearBeforeUpdate(n),o.selectRange(n,u.boxes,u.start,u.finish),u.boxes};return qv(t,r,e,o.firstSelectedSelector,o.lastSelectedSelector).map(a)},Ma=function(r,e){return{item:r,mode:e}},nf=function(r,e,n,t){return t===void 0&&(t=ze),r.property().parent(e).map(function(o){return Ma(o,t)})},ze=function(r,e,n,t){return t===void 0&&(t=On),n.sibling(r,e).map(function(o){return Ma(o,t)})},On=function(r,e,n,t){t===void 0&&(t=On);var o=r.property().children(e),a=n.first(o);return a.map(function(u){return Ma(u,t)})},Jy=[{current:nf,next:ze,fallback:s.none()},{current:ze,next:On,fallback:s.some(nf)},{current:On,next:On,fallback:s.some(ze)}],tf=function(r,e,n,t,o){o===void 0&&(o=Jy);var a=pr(o,function(u){return u.current===n});return a.bind(function(u){return u.current(r,e,t,u.next).orThunk(function(){return u.fallback.bind(function(i){return tf(r,e,i,t)})})})},Qy=function(){var r=function(n,t){return n.query().prevSibling(t)},e=function(n){return n.length>0?s.some(n[n.length-1]):s.none()};return{sibling:r,first:e}},Zy=function(){var r=function(n,t){return n.query().nextSibling(t)},e=function(n){return n.length>0?s.some(n[0]):s.none()};return{sibling:r,first:e}},of={left:Qy,right:Zy},Na=function(r,e,n,t,o,a){var u=tf(r,e,t,o);return u.bind(function(i){return a(i.item)?s.none():n(i.item)?s.some(i.item):Na(r,i.item,n,i.mode,o,a)})},rC=function(r,e,n,t){return Na(r,e,n,ze,of.left(),t)},eC=function(r,e,n,t){return Na(r,e,n,ze,of.right(),t)},af=function(r){return function(e){return r.property().children(e).length===0}},nC=function(r,e,n){return uf(r,e,af(r),n)},tC=function(r,e,n){return cf(r,e,af(r),n)},uf=rC,cf=eC,$t=Xn(),lf=function(r,e){return nC($t,r,e)},ff=function(r,e){return tC($t,r,e)},oC=function(r,e,n){return uf($t,r,e,n)},aC=function(r,e,n){return cf($t,r,e,n)},uC=function(r,e,n){return Qe(r,e,n).isSome()},Bt=Fr.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),iC=function(r,e,n){var t=r.getRect(e),o=r.getRect(n);return o.right>t.left&&o.left<t.right},cC=function(r){return Q(r,"tr")},lC=function(r,e,n,t,o,a,u){return Q(t,"td,th",u).bind(function(i){return Q(e,"td,th",u).map(function(c){return M(i,c)?M(t,i)&&ne(i)===o?a(c):Bt.none("in same cell"):fo(cC,[i,c]).fold(function(){return iC(r,c,i)?Bt.success():a(c)},function(l){return a(c)})})}).getOr(Bt.none("default"))},fC=function(r,e,n,t,o){return r.fold(e,n,t,o)},Ge=D(D({},Bt),{verify:lC,cata:fC}),sC=function(r,e,n,t){return{parent:r,children:e,element:n,index:t}},vC=function(r){return le(r).bind(function(e){var n=ar(e);return mC(n,r).map(function(t){return sC(e,n,r,t)})})},mC=function(r,e){return Pn(r,G(M,e))},La=function(r){return N(r)==="br"},Wa=function(r,e,n){return e(r,n).bind(function(t){return Jr(t)&&Kn(t).trim().length===0?Wa(t,e,n):s.some(t)})},dC=function(r,e,n){return n.traverse(e).orThunk(function(){return Wa(e,n.gather,r)}).map(n.relative)},gC=function(r,e){return Fn(r,e).filter(La).orThunk(function(){return Fn(r,e-1).filter(La)})},pC=function(r,e,n,t){return gC(e,n).bind(function(o){return t.traverse(o).fold(function(){return Wa(o,t.gather,r).map(t.relative)},function(a){return vC(a).map(function(u){return nr.on(u.parent,u.index)})})})},hC=function(r,e,n,t){var o=La(e)?dC(r,e,t):pC(r,e,n,t);return o.map(function(a){return{start:a,finish:a}})},bC=function(r){return Ge.cata(r,function(e){return s.none()},function(){return s.none()},function(e){return s.some(mn(e,0))},function(e){return s.some(mn(e,ne(e)))})},Pt=function(r,e){return{left:r.left,top:r.top+e,right:r.right,bottom:r.bottom+e}},Et=function(r,e){return{left:r.left,top:r.top-e,right:r.right,bottom:r.bottom-e}},sf=function(r,e,n){return{left:r.left+e,top:r.top+n,right:r.right+e,bottom:r.bottom+n}},wC=function(r){return r.top},yC=function(r){return r.bottom},CC=function(r,e,n){return n>=0&&n<ne(e)?r.getRangedRect(e,n,e,n+1):n>0?r.getRangedRect(e,n-1,e,n):s.none()},It=function(r){return{left:r.left,top:r.top,right:r.right,bottom:r.bottom}},vf=function(r,e){return s.some(r.getRect(e))},mf=function(r,e,n){return Ir(e)?vf(r,e).map(It):Jr(e)?CC(r,e,n).map(It):s.none()},df=function(r,e){return Ir(e)?vf(r,e).map(It):Jr(e)?r.getRangedRect(e,0,e,ne(e)).map(It):s.none()},Ur=5,SC=100,Br=Fr.generate([{none:[]},{retry:["caret"]}]),RC=function(r,e){return r.left<e.left||Math.abs(e.right-r.left)<1||r.left>e.right},gf=function(r,e,n){return Qs(e,va).fold(ir,function(t){return df(r,t).exists(function(o){return RC(n,o)})})},TC=function(r,e,n,t,o){var a=Pt(o,Ur);return Math.abs(n.bottom-t.bottom)<1||n.top>o.bottom?Br.retry(a):n.top===o.bottom?Br.retry(Pt(o,1)):gf(r,e,o)?Br.retry(sf(a,Ur,0)):Br.none()},xC=function(r,e,n,t,o){var a=Et(o,Ur);return Math.abs(n.top-t.top)<1||n.bottom<o.top?Br.retry(a):n.bottom===o.top?Br.retry(Et(o,1)):gf(r,e,o)?Br.retry(sf(a,Ur,0)):Br.none()},OC={point:wC,adjuster:xC,move:Et,gather:lf},kC={point:yC,adjuster:TC,move:Pt,gather:ff},DC=function(r,e,n){return r.elementFromPoint(e,n).filter(function(t){return N(t)==="table"}).isSome()},AC=function(r,e,n,t,o){return Fa(r,e,n,e.move(t,Ur),o)},Fa=function(r,e,n,t,o){return o===0?s.some(t):DC(r,t.left,e.point(t))?AC(r,e,n,t,o-1):r.situsFromPoint(t.left,e.point(t)).bind(function(a){return a.start.fold(s.none,function(u){return df(r,u).bind(function(i){return e.adjuster(r,u,i,n,t).fold(s.none,function(c){return Fa(r,e,n,c,o-1)})}).orThunk(function(){return s.some(t)})},s.none)})},$C=function(r,e){return r.situsFromPoint(e.left,e.bottom+Ur)},BC=function(r,e){return r.situsFromPoint(e.left,e.top-Ur)},PC=function(r,e,n){return r.point(e)>n.getInnerHeight()?s.some(r.point(e)-n.getInnerHeight()):r.point(e)<0?s.some(-r.point(e)):s.none()},pf=function(r,e,n){var t=r.move(n,Ur),o=Fa(e,r,n,t,SC).getOr(t);return PC(r,o,e).fold(function(){return e.situsFromPoint(o.left,r.point(o))},function(a){return e.scrollBy(0,a),e.situsFromPoint(o.left,r.point(o)-a)})},kn={tryUp:G(pf,OC),tryDown:G(pf,kC),ieTryUp:BC,ieTryDown:$C,getJumpSize:w(Ur)},EC=20,IC=function(r,e,n){return r.getSelection().bind(function(t){return hC(e,t.finish,t.foffset,n).fold(function(){return s.some(mn(t.finish,t.foffset))},function(o){var a=r.fromSitus(o),u=Ge.verify(r,t.finish,t.foffset,a.finish,a.foffset,n.failure,e);return bC(u)})})},_a=function(r,e,n,t,o,a){return a===0?s.none():MC(r,e,n,t,o).bind(function(u){var i=r.fromSitus(u),c=Ge.verify(r,n,t,i.finish,i.foffset,o.failure,e);return Ge.cata(c,function(){return s.none()},function(){return s.some(u)},function(l){return M(n,l)&&t===0?hf(r,n,t,Et,o):_a(r,e,l,0,o,a-1)},function(l){return M(n,l)&&t===ne(l)?hf(r,n,t,Pt,o):_a(r,e,l,ne(l),o,a-1)})})},hf=function(r,e,n,t,o){return mf(r,e,n).bind(function(a){return bf(r,o,t(a,kn.getJumpSize()))})},bf=function(r,e,n){var t=Oe().browser;return t.isChrome()||t.isSafari()||t.isFirefox()||t.isEdge()?e.otherRetry(r,n):t.isIE()?e.ieRetry(r,n):s.none()},MC=function(r,e,n,t,o){return mf(r,n,t).bind(function(a){return bf(r,o,a)})},NC=function(r,e,n){return IC(r,e,n).bind(function(t){return _a(r,e,t.element,t.offset,n,EC).map(r.fromSitus)})},LC=function(r,e){return uC(r,function(n){return le(n).exists(function(t){return M(t,e)})})},wf=function(r,e,n,t,o){return Q(t,"td,th",e).bind(function(a){return Q(a,"table",e).bind(function(u){return LC(o,u)?NC(r,e,n).bind(function(i){return Q(i.finish,"td,th",e).map(function(c){return{start:a,finish:c,range:i}})}):s.none()})})},yf=function(r,e,n,t,o,a){return Oe().browser.isIE()?s.none():a(t,e).orThunk(function(){return wf(r,e,n,t,o).map(function(u){var i=u.range;return He.create(s.some(At(i.start,i.soffset,i.finish,i.foffset)),!0)})})},WC=function(r,e){return Q(r,"tr",e).bind(function(n){return Q(n,"table",e).bind(function(t){var o=kr(t,"tr");return M(n,o[0])?oC(t,function(a){return ko(a).isSome()},e).map(function(a){var u=ne(a);return He.create(s.some(At(a,u,a,u)),!0)}):s.none()})})},FC=function(r,e){return Q(r,"tr",e).bind(function(n){return Q(n,"table",e).bind(function(t){var o=kr(t,"tr");return M(n,o[o.length-1])?aC(t,function(a){return et(a).isSome()},e).map(function(a){return He.create(s.some(At(a,0,a,0)),!0)}):s.none()})})},Cf=function(r,e,n,t,o,a,u){return wf(r,n,t,o,a).bind(function(i){return ef(e,n,i.start,i.finish,u)})},Sf=function(r,e){return Q(r,"td,th",e)},_C=function(r,e,n,t){var o=Sa(),a=o.clear,u=function(f){o.on(function(v){t.clearBeforeUpdate(e),Sf(f.target,n).each(function(g){Yn(v,g,n).each(function(d){var m=d.boxes.getOr([]);if(m.length===1){var p=m[0],h=lc(p)==="false",C=Jt(cc(f.target),p,M);h&&C&&(t.selectRange(e,m,p,p),r.selectContents(p))}else m.length>1&&(t.selectRange(e,m,d.start,d.finish),r.selectContents(g))})})})},i=function(f){t.clear(e),Sf(f.target,n).each(o.set)},c=function(f){u(f)},l=function(f){u(f),a()};return{clearstate:a,mousedown:i,mouseover:c,mouseup:l}},Rf={traverse:Wn,gather:ff,relative:nr.before,otherRetry:kn.tryDown,ieRetry:kn.ieTryDown,failure:Ge.failedDown},Tf={traverse:Pu,gather:lf,relative:nr.before,otherRetry:kn.tryUp,ieRetry:kn.ieTryUp,failure:Ge.failedUp},je=function(r){return function(e){return e===r}},Ha=je(38),Mt=je(40),Nt=function(r){return r>=37&&r<=40},HC={isBackward:je(37),isForward:je(39)},zC={isBackward:je(39),isForward:je(37)},GC=function(r){var e=r!==void 0?r.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,t=e.body.scrollTop||e.documentElement.scrollTop;return Hr(n,t)},jC=function(r,e,n){var t=n!==void 0?n.dom:document,o=t.defaultView;o&&o.scrollBy(r,e)},za=function(r){var e=function(h,C){return b.fromPoint(b.fromDom(r.document),h,C)},n=function(h){return h.dom.getBoundingClientRect()},t=function(h,C,P,y){var R=te.exact(h,C,P,y);return Fy(r,R)},o=function(){return Yl(r).map(function(h){return rf(r,h)})},a=function(h){var C=te.relative(h.start,h.finish);return rf(r,C)},u=function(h,C){return _y(r,h,C).map(function(P){return Zl.create(P.start,P.soffset,P.finish,P.foffset)})},i=function(){Hy(r)},c=function(h){h===void 0&&(h=!1),Yl(r).each(function(C){return C.fold(function(P){return P.collapse(h)},function(P,y){var R=h?P:y;ql(r,R,R)},function(P,y,R,$){var A=h?P:R,j=h?y:$;Vl(r,A,j,A,j)})})},l=function(h){Xl(r,h,!1)},f=function(h){Xl(r,h)},v=function(h){Vl(r,h.start,h.soffset,h.finish,h.foffset)},g=function(h,C){ql(r,h,C)},d=function(){return r.innerHeight},m=function(){var h=GC(b.fromDom(r.document));return h.top},p=function(h,C){jC(h,C,b.fromDom(r.document))};return{elementFromPoint:e,getRect:n,getRangedRect:t,getSelection:o,fromSitus:a,situsFromPoint:u,clearSelection:i,collapseSelection:c,setSelection:v,setRelativeSelection:g,selectNode:l,selectContents:f,getInnerHeight:d,getScrollY:m,scrollBy:p}},Ue=function(r,e){return{rows:r,cols:e}},UC=function(r,e,n,t){var o=za(r),a=_C(o,e,n,t);return{clearstate:a.clearstate,mousedown:a.mousedown,mouseover:a.mouseover,mouseup:a.mouseup}},VC=function(r,e,n,t){var o=za(r),a=function(){return t.clear(e),s.none()},u=function(c,l,f,v,g,d){var m=c.raw,p=m.which,h=m.shiftKey===!0,C=vo(e,t.selectedSelector).fold(function(){return Nt(p)&&!h&&t.clearBeforeUpdate(e),Mt(p)&&h?G(Cf,o,e,n,Rf,v,l,t.selectRange):Ha(p)&&h?G(Cf,o,e,n,Tf,v,l,t.selectRange):Mt(p)?G(yf,o,n,Rf,v,l,FC):Ha(p)?G(yf,o,n,Tf,v,l,WC):s.none},function(P){var y=function(R){return function(){var $=Or(R,function(A){return Yy(A.rows,A.cols,e,P,t)});return $.fold(function(){return ti(e,t.firstSelectedSelector,t.lastSelectedSelector).map(function(A){var j=Mt(p)||d.isForward(p)?nr.after:nr.before;return o.setRelativeSelection(nr.on(A.first,0),j(A.table)),t.clear(e),He.create(s.none(),!0)})},function(A){return s.some(He.create(s.none(),!0))})}};return Mt(p)&&h?y([Ue(1,0)]):Ha(p)&&h?y([Ue(-1,0)]):d.isBackward(p)&&h?y([Ue(0,-1),Ue(-1,0)]):d.isForward(p)&&h?y([Ue(0,1),Ue(1,0)]):Nt(p)&&!h?a:s.none});return C()},i=function(c,l,f,v,g){return vo(e,t.selectedSelector).fold(function(){var d=c.raw,m=d.which,p=d.shiftKey===!0;return p&&Nt(m)?Xy(e,n,l,f,v,g,t.selectRange):s.none()},s.none)};return{keydown:u,keyup:i}},qC=function(r,e,n,t){var o=za(r);return function(a,u){t.clearBeforeUpdate(e),Yn(a,u,n).each(function(i){var c=i.boxes.getOr([]);t.selectRange(e,c,i.start,i.finish),o.selectContents(u),o.collapseSelection()})}},KC=function(r,e){O(e,function(n){Ng(r,n)})},XC=function(r){return function(e){Gr(e,r)}},YC=function(r){return function(e){KC(e,r)}},JC=function(r){var e=XC(r.selected),n=YC([r.selected,r.lastSelected,r.firstSelected]),t=function(a){var u=kr(a,r.selectedSelector);O(u,n)},o=function(a,u,i,c){t(a),O(u,e),Gr(i,r.firstSelected),Gr(c,r.lastSelected)};return{clearBeforeUpdate:t,clear:t,selectRange:o,selectedSelector:r.selectedSelector,firstSelectedSelector:r.firstSelectedSelector,lastSelectedSelector:r.lastSelectedSelector}},QC=function(r,e,n){var t=function(c){_(c,r.selected),_(c,r.firstSelected),_(c,r.lastSelected)},o=function(c){X(c,r.selected,"1")},a=function(c){u(c),n()},u=function(c){var l=kr(c,r.selectedSelector+","+r.firstSelectedSelector+","+r.lastSelectedSelector);O(l,t)},i=function(c,l,f,v){a(c),O(l,o),X(f,r.firstSelected,"1"),X(v,r.lastSelected,"1"),e(l,f,v)};return{clearBeforeUpdate:u,clear:a,selectRange:i,selectedSelector:r.selectedSelector,firstSelectedSelector:r.firstSelectedSelector,lastSelectedSelector:r.lastSelectedSelector}},ZC={byClass:JC,byAttr:QC},rS=function(r,e){var n=r.slice(0,e[e.length-1].row+1),t=ht(n);return J(t,function(o){var a=o.cells.slice(0,e[e.length-1].column+1);return S(a,function(u){return u.element})})},eS=function(r,e){var n=r.slice(e[0].row+e[0].rowspan-1,r.length),t=ht(n);return J(t,function(o){var a=o.cells.slice(e[0].column+e[0].colspan-1,o.cells.length);return S(a,function(u){return u.element})})},nS=function(r,e,n){var t=k.fromTable(r),o=$r(t,e);return o.map(function(a){var u=pn(t,n,!1),i=rS(u,a),c=eS(u,a);return{upOrLeftCells:i,downOrRightCells:c}})},tS=tinymce.util.Tools.resolve("tinymce.Env"),Ga=function(r){return zo(b.fromDom(r.target),"ephox-snooker-resizer-bar")===!1};function oS(r,e,n){var t=function(u,i,c){n.targets().each(function(l){var f=H(i);f.each(function(v){var g=Rc(r),d=$o(T,b.fromDom(r.getDoc()),g),m=nS(v,l,d);sp(r,u,i,c,m)})})},o=function(){return vp(r)},a=ZC.byAttr(pe,t,o);return r.on("init",function(u){var i=r.getWin(),c=de(r),l=zr(r),f=function(){var E=r.selection,x=b.fromDom(E.getStart()),B=b.fromDom(E.getEnd()),L=fo(H,[x,B]);L.fold(function(){return a.clear(c)},T)},v=UC(i,c,l,a),g=VC(i,c,l,a),d=qC(i,c,l,a),m=function(E){return E.raw.shiftKey===!0};r.on("TableSelectorChange",function(E){return d(E.start,E.finish)});var p=function(E,x){m(E)&&(x.kill&&E.kill(),x.selection.each(function(B){var L=te.relative(B.start,B.finish),W=Pa(i,L);r.selection.setRng(W)}))},h=function(E){var x=fn(E);if(x.raw.shiftKey&&Nt(x.raw.which)){var B=r.selection.getRng(),L=b.fromDom(B.startContainer),W=b.fromDom(B.endContainer);g.keyup(x,L,B.startOffset,W,B.endOffset).each(function(Vr){p(x,Vr)})}},C=function(E){var x=fn(E);e().each(function(Tr){return Tr.hideBars()});var B=r.selection.getRng(),L=b.fromDom(B.startContainer),W=b.fromDom(B.endContainer),Vr=pi(HC,zC)(b.fromDom(r.selection.getStart()));g.keydown(x,L,B.startOffset,W,B.endOffset,Vr).each(function(Tr){p(x,Tr)}),e().each(function(Tr){return Tr.showBars()})},P=function(E){return E.button===0},y=function(E){return E.buttons===void 0||tS.browser.isEdge()&&E.buttons===0?!0:(E.buttons&1)!==0},R=function(E){v.clearstate()},$=function(E){P(E)&&Ga(E)&&v.mousedown(fn(E))},A=function(E){y(E)&&Ga(E)&&v.mouseover(fn(E))},j=function(E){P(E)&&Ga(E)&&v.mouseup(fn(E))},q=function(){var E=wn(b.fromDom(c)),x=wn(0),B=function(L){var W=b.fromDom(L.target);if(N(W)==="td"||N(W)==="th"){var Vr=E.get(),Tr=x.get();M(Vr,W)&&L.timeStamp-Tr<300&&(L.preventDefault(),d(W,W))}E.set(W),x.set(L.timeStamp)};return{touchEnd:B}},tr=q();r.on("dragstart",R),r.on("mousedown",$),r.on("mouseover",A),r.on("mouseup",j),r.on("touchend",tr.touchEnd),r.on("keyup",h),r.on("keydown",C),r.on("NodeChange",f)}),{clear:a.clear}}var aS=function(r,e){return Hn(r,e).isSome()},uS=function(r,e){var n=wn(s.none()),t=wn([]),o=s.none(),a=Mr("caption"),u=function(x){return o.forall(function(B){return!B[x]})},i=function(){return Io(Ie(r),zr(r))},c=function(){return Io(hd(r),zr(r))},l=function(){return i().bind(function(x){return tv(Fu(H(x),c().bind(H),function(B,L){return M(B,L)?a(x)?s.some(xd(x)):s.some(an(e,B,x)):s.none()}))})},f=function(x){var B=H(x.element);return B.map(function(L){var W=k.fromTable(L),Vr=$r(W,x).getOr([]),Tr=br(Vr,function(Ve,er){return er.isLocked&&(Ve.onAny=!0,er.column===0?Ve.onFirst=!0:er.column+er.colspan>=W.grid.columns&&(Ve.onLast=!0)),Ve},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Fc(W,x).isSome(),unmergeable:_c(W,x).isSome(),locked:Tr}})},v=function(){n.set(xe(l)()),o=n.get().bind(f),O(t.get(),function(x){return x()})},g=function(x){return x(),t.set(t.get().concat([x])),function(){t.set(U(t.get(),function(B){return B!==x}))}},d=function(x,B){return g(function(){return n.get().fold(function(){x.setDisabled(!0)},function(L){x.setDisabled(B(L))})})},m=function(x,B,L){return g(function(){return n.get().fold(function(){x.setDisabled(!0),x.setActive(!1)},function(W){x.setDisabled(B(W)),x.setActive(L(W))})})},p=function(x){return o.exists(function(B){return B.locked[x]})},h=function(x){return d(x,function(B){return!1})},C=function(x){return d(x,function(B){return a(B.element)})},P=function(x){return function(B){return d(B,function(L){return a(L.element)||p(x)})}},y=function(x){return function(B){return d(B,function(L){return a(L.element)||x().isNone()})}},R=function(x,B){return function(L){return d(L,function(W){return a(W.element)||x().isNone()||p(B)})}},$=function(x){return d(x,function(B){return u("mergeable")})},A=function(x){return d(x,function(B){return u("unmergeable")})},j=function(x){return m(x,ir,function(B){var L=H(B.element,zr(r));return L.exists(function(W){return aS(W,"caption")})})},q=function(x,B){return function(L){return m(L,function(W){return a(W.element)},function(){return r.queryCommandValue(x)===B})}},tr=q("mceTableRowType","header"),E=q("mceTableColType","th");return r.on("NodeChange ExecCommand TableSelectorChange",v),{onSetupTable:h,onSetupCellOrRow:C,onSetupColumn:P,onSetupPasteable:y,onSetupPasteableColumn:R,onSetupMergeable:$,onSetupUnmergeable:A,resetTargets:v,onSetupTableWithCaption:j,onSetupTableRowHeaders:tr,onSetupTableColumnHeaders:E,targets:n.get}},iS=function(r,e,n,t){r.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(i){return i("inserttable | cell row column | advtablesort | tableprops deletetable")}});var o=function(i){return function(){return r.execCommand(i)}};r.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:o("mceTableProps"),icon:"table",onSetup:n.onSetupTable}),r.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:o("mceTableDelete"),icon:"table-delete-table",onSetup:n.onSetupTable}),r.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:o("mceTableCellProps"),icon:"table-cell-properties",onSetup:n.onSetupCellOrRow}),r.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:o("mceTableMergeCells"),icon:"table-merge-cells",onSetup:n.onSetupMergeable}),r.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:o("mceTableSplitCells"),icon:"table-split-cells",onSetup:n.onSetupUnmergeable}),r.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:o("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:n.onSetupCellOrRow}),r.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:o("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:n.onSetupCellOrRow}),r.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:o("mceTableDeleteRow"),icon:"table-delete-row",onSetup:n.onSetupCellOrRow}),r.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:o("mceTableRowProps"),icon:"table-row-properties",onSetup:n.onSetupCellOrRow}),r.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:o("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:n.onSetupColumn("onFirst")}),r.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:o("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:n.onSetupColumn("onLast")}),r.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:o("mceTableDeleteCol"),icon:"table-delete-column",onSetup:n.onSetupColumn("onAny")}),r.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:n.onSetupCellOrRow}),r.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:n.onSetupCellOrRow}),r.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:n.onSetupPasteable(t.getRows)}),r.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:n.onSetupPasteable(t.getRows)}),r.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:n.onSetupColumn("onAny")}),r.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:n.onSetupColumn("onAny")}),r.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:n.onSetupPasteableColumn(t.getColumns,"onFirst")}),r.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:n.onSetupPasteableColumn(t.getColumns,"onLast")}),r.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:o("mceInsertTable"),icon:"table"});var a=Cn(Zo(r));a.length!==0&&r.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Sn(r,e,a,"tableclass",function(i){return r.execCommand("mceTableToggleClass",!1,i)}),onSetup:n.onSetupTable});var u=Cn(Qo(r));u.length!==0&&r.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Sn(r,e,u,"tablecellclass",function(i){return r.execCommand("mceTableCellToggleClass",!1,i)}),onSetup:n.onSetupCellOrRow}),r.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Sn(r,e,wa,"tablecellverticalalign",Fe(r,"vertical-align")),onSetup:n.onSetupCellOrRow}),r.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Sn(r,e,wc(r),"tablecellborderwidth",Fe(r,"border-width")),onSetup:n.onSetupCellOrRow}),r.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Sn(r,e,qo(r),"tablecellborderstyle",Fe(r,"border-style")),onSetup:n.onSetupCellOrRow}),r.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:o("mceTableToggleCaption"),icon:"table-caption",onSetup:n.onSetupTableWithCaption}),r.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(i){return i(Rt(r,Tc(r),"background-color"))},onSetup:n.onSetupCellOrRow}),r.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(i){return i(Rt(r,xc(r),"border-color"))},onSetup:n.onSetupCellOrRow}),r.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:Tl(r),onSetup:n.onSetupTableRowHeaders}),r.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:xl(r),onSetup:n.onSetupTableColumnHeaders})},cS=function(r){var e=function(t){return r.dom.is(t,"table")&&r.getBody().contains(t)},n=Tp(r);n.length>0&&r.ui.registry.addContextToolbar("table",{predicate:e,items:n,scope:"node",position:"node"})},lS=function(r,e,n,t){var o=function(d){return function(){return r.execCommand(d)}},a=function(d){r.execCommand("mceInsertTable",!1,{rows:d.numRows,columns:d.numColumns})},u={text:"Table properties",onSetup:n.onSetupTable,onAction:o("mceTableProps")},i={text:"Delete table",icon:"table-delete-table",onSetup:n.onSetupTable,onAction:o("mceTableDelete")};r.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:o("mceTableInsertRowBefore"),onSetup:n.onSetupCellOrRow}),r.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:o("mceTableInsertRowAfter"),onSetup:n.onSetupCellOrRow}),r.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:o("mceTableDeleteRow"),onSetup:n.onSetupCellOrRow}),r.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:o("mceTableRowProps"),onSetup:n.onSetupCellOrRow}),r.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:n.onSetupCellOrRow}),r.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:n.onSetupCellOrRow}),r.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:n.onSetupPasteable(t.getRows)}),r.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:n.onSetupPasteable(t.getRows)});var c={type:"nestedmenuitem",text:"Row",getSubmenuItems:w("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};r.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:o("mceTableInsertColBefore"),onSetup:n.onSetupColumn("onFirst")}),r.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:o("mceTableInsertColAfter"),onSetup:n.onSetupColumn("onLast")}),r.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:o("mceTableDeleteCol"),onSetup:n.onSetupColumn("onAny")}),r.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:n.onSetupColumn("onAny")}),r.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:n.onSetupColumn("onAny")}),r.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:n.onSetupPasteableColumn(t.getColumns,"onFirst")}),r.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:n.onSetupPasteableColumn(t.getColumns,"onLast")});var l={type:"nestedmenuitem",text:"Column",getSubmenuItems:w("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};r.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:o("mceTableCellProps"),onSetup:n.onSetupCellOrRow}),r.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:o("mceTableMergeCells"),onSetup:n.onSetupMergeable}),r.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:o("mceTableSplitCells"),onSetup:n.onSetupUnmergeable});var f={type:"nestedmenuitem",text:"Cell",getSubmenuItems:w("tablecellprops tablemergecells tablesplitcells")};Sp(r)===!1?r.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTable")}):r.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:a}]}}),r.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTable")}),r.ui.registry.addMenuItem("tableprops",u),r.ui.registry.addMenuItem("deletetable",i),r.ui.registry.addNestedMenuItem("row",c),r.ui.registry.addNestedMenuItem("column",l),r.ui.registry.addNestedMenuItem("cell",f),r.ui.registry.addContextMenu("table",{update:function(){return n.resetTargets(),n.targets().fold(w(""),function(d){return N(d.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}});var v=Cn(Zo(r));v.length!==0&&r.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return Ce(r,e,v,"tableclass",function(d){return r.execCommand("mceTableToggleClass",!1,d)})},onSetup:n.onSetupTable});var g=Cn(Qo(r));g.length!==0&&r.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return Ce(r,e,g,"tablecellclass",function(d){return r.execCommand("mceTableCellToggleClass",!1,d)})},onSetup:n.onSetupCellOrRow}),r.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return Ce(r,e,wa,"tablecellverticalalign",Fe(r,"vertical-align"))},onSetup:n.onSetupCellOrRow}),r.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return Ce(r,e,wc(r),"tablecellborderwidth",Fe(r,"border-width"))},onSetup:n.onSetupCellOrRow}),r.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return Ce(r,e,qo(r),"tablecellborderstyle",Fe(r,"border-style"))},onSetup:n.onSetupCellOrRow}),r.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:o("mceTableToggleCaption"),onSetup:n.onSetupTableWithCaption}),r.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return Rt(r,Tc(r),"background-color")},onSetup:n.onSetupCellOrRow}),r.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return Rt(r,xc(r),"border-color")},onSetup:n.onSetupCellOrRow}),r.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:Tl(r),onSetup:n.onSetupTableRowHeaders}),r.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:xl(r),onSetup:n.onSetupTableColumnHeaders})},fS=function(r){var e=Zv(function(){return de(r)},function(){return ot(Ie(r),zr(r))},pe.selectedSelector),n=uS(r,e),t=Ip(r),o=oS(r,t.lazyResize,n),a=Pb(r,o,t.lazyWire),u=Gw();return Hw(r,a,o,e,u),zw(r,a,e),Ed(r,e,a),lS(r,e,n,u),iS(r,e,n,u),cS(r),r.on("PreInit",function(){r.serializer.addTempAttr(pe.firstSelected),r.serializer.addTempAttr(pe.lastSelected),Uw(r)}),yp(r)&&r.on("keydown",function(i){Vy(i,r,o)}),r.on("remove",function(){t.destroy()}),qb(r,u,t,n)};function sS(){rm.add("table",fS)}sS()})();const wS=bS({__proto__:null,default:xf},[xf]);export{wS as i};
