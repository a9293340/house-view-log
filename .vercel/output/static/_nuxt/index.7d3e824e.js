function z(i,l){for(var u=0;u<l.length;u++){const a=l[u];if(typeof a!="string"&&!Array.isArray(a)){for(const r in a)if(r!=="default"&&!(r in i)){const o=Object.getOwnPropertyDescriptor(a,r);o&&Object.defineProperty(i,r,o.get?o:{enumerable:!0,get:()=>a[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}var d={};(function(){var i=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),u=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=function(n){return n.getParam("allow_html_in_named_anchor",!1,"boolean")},r="a:not([href])",o=function(n){return!n},s=function(n){var e=n.getAttribute("id")||n.getAttribute("name");return e||""},h=function(n){return n&&n.nodeName.toLowerCase()==="a"},f=function(n){return h(n)&&!n.getAttribute("href")&&s(n)!==""},g=function(n){return f(n)&&!n.firstChild},p=function(n){var e=n.dom;l(e).walk(n.selection.getRng(),function(t){u.each(t,function(c){g(c)&&e.remove(c,!1)})})},A=function(n){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(n)},m=function(n){return n.dom.getParent(n.selection.getStart(),r)},b=function(n){var e=m(n);return e?s(e):""},y=function(n,e){n.undoManager.transact(function(){a(n)||n.selection.collapse(!0),n.selection.isCollapsed()?n.insertContent(n.dom.createHTML("a",{id:e})):(p(n),n.formatter.remove("namedAnchor",null,null,!0),n.formatter.apply("namedAnchor",{value:e}),n.addVisual())})},N=function(n,e,t){t.removeAttribute("name"),t.id=e,n.addVisual(),n.undoManager.add()},_=function(n,e){var t=m(n);t?N(n,e,t):y(n,e),n.focus()},C=function(n,e){return A(e)?(_(n,e),!0):(n.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1)},w=function(n){var e=b(n);n.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:e},onSubmit:function(t){C(n,t.getData().id)&&t.close()}})},I=function(n){n.addCommand("mceAnchor",function(){w(n)})},P=function(n){return n&&o(n.attr("href"))&&!o(n.attr("id")||n.attr("name"))},S=function(n){return P(n)&&!n.firstChild},v=function(n){return function(e){for(var t=0;t<e.length;t++){var c=e[t];S(c)&&c.attr("contenteditable",n)}}},x=function(n){n.on("PreInit",function(){n.parser.addNodeFilter("a",v("false")),n.serializer.addNodeFilter("a",v(null))})},M=function(n){n.formatter.register("namedAnchor",{inline:"a",selector:r,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:function(e,t,c){return f(e)}})},T=function(n){n.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:function(){return n.execCommand("mceAnchor")},onSetup:function(e){return n.selection.selectorChangedWithUnbind("a:not([href])",e.setActive).unbind}}),n.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:function(){return n.execCommand("mceAnchor")}})};function k(){i.add("anchor",function(n){x(n),I(n),T(n),n.on("PreInit",function(){M(n)})})}k()})();const O=z({__proto__:null,default:d},[d]);export{O as i};
