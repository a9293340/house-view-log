function wn(E,B){for(var d=0;d<B.length;d++){const F=B[d];if(typeof F!="string"&&!Array.isArray(F)){for(const h in F)if(h!=="default"&&!(h in E)){const x=Object.getOwnPropertyDescriptor(F,h);x&&Object.defineProperty(E,h,x.get?x:{enumerable:!0,get:()=>F[h]})}}}return Object.freeze(Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}))}var pe={};(function(){var E=function(e){var n=e,t=function(){return n},r=function(u){n=u};return{get:t,set:r}},B=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=function(){return d=Object.assign||function(n){for(var t,r=1,u=arguments.length;r<u;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},d.apply(this,arguments)},F=function(e){var n=typeof e;return e===null?"null":n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},h=function(e){return function(n){return F(n)===e}},x=function(e){return function(n){return typeof n===e}},he=h("string"),Fe=h("array"),ye=x("boolean"),Ae=x("number"),q=function(){},y=function(e){return function(){return e}},Ee=function(e){return e},I=y(!1),b=y(!0),xe="[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",be=y(xe),O=function(){return R},R=function(){var e=function(r){return r()},n=Ee,t={fold:function(r,u){return r()},isSome:I,isNone:b,getOr:n,getOrThunk:e,getOrDie:function(r){throw new Error(r||"error: getOrDie called on none.")},getOrNull:y(null),getOrUndefined:y(void 0),or:n,orThunk:e,map:O,each:q,bind:O,exists:I,forall:b,filter:function(){return O()},toArray:function(){return[]},toString:y("none()")};return t}(),_=function(e){var n=y(e),t=function(){return u},r=function(a){return a(e)},u={fold:function(a,o){return o(e)},isSome:b,isNone:I,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:t,orThunk:t,map:function(a){return _(a(e))},each:function(a){a(e)},bind:r,exists:r,forall:r,filter:function(a){return a(e)?u:R},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return u},we=function(e){return e==null?R:_(e)},A={some:_,none:O,from:we},G=be,j=tinymce.util.Tools.resolve("tinymce.Env"),w=tinymce.util.Tools.resolve("tinymce.util.Tools"),Ce=Array.prototype.slice,De=Array.prototype.push,N=function(e,n){for(var t=e.length,r=new Array(t),u=0;u<t;u++){var a=e[u];r[u]=n(a,u)}return r},K=function(e,n){for(var t=0,r=e.length;t<r;t++){var u=e[t];n(u,t)}},X=function(e,n){for(var t=e.length-1;t>=0;t--){var r=e[t];n(r,t)}},Te=function(e,n){if(e.length===0)return[];for(var t=n(e[0]),r=[],u=[],a=0,o=e.length;a<o;a++){var i=e[a],f=n(i);f!==t&&(r.push(u),u=[]),t=f,u.push(i)}return u.length!==0&&r.push(u),r},Be=function(e,n,t){return K(e,function(r,u){t=n(t,r,u)}),t},Oe=function(e){for(var n=[],t=0,r=e.length;t<r;++t){if(!Fe(e[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+e);De.apply(n,e[t])}return n},M=function(e,n){return Oe(N(e,n))},Ne=function(e,n){var t=Ce.call(e,0);return t.sort(n),t},Me=Object.hasOwnProperty,J=function(e,n){return Me.call(e,n)};typeof window<"u"||Function("return this;")();var Pe=9,ke=11,$e=1,Ie=3,Re=function(e){return e.dom.nodeType},_e=function(e){return function(n){return Re(n)===e}},je=_e(Ie),He=function(e,n,t){if(he(t)||ye(t)||Ae(t))e.setAttribute(n,t+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",t,":: Element ",e),new Error("Attribute value was not simple")},Ve=function(e,n,t){He(e.dom,n,t)},We=function(e,n,t){return(e.compareDocumentPosition(n)&t)!==0},Le=function(e,n){return We(e,n,Node.DOCUMENT_POSITION_PRECEDING)},Ue=function(e,n){var t=n||document,r=t.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return C(r.childNodes[0])},ze=function(e,n){var t=n||document,r=t.createElement(e);return C(r)},qe=function(e,n){var t=n||document,r=t.createTextNode(e);return C(r)},C=function(e){if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},Ge=function(e,n,t){return A.from(e.dom.elementFromPoint(n,t)).map(C)},p={fromHtml:Ue,fromTag:ze,fromText:qe,fromDom:C,fromPoint:Ge},Ke=function(e){return e.nodeType!==$e&&e.nodeType!==Pe&&e.nodeType!==ke||e.childElementCount===0},Xe=function(e,n){var t=n===void 0?document:n.dom;return Ke(t)?[]:N(t.querySelectorAll(e),p.fromDom)},Je=function(e){return A.from(e.dom.parentNode).map(p.fromDom)},Qe=function(e){return N(e.dom.childNodes,p.fromDom)},Q=function(e,n){return{element:e,offset:n}},Ye=function(e,n){var t=Qe(e);return t.length>0&&n<t.length?Q(t[n],0):Q(e,n)},Ze=function(e,n){var t=Je(e);t.each(function(r){r.dom.insertBefore(n.dom,e.dom)})},Se=function(e,n){e.dom.appendChild(n.dom)},Y=function(e,n){Ze(e,n),Se(n,e)},en=function(e,n){var t=function(a){if(!e(a))throw new Error("Can only get "+n+" value of a "+n+" node");return r(a).getOr("")},r=function(a){return e(a)?A.from(a.dom.nodeValue):A.none()},u=function(a,o){if(!e(a))throw new Error("Can only set raw "+n+" value of a "+n+" node");a.dom.nodeValue=o};return{get:t,getOption:r,set:u}},nn=en(je,"text"),Z=function(e){return nn.get(e)},tn=function(e,n){return Xe(n,e)},S=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ee=function(e,n){return e.isBlock(n)||J(e.schema.getShortEndedElements(),n.nodeName)},ne=function(e,n){return e.getContentEditable(n)==="false"},rn=function(e,n){return e.getContentEditable(n)==="true"&&e.getContentEditableParent(n.parentNode)==="false"},te=function(e,n){return!e.isBlock(n)&&J(e.schema.getWhiteSpaceElements(),n.nodeName)},un=function(e,n){return ee(e,n)||ne(e,n)||te(e,n)||rn(e,n)},an=function(e){return e.nodeType===3},re=function(){return{sOffset:0,fOffset:0,elements:[]}},ue=function(e,n){return Ye(p.fromDom(e),n)},ae=function(e,n,t,r,u,a){a===void 0&&(a=!0);for(var o=a?n(!1):t;o;){var i=ne(e,o);if(i||te(e,o)){var f=i?r.cef(o):r.boundary(o);if(f)break;o=n(!0);continue}else if(ee(e,o)){if(r.boundary(o))break}else an(o)&&r.text(o);if(o===u)break;o=n(!1)}},oe=function(e,n,t,r,u){if(!un(e,t)){var a=e.getParent(r,e.isBlock),o=new S(t,a),i=u?o.next.bind(o):o.prev.bind(o);ae(e,i,t,{boundary:b,cef:b,text:function(f){u?n.fOffset+=f.length:n.sOffset+=f.length,n.elements.push(p.fromDom(f))}})}},ie=function(e,n,t,r,u,a){a===void 0&&(a=!0);var o=new S(t,n),i=[],f=re();oe(e,f,t,n,!1);var l=function(){return f.elements.length>0&&(i.push(f),f=re()),!1};return ae(e,o.next.bind(o),t,{boundary:l,cef:function(c){return l(),u&&i.push.apply(i,u.cef(c)),!1},text:function(c){f.elements.push(p.fromDom(c)),u&&u.text(c,f)}},r,a),r&&oe(e,f,r,n,!0),l(),i},on=function(e,n){var t=ue(n.startContainer,n.startOffset),r=t.element.dom,u=ue(n.endContainer,n.endOffset),a=u.element.dom;return ie(e,n.commonAncestorContainer,r,a,{text:function(o,i){o===a?i.fOffset+=o.length-u.offset:o===r&&(i.sOffset+=t.offset)},cef:function(o){var i=M(tn(p.fromDom(o),"*[contenteditable=true]"),function(f){var l=f.dom;return ie(e,l,l)});return Ne(i,function(f,l){return Le(f.elements[0].dom,l.elements[0].dom)?1:-1})}},!1)},fe=function(e,n){return n.collapsed?[]:on(e,n)},se=function(e,n){var t=e.createRng();return t.selectNode(n),fe(e,t)},fn=function(e,n){return M(n,function(t){return se(e,t)})},sn=function(e,n,t,r){t===void 0&&(t=0),r===void 0&&(r=e.length);var u=n.regex;u.lastIndex=t;for(var a=[],o;o=u.exec(e);){var i=o[n.matchIndex],f=o.index+o[0].indexOf(i),l=f+i.length;if(l>r)break;a.push({start:f,finish:l}),u.lastIndex=l}return a},ln=function(e,n){var t=Be(e,function(r,u){var a=Z(u),o=r.last,i=o+a.length,f=M(n,function(l,c){return l.start<i&&l.finish>o?[{element:u,start:Math.max(o,l.start)-o,finish:Math.min(i,l.finish)-o,matchId:c}]:[]});return{results:r.results.concat(f),last:i}},{results:[],last:0}).results;return Te(t,function(r){return r.matchId})},le=function(e,n){return M(n,function(t){var r=t.elements,u=N(r,Z).join(""),a=sn(u,e,t.sOffset,u.length-t.fOffset);return ln(r,a)})},ce=function(e,n){X(e,function(t,r){X(t,function(u){var a=p.fromDom(n.cloneNode(!1));Ve(a,"data-mce-index",r);var o=u.element.dom;if(o.length===u.finish&&u.start===0)Y(u.element,a);else{o.length!==u.finish&&o.splitText(u.finish);var i=o.splitText(u.start);Y(p.fromDom(i),a)}})})},cn=function(e,n,t,r){var u=se(e,t),a=le(n,u);return ce(a,r),a.length},vn=function(e,n,t,r){var u=t.getBookmark(),a=e.select("td[data-mce-selected],th[data-mce-selected]"),o=a.length>0?fn(e,a):fe(e,t.getRng()),i=le(n,o);return ce(i,r),t.moveToBookmark(u),i.length},D=function(e){var n=e.getAttribute("data-mce-index");return typeof n=="number"?""+n:n},dn=function(e,n,t,r){var u=e.dom.create("span",{"data-mce-bogus":1});u.className="mce-match-marker";var a=e.getBody();return k(e,n,!1),r?vn(e.dom,t,e.selection,u):cn(e.dom,t,a,u)},ve=function(e){var n=e.parentNode;e.firstChild&&n.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},H=function(e,n){var t=[],r=w.toArray(e.getBody().getElementsByTagName("span"));if(r.length)for(var u=0;u<r.length;u++){var a=D(r[u]);a===null||!a.length||a===n.toString()&&t.push(r[u])}return t},V=function(e,n,t){var r=n.get(),u=r.index,a=e.dom;t=t!==!1,t?u+1===r.count?u=0:u++:u-1===-1?u=r.count-1:u--,a.removeClass(H(e,r.index),"mce-match-marker-selected");var o=H(e,u);return o.length?(a.addClass(H(e,u),"mce-match-marker-selected"),e.selection.scrollIntoView(o[0]),u):-1},de=function(e,n){var t=n.parentNode;e.remove(n),e.isEmpty(t)&&e.remove(t)},mn=function(e,n){var t=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]"),r="("+t+")";return n?"(?:^|\\s|"+G()+")"+r+("(?=$|\\s|"+G()+")"):r},me=function(e,n,t,r,u,a){var o=e.selection,i=mn(t,u),f=o.isForward(),l={regex:new RegExp(i,r?"g":"gi"),matchIndex:1},c=dn(e,n,l,a);if(j.browser.isSafari()&&o.setRng(o.getRng(),f),c){var m=V(e,n,!0);n.set({index:m,count:c,text:t,matchCase:r,wholeWord:u,inSelection:a})}return c},P=function(e,n){var t=V(e,n,!0);n.set(d(d({},n.get()),{index:t}))},W=function(e,n){var t=V(e,n,!1);n.set(d(d({},n.get()),{index:t}))},gn=function(e){var n=D(e);return n!==null&&n.length>0},L=function(e,n,t,r,u){var a=n.get(),o=a.index,i,f=o;r=r!==!1;for(var l=e.getBody(),c=w.grep(w.toArray(l.getElementsByTagName("span")),gn),m=0;m<c.length;m++){var z=D(c[m]),T=i=parseInt(z,10);if(u||T===a.index){for(t.length?(c[m].firstChild.nodeValue=t,ve(c[m])):de(e.dom,c[m]);c[++m];)if(T=parseInt(D(c[m]),10),T===i)de(e.dom,c[m]);else{m--;break}r&&f--}else i>o&&c[m].setAttribute("data-mce-index",String(i-1))}return n.set(d(d({},a),{count:u?0:a.count-1,index:f})),r?P(e,n):W(e,n),!u&&n.get().count>0},k=function(e,n,t){for(var r,u,a=n.get(),o=w.toArray(e.getBody().getElementsByTagName("span")),i=0;i<o.length;i++){var f=D(o[i]);f!==null&&f.length&&(f===a.index.toString()&&(r||(r=o[i].firstChild),u=o[i].firstChild),ve(o[i]))}if(n.set(d(d({},a),{index:-1,count:0,text:""})),r&&u){var l=e.dom.createRng();return l.setStart(r,0),l.setEnd(u,u.data.length),t!==!1&&e.selection.setRng(l),l}},pn=function(e,n){return n.get().count>1},hn=function(e,n){return n.get().count>1},Fn=function(e,n){var t=function(i){return k(e,n,i)},r=function(i,f,l,c){return c===void 0&&(c=!1),me(e,n,i,f,l,c)},u=function(){return P(e,n)},a=function(){return W(e,n)},o=function(i,f,l){return L(e,n,i,f,l)};return{done:t,find:r,next:u,prev:a,replace:o}},yn=function(e){var n=E(A.none()),t=function(){return n.get().each(e)},r=function(){t(),n.set(A.none())},u=function(){return n.get().isSome()},a=function(){return n.get()},o=function(i){t(),n.set(A.some(i))};return{clear:r,isSet:u,get:a,set:o}},An=function(){var e=yn(q),n=function(t){return e.get().each(t)};return d(d({},e),{on:n})},ge=function(e,n){var t=An();e.undoManager.add();var r=w.trim(e.selection.getContent({format:"text"})),u=function(s){var v=pn(e,n)?s.enable:s.disable;v("next");var g=hn(e,n)?s.enable:s.disable;g("prev")},a=function(s){var v=s.getData(),g=n.get();n.set(d(d({},g),{matchCase:v.matchcase,wholeWord:v.wholewords,inSelection:v.inselection}))},o=function(s,v){var g=["replace","replaceall","prev","next"],$=v?s.disable:s.enable;K(g,$)},i=function(s){e.windowManager.alert("Could not find the specified string.",function(){s.focus("findtext")})},f=function(s,v){j.browser.isSafari()&&j.deviceType.isTouch()&&(v==="find"||v==="replace"||v==="replaceall")&&s.focus(v)},l=function(s){k(e,n,!1),o(s,!0),u(s)},c=function(s){var v=s.getData(),g=n.get();if(!v.findtext.length){l(s);return}if(g.text===v.findtext&&g.matchCase===v.matchcase&&g.wholeWord===v.wholewords)P(e,n);else{var $=me(e,n,v.findtext,v.matchcase,v.wholewords,v.inselection);$<=0&&i(s),o(s,$===0)}u(s)},m=n.get(),z={findtext:r,replacetext:"",wholewords:m.wholeWord,matchcase:m.matchCase,inselection:m.inSelection},T={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",disabled:!0,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",disabled:!0,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",disabled:!0},{type:"custom",name:"replaceall",text:"Replace all",disabled:!0}],initialData:z,onChange:function(s,v){v.name==="findtext"&&n.get().count>0&&l(s)},onAction:function(s,v){var g=s.getData();switch(v.name){case"find":c(s);break;case"replace":L(e,n,g.replacetext)?u(s):l(s);break;case"replaceall":L(e,n,g.replacetext,!0,!0),l(s);break;case"prev":W(e,n),u(s);break;case"next":P(e,n),u(s);break;case"matchcase":case"wholewords":case"inselection":a(s),l(s);break}f(s,v.name)},onSubmit:function(s){c(s),f(s,"find")},onClose:function(){e.focus(),k(e,n),e.undoManager.add()}};t.set(e.windowManager.open(T,{inline:"toolbar"}))},En=function(e,n){e.addCommand("SearchReplace",function(){ge(e,n)})},U=function(e,n){return function(){ge(e,n)}},xn=function(e,n){e.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:U(e,n),icon:"search"}),e.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:U(e,n),icon:"search"}),e.shortcuts.add("Meta+F","",U(e,n))};function bn(){B.add("searchreplace",function(e){var n=E({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return En(e,n),xn(e,n),Fn(e,n)})}bn()})();const Cn=wn({__proto__:null,default:pe},[pe]);export{Cn as i};
