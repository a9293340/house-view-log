function me(s,f){for(var m=0;m<f.length;m++){const u=f[m];if(typeof u!="string"&&!Array.isArray(u)){for(const c in u)if(c!=="default"&&!(c in s)){const d=Object.getOwnPropertyDescriptor(u,c);d&&Object.defineProperty(s,c,d.get?d:{enumerable:!0,get:()=>u[c]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}var C={};(function(){var s=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=0,m=function(e){var n=new Date,t=n.getTime(),r=Math.floor(Math.random()*1e9);return f++,e+"_"+r+f+String(t)},u=function(e,n){var t='<table data-mce-id="mce" style="width: 100%">';t+="<tbody>";for(var r=0;r<n;r++){t+="<tr>";for(var o=0;o<e;o++)t+="<td><br></td>";t+="</tr>"}return t+="</tbody>",t+="</table>",t},c=function(e){var n=e.dom.select("*[data-mce-id]");return n[0]},d=function(e,n,t){e.undoManager.transact(function(){e.insertContent(u(n,t));var r=c(e);r.removeAttribute("data-mce-id");var o=e.dom.select("td,th",r);e.selection.setCursorLocation(o[0],0)})},A=function(e,n,t){e.plugins.table?e.plugins.table.insertTable(n,t):d(e,n,t)},D=function(e,n,t){var r=e.editorUpload.blobCache,o=r.create(m("mceu"),t,n);r.add(o),e.insertContent(e.dom.createHTML("img",{src:o.blobUri()}))},w=tinymce.util.Tools.resolve("tinymce.util.Promise"),_=function(e){return new w(function(n){var t=new FileReader;t.onloadend=function(){n(t.result.split(",")[1])},t.readAsDataURL(e)})},P=tinymce.util.Tools.resolve("tinymce.Env"),B=tinymce.util.Tools.resolve("tinymce.util.Delay"),H=function(e){return new w(function(n){var t=document.createElement("input");t.type="file",t.accept="image/*",t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0.001",document.body.appendChild(t);var r=function(i){n(Array.prototype.slice.call(i.target.files))};t.addEventListener("change",r);var o=function(i){var a=function(){n([]),t.parentNode.removeChild(t)};P.os.isAndroid()&&i.type!=="remove"?B.setEditorTimeout(e,a,0):a(),e.off("focusin remove",o)};e.on("focusin remove",o),t.click()})},x=function(e){e.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:function(){H(e).then(function(n){if(n.length>0){var t=n[0];_(t).then(function(r){D(e,r,t)})}})}}),e.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:function(){A(e,2,2)}})},L=function(e){var n=typeof e;return e===null?"null":n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},y=function(e){return function(n){return L(n)===e}},O=function(e){return function(n){return typeof n===e}},j=function(e){return function(n){return e===n}},U=y("string"),$=y("object"),F=y("array"),z=O("boolean"),G=j(void 0),N=O("function"),R=function(){},l=function(e){return function(){return e}},J=function(e){return e},v=l(!1),h=l(!0),p=function(){return T},T=function(){var e=function(r){return r()},n=J,t={fold:function(r,o){return r()},isSome:v,isNone:h,getOr:n,getOrThunk:e,getOrDie:function(r){throw new Error(r||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(void 0),or:n,orThunk:e,map:p,each:R,bind:p,exists:v,forall:h,filter:function(){return p()},toArray:function(){return[]},toString:l("none()")};return t}(),E=function(e){var n=l(e),t=function(){return o},r=function(i){return i(e)},o={fold:function(i,a){return a(e)},isSome:h,isNone:v,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:t,orThunk:t,map:function(i){return E(i(e))},each:function(i){i(e)},bind:r,exists:r,forall:r,filter:function(i){return i(e)?o:T},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},K=function(e){return e==null?T:E(e)},g={some:E,none:p,from:K};function S(e,n,t,r,o){return e(t,r)?g.some(t):N(o)&&o(t)?g.none():n(t,r,o)}var Q=1,W=function(e,n){var t=n||document,r=t.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return b(r.childNodes[0])},X=function(e,n){var t=n||document,r=t.createElement(e);return b(r)},Y=function(e,n){var t=n||document,r=t.createTextNode(e);return b(r)},b=function(e){if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},Z=function(e,n,t){return g.from(e.dom.elementFromPoint(n,t)).map(b)},I={fromHtml:W,fromTag:X,fromText:Y,fromDom:b,fromPoint:Z},M=function(e,n){var t=e.dom;if(t.nodeType!==Q)return!1;var r=t;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")};typeof window<"u"||Function("return this;")();var V=function(e){var n=e.dom.nodeName;return n.toLowerCase()},q=function(e,n,t){for(var r=e.dom,o=N(t)?t:v;r.parentNode;){r=r.parentNode;var i=I.fromDom(r);if(n(i))return g.some(i);if(o(i))break}return g.none()},ee=function(e,n,t){var r=function(o,i){return i(o)};return S(r,q,e,n,t)},ne=function(e,n,t){return q(e,function(r){return M(r,n)},t)},te=function(e,n,t){var r=function(o,i){return M(o,i)};return S(r,ne,e,n,t)},re=function(e,n){if(n(e))return!0;throw new Error("Default value doesn't match requested type.")},oe=function(e,n){if(F(e)||$(e))throw new Error("expected a string but found: "+e);return G(e)?n:z(e)?e===!1?"":n:e},ie=function(e){return function(n,t,r){re(r,e);var o=n.getParam(t,r);return oe(o,r)}},k=ie(U),ae=function(e){return k(e,"quickbars_selection_toolbar","bold italic | quicklink h2 h3 blockquote")},ue=function(e){return k(e,"quickbars_insert_toolbar","quickimage quicktable")},ce=function(e){return k(e,"quickbars_image_toolbar","alignleft aligncenter alignright")},le=function(e){var n=ue(e);n.trim().length>0&&e.ui.registry.addContextToolbar("quickblock",{predicate:function(t){var r=I.fromDom(t),o=e.schema.getTextBlockElements(),i=function(a){return a.dom===e.getBody()};return te(r,"table",i).fold(function(){return ee(r,function(a){return V(a)in o&&e.dom.isEmpty(a.dom)},i).isSome()},v)},items:n,position:"line",scope:"editor"})},se=function(e){var n=function(i){return e.dom.getContentEditableParent(i)!=="false"},t=function(i){return i.nodeName==="IMG"||i.nodeName==="FIGURE"&&/image/i.test(i.className)},r=ce(e);r.trim().length>0&&e.ui.registry.addContextToolbar("imageselection",{predicate:t,items:r,position:"node"});var o=ae(e);o.trim().length>0&&e.ui.registry.addContextToolbar("textselection",{predicate:function(i){return!t(i)&&!e.selection.isCollapsed()&&n(i)},items:o,position:"selection",scope:"editor"})};function fe(){s.add("quickbars",function(e){x(e),le(e),se(e)})}fe()})();const de=me({__proto__:null,default:C},[C]);export{de as i};
